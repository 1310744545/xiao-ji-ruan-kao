---  
title: 2010年上半年  
# icon: gears  
order: 999  
category:  
- 历年真题  
tag:  
- 真题  
  
# navbar: false  
# sidebar: false  
  
# breadcrumb: false  
# pageInfo: false  
# contributors: false  
# editLink: false  
# lastUpdated: false  
# prev: false  
# next: false  
comment: false  
# footer: false  
  
# backtotop: false  
---  
## 第1题 ##

【问题1】  
E1：前端应用 E2：数据管理员 E3：后端数据库  
  
解析：本问题考查顶层DFD。顶层DFD —般用来确定系统边界，将待开发系统看作是一个加工，因此图中只有唯一的一个加工和一些外部实体，以及这两者之间的输入输出数据流。题目要求根据描述确定图中的外部实体。分析题目中的描述，并结合已经在顶层数据流图中给出的数据流进行分析。题目中有信息描述：数据管理员可通过中间件进行用户管理、操作管理和权限管理；前端应用提交操作请求；连接管理连接相应的后台数据库并提交操作。由此可知该中间件系统有数据管理员、前端应用和后端数据库三个外部实体。对应图1-1中数据流和实体的对应关系，可知E1为前端应用，E2为数据管理员，E3为后端数据库。  
  
【问题2】  
D1：用户表 D2:操作表 D3:权限表  
  
解析：本问题考查0层DFD中数据存储的确定。说明中描述：用户信息（用户名、密码）存储在用户表中；标准操作和后端数据库信息存放在操作表中；权限管理维护信息存放在权限表中。因此数据存储为用户表、操作表以及权限表。再根据图1-2中D1的输入数据流从用户管理来，D2的输入数据流从操作管理来，D3的输入数据流从权限管理来，所以D1为用户表，D2为操作表，D3为权限表。  
  
【问题3】  
P的名称：操作结果处理  
![3665ed9bfe2941eb951307d1372b8f4f.jpg][]  
缺少的数据流:  
![ee02633121ec4267bc61676495c3fc5f.jpg][]  
  
解析：本问题考查0层DFD中缺失的加工和数据流。比较图1-1和图1-2,可知顶层DFD中的操作结果和处理后的操作结果没有在0层DFD中体现。再根据描述：后端数据库执行操作并将结果传给中间件，中间件对收到的操作结果进行处理后，将其返回给前端应用。可知，需要有操作结果处理，因此P为操作结果处理，其输入流从后端数据库E3来的操作结果，输出结果为处理后的操作结果，并返回给前端应用E1。  
考查完P及其输入输出流之后，对图1-2的内部数据流进行考查，以找出缺失的另外2条数据流。从图中可以看出D2和D3只有输入流没有输出流，这是常见DFD设计时的错误，所以首先考查D2和D3的输出流。描述中：权限验证是验证用户是否有权执行请求的操作，若用户有权执行该操作，进行连接管理；连接管理连接相应的后台数据库并提交操作；权限表存储用户可执行的操作信息。因此，权限验证有从权限表D3来的输入数据流。而要连接后端数据库，需要数据库信息，从权限验证的输出流中包含有数据库信息可知，权限验证需要获取到数据库信息，所以还需从操作表D2来的输入流。  
  
【问题4】  
在绘制数据流图的加工时，可能出现的输入、输出错误：  
只有输入而无输出或者黑洞  
只有输出而无输入或者奇迹  
输入的数据流无法通过加工产生输出流或者灰洞  
输入的数据流与输出的数据流名称相同  
  
解析：本问题考查在绘制数据流图中加工绘制时的注意事项。绘制加工时可能出现的错误有：加工的输入、输出时可能出现只有输入而无输出、只有输出而无输入、输入的数据流无法通过加工产生输出流以及输入的数据流与输出的数据流名称相同等错误。  


## 第2题 ##

【问题1】  
(a) PRIMARY KEY/NOT NULL UNIQUE/NOT NULL PRIMARY KEY  
(b) FOREIGN KEY (客户号)REFERENCES 客户(客户号）  
(c) CHECK(余额&gt;1.00)  
  
解析：由于问题1中“账户号唯一识别一个账户”可知账户号为账户关系的主键，即不能为空且唯一标识一条账户信息，因此需要用PRIMARY KEY对该属性进行主键约束；又由于“客户号为客户关系的唯一标识，且不能为空”可知客户号为客户关系的主键，在账户关系中应作外键，用FOREIGN KEY对该属性进行外键约束；由“账户余额不能小于1.00元”可知需要限制账户余额属性值的范围，通过CHECK约束来实现。从上分析可见，完整的SQL语句如下：  
![aaf15e1d0d2c43748d16f930992a62ff.jpg][]  
  
【问题2】  
(1)  
(d)支行.城市='天津市’  
(e)交易.交易日期LIKE'2009-09-%，或等价表示  
注：（d） (e)次序无关  
(f) (SELECT \* FROM 支行 WHERE 城市='天津市'）  
(g) (SELECT \* FROM 交易 WHERE 交易日期 LIKE'2009-09%’）或等价表示  
(2)  
(h)客户号IN  
(i)HAVING SUM(余额)&gt; 1000000.00 或等价表示  
(j)客户号DESC  
  
解析：SQL查询通过SELECT语句实现。  
(1)根据问题2要求应在表连接条件的基础上，需要添加两个条件：①支行关系的城市属性值为“天津市”，即支行.城市=’天津市’；②在2009年9月存在交易记录，由于交易日期形式为’2000-01-01'，所以需要通过模糊匹配来实现，用LIKE关键词和通配符表示，即交易.交易日期LIKE'2009-09-%'。  
WHERE子句中条件的先后顺序会对执行效率产生影响。假如解析器是按照先后顺序依次解析并列条件，优化的原则是：表之间的连接必须出现在其他WHERE条件之后，那些可以过滤掉最多条记录的条件尽可能出现在WHERE子句中其他条件的前面。要实现上述优化过程，可以重新组织WHERE条件的顺序或者通过嵌套查询以缩小连接记录数目的规模来实现。 .  
根据问题2要求，考生需要添加两个子查询以缩小参与连接的记录的数目，即筛选出天津市的所有支行（SELECT\* FROM支行WHERE城市=•天津市’），而且找到2009年9月发生的交易记录（SELECT \* FROM交易WHERE交易日期LIKE '2009-09-%')y然后再做连接查询。  
(2)根据问题2要求，可通过子查询实现“所有账户余额之和超过百万的客户信息”的查询；对SUM函数计算的结果应通过HAVING条件语句进行约束；降序通过DESC关键字来实现。  
![67073e4a661d4cceb8c048af848b15bb.jpg][]  
  
【问题3】  
(1)  
(k) ADD账户标记INT  
(1) SET账户标记=0;  
(2)  
(m) AFTER INSERT  
(n)新交易.金额&gt; 100000.00或等价表示  
(o)账户.账户号=新交易.账户号  
  
解析：(1)关系模式的修改通过ALTER语句来实现，使用ADD添加属性；使用SET修改属性值。  
![b3cf46c95e3f4190a5a1842e05fade7b.jpg][]  
(2)创建触发器可通过CREATE TRIGGER语句实现，问题3要求考生掌握该语句的基本语法结构。按照问题3要求，在交易关系中插入一条记录时触发器应自动执行，故需要创建基于INSERT类型的触发器，其触发条件是新插入交易记录的金额属性值&gt;100000.00；最后添加表连接条件。完整的触发器实现方案如下：  
![fb9ac4702d6f4968ab0517712d9fe405.jpg][]  
![fd06b705fa1142acba4c8958f859da51.jpg][]  


## 第3题 ##

【问题1】  
答案参见图3-1。  
![51a41a0ba1a4464594ef87a0ee312f58.jpg][]  
  
解析：根据题意由“一门含实验的课程可以开设给多个班级，每个班级每学期可以开设多门含实验的课程”可知课程和班级之间的开设关系为联系。由“一个实验室的一次 实验可以分配多个实验员负责辅导实验”可知实验、实验室与实验员之间的安排关系为联系。由“实验员给出学生的每次实验成绩”可知实验、学生与实验员之间的成绩关系为k:n:m联系。班级和学生之间的包含关系为1:n联系。  
  
【问题2】  
(1)课程编号，班级号  
(2)实验编号，课程编号  
(3)实验编号，批次号，安排学期，实验室编号，实验员编号  
(4)实验员编号，实验员姓名  
(5)室i，班级号  
(6)实验编号，学号 其他关系模式主键：  
课程(课程编号，课程名称，授课院系，实验学时）  
班级(班级号，专业，所属系）  
实验室(实验室编号，地点，开放时间，可容纳人数，实验课类型)  
  
解析：根据题意，可知课程编号是课程的主键，班级号是班级的主键。从表3-1可见，开课情况是体现课程与班级间的m:n联系，因此开课情况关系模式应该包含课程编号和班级号，并共同作为主键。一门课程包含多次实验，实验与课程之间是m:l关系，因此，由表3-1可知，实验关系模式应包含实验编号和课程编号，并且以实验编号为主键，以课程编号为外键。在制定试验计划时，每个班的每次实验可能按实验室被分成多个批次，每个批次的实验会有若干名实验员来辅导学生实验并打分。实验员关系模式应该记录实验员编号和实验员姓名，并以实验员编号为主键。实验室编号是实验室的主键。从表3-2可知，实验计划关系模式应记录实验编号、批次号和授课学期，并且共同作为主键。从表3-3可知，实验成绩关系模式记录每个学生的每次实验成绩，应包含学号和实验编号，并共同作为主键。  
  
【问题3】  
![4422b990df2a461ea83cc02329704d04.jpg][]  
  
解析：由于授课教师负责给若干个班级开设若干门课程，因此，课程、班级和授课教师之间的开设关系是联系。  


## 第4题 ##

【问题1】  
(1) 价格，天数  
(2) “线路信息”关系模式可以达到BCNF范式。  
因为非主属性价格、天数完全函数依赖于码且不传递依赖于码，且仅一个候选码，并为单属性。  
或答：每个函数依赖的决定因素都包含码。  
  
解析：本问题考查非主属性和BCNF范式。  
根据题意和“线路信息”关系模式可知，不属于任何候选键的属性(非键属性)为：价格，天数。  
根据BCNF范式的要求：每一个函数依赖的决定因素都包含码。  
而“线路信息”关系模式的函数依赖为：  
线路编号一价格，天数  
因此，“线路信息”关系模式可以达到BCNF范式。  
  
【问题2】  
(1) “订单信息”关系不满足第二范式，即非主属性不完全依赖于码。  
会造成插入异常、删除异常和修改复杂（或修改异常)。  
(2)分解后的关系模式如下：  
订单信息1(订单号，线路编号，联系人身份证号，出发时间，订单价格，人数）订单信息2(联系人身份证号，联系人名称，联系方式）  
订单信息3(订单号，负责导游工号，负责城市）  
(3)分解后的主键如下：  
订单信息1(订单号，线路编号，联系人身份证号，出发时间，订单价格，人数）订单信息2(联系人身份证号,联系人名称，联系方式）  
订单信息3(订单号，负责导游工号，负责城市）  
  
解析：本问题考查第二范式和第三范式的理解和应用。  
根据第二范式的要求：不存在非主属性对码的部分依赖。  
根据题意和“订单信息”关系模式可知，不属于任何候选键的属性（非键属性）为：线路编号，联系人名称，联系人身份证号，人数，联系方式，订单价格，出发时间，负责城市。  
“订单信息”关系模式的函数依赖为：  
订单号，负责导游工号→负责城市  
订单号→线路编号，联系人身份证号，人数，订单价格，出发时间  
联系人身份证号→联系人名称，联系方式  
“订单信息”关系模式存在非主属性对码的部分依赖，因此，不属于第二范式。根据第三范式的要求：每一个非主属性既不部分依赖于码也不传递依赖于码。  
因此，需要根据第三范式的要求和“订单信息”关系模式的函数依赖，对“订单信息”关系模式进行分解以满足第三范式的要求。  
  
【问题3】  
(1) “员工信息”关系模式，不满足第四范式。  
答出以下内容之一即可：  
①该关系模式不满足第二范式。  
②该关系模式存在多值依赖。  
③员工工号，计薪月一姓名，年龄，员工类别，为部分决定。  
④员工工号一手机号。  
(2)分解后的关系模式如下：  
员工信息1 (员工工号，姓名，年龄，员工类别）  
员工信息2 (员工工号，手机号）  
员工信息3 (员工工号，计薪月，被投诉次数，带团人数，月薪）  
  
解析：本问题考查第四范式的理解和应用。  
根据第四范式的要求：不允许有非平凡且非函数依赖的多值依赖。  
“员工信息”关系模式的函数依赖为：  
员工工号一姓名，年龄，员工类别 员工工号—手机号  
员工工号一计薪月，被投诉次数，带团人数，月薪  
由“员工信息”关系模式的函数依赖可知，“员工信息”关系模式存在部分依赖，所以，“员工信息”关系模式不满足第二范式；而“员工信息”关系模式也存’在多值依赖，所以，“员工信息”关系模式不满足第四范式。  
因此，需要根据第四范式的要求和“员工信息”关系模式的函数依赖，对“员工信息”关系模式进行分解以满足第四范式的要求。  


## 第5题 ##

【问题1】  
调度A结果：8 调度B结果：9 调度C结果：7  
调度A、B结果错误，因为破坏了事务的隔离性。一个事务的执行结果被另一个所覆盖。  
  
解析:本问题考查并发情况下不同的调度可能产生不同结果的情况。针对两个并发执行的售票程序，会相互影响从而得到错误的结果。  
  
【问题2】  
(1)判定事务并发执行正确性的准则是满足可串行化调度。要保证并发事务正确地执行，采用两段锁协议（2PL)。  
(2)重写后的售票程序伪指令序列：  
XLock(A);R (A, x);W (A, x - a); Unlock(A);  
  
解析：本问题考查对事务并发控制的相关知识的理解掌握。事务并发调度是否正确，可通过对非冲突语句进行交换，若最终将并发调度通过交换非冲突语句转换成串行调度，则该并发调度为可串行化调度，可串行化调度被作为事务并发执行正确性的准则。  
为保证可串行化调度，在事物执行过程中引入相应指令进行控制，即两段锁协议 (2PL),即对数据读之前先加读锁，写前加写锁，事务只有获得相应的锁才能操作数据，加解锁过程分为两个阶段，前一阶段只能加锁，后一阶段只能解锁，不允许有交叉。两段锁协议是保证并发事务可串行化调度的充分条件。  
针对给出的伪指令操作序列，在事务读取数据之前加Slock()指令，写数据之前加XlockO指令，并保证读/写锁不交叉，即满足两段锁协议。  
  
【问题3】  
(a) balance = :x WHERE flight = 'A'  
(b) EXEC SQL COMMIT WORK  
  
解析：本问题考查对2PL协议理论与SQL中的隔离级别，以及嵌入式SQL的编程实践。本地给出的空缺U)要补充的是嵌入式SQL的更新语句；空缺（b）要补充的是嵌入式SQL中的事务提交语句。  



[3665ed9bfe2941eb951307d1372b8f4f.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第1题/3665ed9bfe2941eb951307d1372b8f4f.jpg
[ee02633121ec4267bc61676495c3fc5f.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第1题/ee02633121ec4267bc61676495c3fc5f.jpg
[aaf15e1d0d2c43748d16f930992a62ff.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第2题/aaf15e1d0d2c43748d16f930992a62ff.jpg
[67073e4a661d4cceb8c048af848b15bb.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第2题/67073e4a661d4cceb8c048af848b15bb.jpg
[b3cf46c95e3f4190a5a1842e05fade7b.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第2题/b3cf46c95e3f4190a5a1842e05fade7b.jpg
[fb9ac4702d6f4968ab0517712d9fe405.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第2题/fb9ac4702d6f4968ab0517712d9fe405.jpg
[fd06b705fa1142acba4c8958f859da51.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第2题/fd06b705fa1142acba4c8958f859da51.jpg
[51a41a0ba1a4464594ef87a0ee312f58.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第3题/51a41a0ba1a4464594ef87a0ee312f58.jpg
[4422b990df2a461ea83cc02329704d04.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第3题/4422b990df2a461ea83cc02329704d04.jpg
