---  
title: 2012年上半年  
# icon: gears  
order: 997  
category:  
- 历年真题  
tag:  
- 真题  
  
# navbar: false  
# sidebar: false  
  
# breadcrumb: false  
# pageInfo: false  
# contributors: false  
# editLink: false  
# lastUpdated: false  
# prev: false  
# next: false  
comment: false  
# footer: false  
  
# backtotop: false  
---  
## 第1题 ##

【问题1】  
E1：借阅者  
E2：图书管理员  
E3/E4:学生数据库/职工数据库  
注：E3和E4不分顺序，但必须不同。  
  
  
本题考查顶层DFD。顶层DFI)—般用来确定系统边界，将待开发系统看作一个加工，图中只有唯一的一个处理和一些外部实体，以及这两者之间的输入输出数据流。题目要求根据描述确定图中的外部实体。分析题目中描述，并结合已经在顶层数据流图中给出的数据流进行分析。从题目的说明中可以看出：和系统的交互者包括图书管理员、借阅者两类人，图书管理员需要维护图书信息、得到查询所得的图书信息，借阅者提供借阅者ID、借阅与归还的图书。还有通过与教务处维护的学生数据库、人事处维护的职工数据库中的数据进行比对以验证借阅者ID是否合法的两个数据库作为外部实体。  
对应图1-1中数据流和实体的对应关系，可知E\]为借阅者，E2为图书管理员，E3和E4为学生数据库和职工数据库。  
  
【问题2】  
D1:图书表  
D2:借出图书表  
D3:逾期未还图书表  
D4:罚金表  
  
本题考查0层DFD中数据存储的确定。说明中描述维护图书信息主要存储或者更新图书表；借阅时需要检查逾期未还图书表是否有逾期未还图书以及罚金表中的罚金限额，归还时出现缺失和损坏需要处以罚金并存入罚金表；借阅与归还图书时需要存入借出图书表和更新借出图书表。在处理逾期时需要将罚金记入罚金表，要检杳和更新罚金限额。根据描述和图1-2中的数据存储的输入输出数据流提示，可知：D1为图书表，D2为借出图书表，D3为逾期未还图书表，D4为罚金表。  
  
【问题3】  
检查借阅者身份或检查借阅者ID;检查逾期未还图书；检查罚金是否超过限额；借阅图书；归还图书。  
  
本题对0层DFD中的处理进一步精化建模，绘制下层数据流图。从说明中对“处理借阅”的描述和图1-2可知，处理借阅需要检查借阅者身份、检查逾期未还图书、检査罚金是否超过限额、借阅图书和归还图书。描述中：检査所还图书是杏逾期，若是，执行“处理逾期”操作。这里处理逾期明确说明是一个操作，而且在描述（3）中单独描述，在图1-2中已经建模为单独一个处理，所以在本问题中仍然不分解为一个处理。  
  
【问题4】  
保持父图与子图平衡。父图中某加工的输入输出数据流必须与它的子图的输入输出数据流在数量和名字上相同。如果父图的一个输入（或输出）数据流对应于子图中儿个输入（或输出）数据流，而子图中组成这些数据流的数据项全体正好是父图中的这一个数据流，那么它们仍然算是平衡的。  
  
本题考查在绘制下层数据流图时需要注意的问题。问题3明确给出是对复杂处理进行进一步精化，绘制下层数据流图，因此需要注意的问题是绘制下层数据流图时要保持父图与子图平衡。父图中某加工的输入输山数据流必须与它的子图的输入输出数据流在数量和名字上相同。如果父图的一个输入（或输出）数据流对应于子图中儿个输入（或输出）数据流，而子图屮组成这些数据流的数据项全体正好是父图中的这一个数据流，那么它们仍然算是平衡的。  


## 第2题 ##

【问题1】  
(a)ALTERTABLE员工ADDCONSTRAINTPK一员工PRIMARYKEY(员工编号)  
(其中PK—员工可以为任何有效的命名）  
(b)ALTERTABLE员工ADDCONSTRAINTFK—员工FOREIGNKEY(部门)REFERENCES部门(部门编号）（其中FK—员工可以为任何有效的命名）  
  
  
考査SQL中的数据定义语言DDL和完整性约束。根据题意，巳经用CREATE语句来定义员工关系模式的基本结构，因此应该用ALTER来增加员工关系模式的实体完整性约泶和参照完整性约束，对应的语法为：  
![41d2c682439f42478c894e61b55edd49.jpg][]  
员工编号为员工关系模式的实体完整性约束，其语句为：  
![8fbb1da009eb439ca90e394c156b8604.jpg][]  
部门为员工关系模式的参照完整性约束，参照部门关系模式的部门编号，其语句为：  
![19a6665a265d4ca284a0a4c59e5254d8.jpg][]  
  
【问题2】  
(c)AVG(工资）  
(d) 员工.部门=部门.部门编号AND职务◊’经理'  
(e) 部门编号，部门名称  
(f) AVG(工资)&gt;3000  
(g) ORDERBY3DESC或ORDERBY平均工资DESC  
(2) (h)工资&gt;(SELECTAVG(工资)FROM员工）  
(3) (i)NOTEXISTS  
(j)部门编号=所属部门  
(4) (k)WHEN教育水平&lt;=:20 AND教育水平&gt;16THEN’本科生’  
(1)ELSE’其他，  
(m)员工.部门=部门.部门编号AND部门名称='研发部，  
(5) (n)NOT LIKE'%处，  
  
考查SQL中的数据操纵语言DML。  
(1) 本题考查一个较完整的查询语句，包括的知识点有多表查询、聚集函数、分组、分组条件和排序查询结果。查询涉及员工和部门关系模式，用聚集函数AVG(工资)求平均工资，若有GROUPBY子句，则聚集函数作用在每个分组上，且GROUPBY后应包含除了聚集函数之外的所有结果列。若GROUPBY子句后跟有HAVING短语，则只有满足条件的分组才会输出。“0110£118丫列名\[八8(：|0£8&lt;：\]”对输出结果进行升序或降序排序，若不明确指定升序或降序，则默认升序排序。  
(2) 本题考查子査询和聚集函数。聚集函数AVG用于求均值，而聚集函数只能出现在SELECT和HAVING子句中，不能在其他地方出现，因此此处需要用子查询。  
(3) 本题考查带有EXISTS谓词的子查询，该查询不返回任何数据，只有逻辑真“true”和逻辑假“false”。本题要查询没有承担任何项目的部门编号和部门名称，则可以在项目关系模式中查询到承担项目的部门编号，用NOTEXISTS关键字来获得要查询的信息。  
(4) 本题考查用关键字CASE-END来根据条件进行搜索。WHEN后面跟的是条件，THEN是满足条件后对应该列的值，ELSE是不满足上述所有条件对应该列的值。根据题意，若教育水平小于等于20且大于16,则输出本科生，对应的SQL表示为“WHEN教水平&lt;=20 AND教育水平&gt;16,THEN'本科生其他情况，即教育水平小于等于16的，输出其他，对应的SQL表示为“ELSE'其他'”。查询涉及员工和部门关系模式，查询条件为“员工.部门=部门.部门编号AND部门名称=’研发部’”。  
(5) 本题考查用关键字LIKE进行字符匹配。  
LIKE的语法为：  
\[NOT\]LIKE，〈匹配串&gt;'  
其中，匹配串可以是一个完整的字符串，也可以含有通配符％和\_，其中％代表任意长度（包括0长度）的字符串，\_代表任意单个字符。不以“处”结尾对应的表示为“NOTLIKE，％处，”。  


## 第3题 ##

【问题1】  
![c5ff2437d19f4bd6bd2ee32da587947f.jpg][]  
  
本题考查数据库的概念结构设计，题目要求补充完整实体联系图中的联系和联系的  
类型。  
根据题目的需求描述可知，一名病人在一次住院期间对应一张病床，而一个病床可以有多名病人曾经住过。所以，病床实体和病人实体之间存在“住院”联系，联系的类型为多对一，表示为\*:.1。  
根据题目的需求描述可知，一名病人在一次住院期间，由一名医生做出诊断，并给出一份诊断书。所以，病人实体和医生实体之间存在“诊断”联系，联系的类型为多对多，表示为\*:1。  
根据题目的需求描述可知，一名病人在一次住院期间可以进行多次手术，一次手术安排在一个手术室，由多名医生参与。所以，病人实体与医生实体和手术室实体三者之间存在“手术”联系，三者之间联系的类型为多对多对多，表示为\*:\*:\*  
根据题目的需求描述可知，一名手术室护士负责多个手术室，每个手术室由多名护士负责。所以，护士实体和手术室实体之间存在“负责”联系，联系的类型为多对多，表示为\*:\*。  
  
【问题2】  
(1) 病区，护士号  
(2) 手术室号，护士号,责任  
(3) 病案号，病床号  
(4) 病案号，医生编号  
(5) 病案号，手术室号，手术时间，医生编号  
  
本题考查数据库的逻辑结构设计，题目要求补充完整各关系模式，并给出各关系模式的主键。  
根据实体联系图和需求描述，每个病床护士负责护理一个病区内的所有病人，每个病区由多名护士负责护理。系统记录每个病床护士所负责护理的病区。所以，对于“病床护士”关系模式需填写的属性为：適M，护士号。  
根据实体联系图和需求描述，每个手术室护士负责多个手术室，每个手术室由多名护士负责，每个护士在手术室中有不同的责任。因此，对于“手术室护士”关系模式，需填写的属性为：手术室号，护士号，责任。  
根据实体联系图和需求描述，病案号唯一标识病人本次住院的信息。病人的住院信息包括病床信息。所以，对于“病人”关系模式需补充的属性为：病案号，病床号。  
根据实体联系图和需求描述，一名病人在一次住院期间，由一名医生做出诊断，并给出一份诊断书。所以，对于“诊断”关系模式需补充的属性为：病案号，医生编号。  
根据实体联系图和需求描述，一名病人在一次住院期间，可能需要进行一次或多次手术，每次手术安排在一间手术室，由多名医生(包括主刀医生)参与。所以，对于“手术医生安排”关系模式需补充的属性为：病案号，手术室号，手术吋间，医生编号。  
病床护士关系模式的主键：病区，护士号  
手术室护士关系模式的主键：手术室号，护士号  
病人关系模式的主键：病案号  
诊断书关系模式的主键：病案号  
采购订单关系模式的主键：订单编码  
手术医生安排关系模式的主病案号，手术室号，手术时间，医生编号码  
  
【问题3】  
![23bc814318b54d74a3ff994d9bf20071.jpg][]  
  
本题考查数据库的概念结构设计，根据新增的需求新增实体联系图中的实体及联系和联系的类型。  
根据问题描述，系统需记录医生给病人开处方的药品信息，则需新增“药品”实体，并在病人实体与医生实体和药品实体三者之间存在“处方”联系，联系的类型是多对多对多(\*:\*:\*)。  


## 第4题 ##

【问题1】  
(1) 姓名，性别，联系电话，出生日期，简历信息，面试成绩。  
(2) “候选人”关系模式不满足第二范式（或答：属于第一范式)。  
由于“候选人“关系的候选码为：身份证号和应聘的职位编码，但又包含函数依赖:身份证号→姓名，性别，联系电话，出生日期，简历信息。  
不满足第二范式的要求，即：非主属性不完全依赖于码。  
  
  
本题考查非主属性和第二范式。  
"候选人"关系的候选码为：身份证号、应聘的职位编码。“候选人”关系的函数依赖集F如下：  
F=\{(身份证号，应聘的职位编码）→姓名，性别，联系电话，出生日期，简历信息，面试成绩；  
身份证号→姓名，性别，联系电话，出生H期，简历信息\}  
显然，“候选人”关系非键属性为姓名、性别、联系电话、出生日期、简历信息和面试成绩，它们不完全函数依赖于码（身份证号，应聘的职位编码)，而是部分依赖于码。根据第二范式的定义，每一个非主属性完全函数依赖于码，所以“候选人”关系模式不满足第二范式。  
  
【问题2】  
(1) “面试官”关系不满足第三范式，即每一个非主属性既不部分依赖于码也不传递依赖于码。会造成：插入异常、删除异常和修改复杂（或修改异常)。  
(2) 分解后的关系模式如下：  
面试官1(工号，姓名，专业类型，工作职务，工作部门）  
面试官2(工作部门，部门负责人，部门电话）  
(3) 修正后关系模式的主键如下：  
面试官1(工号，姓名，专业类型，工作职务，工作部门）  
面试官2(工作部门，部门负责人，部门电话）  
  
本题考查第三范式的概念和应用。  
“面试官”关系的候选码为：工号。根据题目的需求描述可知，工号作为面试官的唯一编号，工作部门唯一标识一个邹门。“面试官”关系的函数依赖F如下：  
F=\{工号，姓名，专业类型，工作职务，工作部门，部门负责人，部门电话  
工作部门→部门负责人，部门电话\}  
从F中可以得出：工号→工作部门，工作部门→部门负责人，部门电话。可见，“面试官”关系模式存在传递依赖，故“面试官”关系模式属于第三范式。  
  
【问题3】  
(1) “招聘安排”关系模式，不满足第四范式。  
职位编码→→所属部门  
职位编码→→面试官工号  
(2) 分解后的关系模式如下：  
招聘安排1(职位编码，所属部门）  
招聘安排2(职位编码，面试官工号  
  
  
本题考査第四范式的概念和应用。  
“招聘安排”关系的候选码为：职位编码、所属部门、面试官工号。根据题目的需求描述可知，每个职位可以属于一个或多个部门，一个职位可由多名面试官负责面试，可以得出“招聘安排”关系的函数依赖F如下：  
F=\{职位编码→→所属部门，职位编码→→面试官工号\}  
根据第四范式的要求：不允许有非平凡且非函数依赖的多值依赖，而“招聘安排”关系模式存在多值依赖，故不属于第四范式。  


## 第5题 ##

【问题1】  
T2-&gt;T1(A,B,50)结果：A=51   B=252   A+B=303  
  
本题考查对事务设计、并发控制的理解和掌握。  
两个事务T1、T2的串行执行只有两种方式：T1执行完执行T2(记为：T1-&gt;T2)和T2执行完执行T1(记为：T2-&gt;T1),结合A、B的初值，即可计算出T2-&gt;T1的执行结果。  
根据A、B的初值，按照给定的调度，获得执行结果为：A=50.5，B=252,与任何一个串行执行的结果都不同，为错误的调度，事实上会造成储户的无端损失。  
引入两段锁协议后可保证调度的正确。根据锁类型和加解锁的要求，本题中所有的读取随后即要修改，对应了SQL中的UPDATE指令，可直接加X锁，具体参见参考答案。  
若将计息业务T2改为对单个账户的余额计算利息，根据提示的情况，调度结果可能存在不一定性，这样的事务设计是错误的。  
  
【问题2】  
(1) 调度不正确  
结果为：A=50.5 B=252  
原因：与任何一个串行结果都不同。  
(2) 满足两段锁协议的调度：  
![7810f75726b64612894dec92f7343b06.jpg][]  
  
本题考查对事务设计、并发控制的理解和掌握。  
两个事务T1、T2的串行执行只有两种方式：T1执行完执行T2(记为：T1-&gt;T2)和T2执行完执行T1(记为：T2-&gt;T1),结合A、B的初值，即可计算出T2-&gt;T1的执行结果。  
根据A、B的初值，按照给定的调度，获得执行结果为：A=50.5，B=252,与任何一个串行执行的结果都不同，为错误的调度，事实上会造成储户的无端损失。  
引入两段锁协议后可保证调度的正确。根据锁类型和加解锁的要求，本题中所有的读取随后即要修改，对应了SQL中的UPDATE指令，可直接加X锁，具体参见参考答案。  
若将计息业务T2改为对单个账户的余额计算利息，根据提示的情况，调度结果可能存在不一定性，这样的事务设计是错误的。  
  
【问题3】  
三个事务的串行：  
(1) T1(A,B,50)-&gt;T2(A)-&gt;T2(B)结果：A=50.5B=252.5  
(2) T2(A)-&gt;T1(A,B,50)-&gt;T2(B)结果：A=51 B=252.5  
不正确。计息业务设计为对单个账户的余额计算利息，无法实现对所有账户的锁定和统一计息，其间的转账会产生数据错误，会造成银行或客户的损失。  
  
  
  
本题考查对事务设计、并发控制的理解和掌握。  
两个事务T1、T2的串行执行只有两种方式：T1执行完执行T2(记为：T1-&gt;T2)和T2执行完执行T1(记为：T2-&gt;T1),结合A、B的初值，即可计算出T2-&gt;T1的执行结果。  
根据A、B的初值，按照给定的调度，获得执行结果为：A=50.5，B=252,与任何一个串行执行的结果都不同，为错误的调度，事实上会造成储户的无端损失。  
引入两段锁协议后可保证调度的正确。根据锁类型和加解锁的要求，本题中所有的读取随后即要修改，对应了SQL中的UPDATE指令，可直接加X锁，具体参见参考答案。  
若将计息业务T2改为对单个账户的余额计算利息，根据提示的情况，调度结果可能存在不一定性，这样的事务设计是错误的。  



[41d2c682439f42478c894e61b55edd49.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第2题/41d2c682439f42478c894e61b55edd49.jpg
[8fbb1da009eb439ca90e394c156b8604.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第2题/8fbb1da009eb439ca90e394c156b8604.jpg
[19a6665a265d4ca284a0a4c59e5254d8.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第2题/19a6665a265d4ca284a0a4c59e5254d8.jpg
[c5ff2437d19f4bd6bd2ee32da587947f.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第3题/c5ff2437d19f4bd6bd2ee32da587947f.jpg
[23bc814318b54d74a3ff994d9bf20071.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第3题/23bc814318b54d74a3ff994d9bf20071.jpg
[7810f75726b64612894dec92f7343b06.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第5题/7810f75726b64612894dec92f7343b06.jpg
