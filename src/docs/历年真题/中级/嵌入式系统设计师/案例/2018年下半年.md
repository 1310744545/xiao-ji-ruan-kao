---  
title: 2018年下半年  
# icon: gears  
order: 991  
category:  
- 历年真题  
tag:  
- 真题  
  
# navbar: false  
# sidebar: false  
  
# breadcrumb: false  
# pageInfo: false  
# contributors: false  
# editLink: false  
# lastUpdated: false  
# prev: false  
# next: false  
comment: false  
# footer: false  
  
# backtotop: false  
---  
## 第1题 ##

试题一（15分）  
阅读下列说明和图，回答问题1至问题3，将解答填入答题纸的对应栏内。  
【说明】  
智能家居系统以消费者的使用习惯为依据，利用信息系统和自动化控制系统实现人与家用设备之间的信息交换，也就是说，智能家居是对家庭环境中的各个子系统（家电、水电、窗帘、视频监控、服务机器人等）进行互通控制的一套体系。图1-1为某单位设计的以ZigBee、WiFi及GSM为基础构建的集智能控制、安全监控为一体的智能家居系统示意图，依次是：家庭内部以ZigBee为基础的无线系统、用来进行视频传输的WiFi 网络和用来外部交互的外部交互网络。  
![21cf44ddc8a849e28faeeae8a5816881.jpg][]  
安全视频监控系统利用WiFi网络同家庭PC主机连接，用户可以通过外网或者内部WiFi连接，实时监控家庭状态，或者当家庭内部出现紧急事件后，可以通过GSM网络向家庭用户发送短信或彩信。  
王工计划为某小区设计一套智能家居系统，利用ZigBee技术的低功耗、自组织、可扩展等特点，组建家庭内部无线传感器网络，网络节点包括室内温湿度采集节点、火灾环境监测节点、模拟空调控制节点、模拟雨水窗户监控节点。王工在开发智能家居系统时采用V开发模型，V幵发模型强调软件开发的协作和速度，将软件实现和验证有机结合起来，在保证较高的软件质量情况下缩短开发周期，图1-2为V模型示意图。该模型中，每个开发活动都有对应的验证活动，在进行客户需求分析时，测试人员可以了解产品设计特性、用户真正的需求，确定测试目标，可以准备用例并策划测试活动；在软件需求分析阶段，测试人员可以了解实现的过程、评审需求，设计测试方案和计划，并准备测试环境，设计系统或配置项测试用例；在软件概要设计阶段，测试人员可以评审概要设计，设计软件集成方案和用例：在详细设计阶段，测试人员可以评审详细设计，设计单元测试用例；在编码阶段，测试人员可以评审代码，并执行单元测试。  
![ad7adc68c15d4d5e94c611ce67e298d4.jpg][]  
  
【问题1】（4分）  
在图1-2所示的V模型中，与开发阶段中概要设计对应的测试阶段称为（1）。在系统或配置项测试阶段应采用（2）方法。  
  
【问题2】（5分）  
完成下面对图1-2所示的V模型的论述，将答案填写在答题纸的对应栏中。  
1.客户需求分析对应验收测试。在进行需求分析、功能设计的同时，测试人员就可以阅读、审查分析结果，了解产品设计特性、用户真正的需求，从而确定（1）。  
2.进行软件需求分析时，测试人员可了解实现的过程、评审需求，可设计（2）和（3）。  
3.设计人员做详细设计时，测试人员可参与设计，对设计进行（4）,同时（5）, 并基于用例开发测试脚本。  
  
【问题3】（6分）  
ZigBee协调器是整个ZigBee家庭内网的核心,负责管理各个ZigBee节点设备与PC网关的信息和控制指令的传输。温湿度采集终端将传感器的数据以点播的形式发送给协调器，其他采集/控制节点以广播的形式与ZigBee协调器进行数据的交换，协调器和PC 采用串口通信协议。协调器上电后，首先进行系统初始化，信道扫描、创建信道并组建网络。如果组建网络成功，则进行各层事件扫描；如果失败，则继续创建，如果检测到应用层有事件，则对事件进行处理；否则反复扫描各层事件。当应用层有事件，则检査数据类型。如果是室内环境数据，则经过串口发送到网关；如果不是室内环境数据，则进一步判断是否为控制指令；如果是，则向控制节点发送控制指令。ZigBee协调器软件流程图如图1-3所示。补充图1-3中的（1）~（4），并将答案填写在答题纸的对应栏中。  
![cb5b07e231f84f2b8af27f02acd8210f.jpg][]  


## 第2题 ##

试题二（15分）  
阅读下列说明和图，回答问题1至问题3，将解答填入答题纸的对应栏内。  
【说明】  
在智能家居系统设计中，李工被分配进行ZigBee协调器、信息采集器节点、终端控制节点和安全视频监控系统的部分硬件电路原理设计。  
李工在基于微处理器的ZigBee协调器设计中，使用四个LED灯（D1、D2、D3、D4)表示状态，四个LED灯分别接到处理器的P2\_0、P2\_1、P2\_2和P2\_3管脚，部分相关的硬件设计如图2-1所示。  
![96d35d50d67e45acb4135105e36366de.jpg][]  
李工在CO2的信息采集器节点设计中，采用红外传感器T6004进行CO2信息收集，T6004利用CO2可以吸收特定波段红外辐射的原理，同时内置温度补偿，与控制器CC2530进行连接，部分相关的硬件设计如图2-2所示。T6004传感器的工作电压为5V，CC2530控制器的工作电压为2.0~3.6V。  
![f1698d02b4284561a11e6a48e13a44a7.jpg][]  
李工在空调终端控制节点设计中，采用红外遥控电路中的红外发光二极管将调制好的红外光波发送给空调的红外接收电路，部分相关的硬件设计如图2-3所示，处理器通过P1\_4管脚进行红外光波的发送。  
![c74beab006e3496a8a24cfe81883a487.jpg][]  
李工设计的安全视频监控系统原理示意图如图2-4所示。主处理器采用T1的DM6446,该处理器包括ARM子系统，DSP子系统，视频处理子系统等，前端模拟视频通过TVP5146进行（可接2路模拟视频输入，分别是V1和V2)采集，TVP5146将模拟视频数据转换为10bit的YCbCr4:2:2数字格式，然后送到主处理器。主处理器通过I2C总线可以对TVP5146进行配置（TVP5146接口电压为3.3V)，TVP5146和主处理器之间接口包括：l0bit数字视频信号、时钟信号、行场同步信号。DM6446主处理器的视频信号接口、I2C接口工作电压为1.8V。  
![6f8a0d44c2aa40278a1cf83d0ebf83b0.jpg][]  
  
【问题1】（4分）  
在ZigBee协调器设计中，按照需求李工定义了四个LED灯的状态含义，分别是：D1 “亮”表示协调器已启动，“灭”表示协调器未启动；D2 “亮”表示有外围信息采集器节点已加入到ZigBee网络，“灭”表示目前无节点加入网络；D3 “亮”表示有终端控制节点已加入到ZigBee网络，“灭”表示目前无节点加入网络；D4 “亮”表示协调器正在通过串口和PC主机进行数据通信，“灭”时表示目前没有数据通信。  
如果当前ZigBee协调器处于启动状态、且只有CO2外围信息采集器连入ZigBee网络，没有任何终端控制节点连接，协调器正在通过串口向PC主机发送CO2的采集信息，在这种情况下，P2\_0、P2\_1、P2\_2和P2\_3应该分别输出什么电平（回答高电平或低电平）？  
  
【问题2】（5分）  
1. 在图2-2的CO2信息采集器设计中，两个IN4007(U3和U4)的作用是什么？  
2. 为了使得红外发光二极管发射，图2-3中的P1\_4应该输出高电平还是低电平？  
3. 在图2-4中,连接主处理器DM6446和TVP5146之间SN74AVC芯片的作用是什么？  
  
【问题3】（6分）  
在使用I2C接口对TVP5146进行配置时，DM6446为主，TVP5146为从。在每次写寄存器配置操作中，需要主先发送设备从地址、再发送待操作的寄存器地址、最后发送待写入的数据，并且每次主向从发送消息，都需要接收到从的应答后，才能进入下一步操作。  
在调试过程中，李工希望通过I2C来配置TVP5146的视频标准模式，对应的寄存器地址和各个Bit位的含义如表2-1所示。  
![9cd92c9eb4314105b32f4ce2bf3c2fc3.jpg][]  
假设当前TVP5146的I2C地址为0x64 (设备从地址)，李工希望将该TVP5146配置为NTSC525视频标准，请从以下A~I中选择合适的操作，补充到图2-5中的空（1）~（6）处。  
A. 通过I2C发送寄存器地址00h  
B. 通过I2C发送寄存器地址02h  
C. 通过I2C发送数据01h  
D. 通过I2C发送数据03h  
E. 通过I2C发送设备从地址64h  
F. 通过I2C发送设备从地址60h  
G. 等待TVP5146应答  
H. 向TVP5146发送回应  
I. 是否有中断发生  
![226a53fa8fcf4490980448d903491150.jpg][]  


## 第3题 ##

试题三（15分）  
阅读下列说明和图，回答问题1至问题3，将解答填入答题纸的对应栏内。  
【说明】  
在智能家居系统软件设计中，家庭内网节点软件设计包括协调器软件、现场采集/ 执行器（室内温湿度采集节点、模拟台灯控制节点、模拟雨水窗户监控节点、模拟空调控制节点和火灾检测节点）的软件设计。软件功能组成如图3-1所示。  
![d8bb81112dc24dee8d30fa61c4ecd833.jpg][]  
整个系统中，协调器是整个家庭内网的核心，负责管理各个节点设备与PC网关的信息和控制指令的传输。温湿度采集终端将传感器的数据以点播的形式发送给协调器，其他采集/控制节点以广播的形式与协调器进行数据的交换，协调器和PC采用串口通信协议。协调器软件主要完成以下功能：  
(1) 创建信道，组建网络；如果失败，则继续创建；  
(2) 组建网络成功，则进行各层事件扫描；  
(3) 如果检测到应用层有事件，则转第（4）步，否则反复扫描各层事件；  
(4) 判断数据类型，如果是室内环境数据，则经串口发送到网关：如果是控制指令，则叫控制节点发送控制指令；如果前面两者均不是，则不处理；  
(5) 继续扫描各层事件。  
  
【问题1】（3分）  
在本软件开发过程中，开发人员使用了基于模型的嵌入式代码生成技术，目前对模型验证最主要的方法是（1）,通过此方法验证后，利用此验证结果可对模型的覆盖率进行分析，模型的覆盖率类型一般包括（2）(至少写出两种类型)。  
  
【问题2】（6分）  
为了测试此软件功能，测试人员设计了表3-1所示的测试用例，请填写该表中的空（1）~（3）。  
![e7263581bd7344cbbcb7dd5449f6aebf.jpg][]  
  
【问题3】（6分）  
覆盖率是度量测试完整性的一个手段，也是度量测试有效性的一个手段。在嵌入式软件白盒测试过程中，通常以语句覆盖率、条件覆盖率和MC/DC覆盖率作为度量指标。  
在实现第4条功能时，设计人员采用了下列算法：  
if ((数据有效==TRUE) && (数据类型==室内环境数据))  
\{数据经串口发送到网关；\}  
if ((数据有效=TRUE) && (数据类型==控制指令))  
\{向控制节点发送控制指令；\}  
请指出对上述算法达到100%语句覆盖、100%条件覆盖和100%MC/DC覆盖所需的最少测试用例数目，填写在表3-2的空（1）~（3）中。  
![b5cee873cf3046c7a19ca204aceaa0b7.jpg][]  


## 第4题 ##

试题四（15分）  
阅读下列说明和图，回答问题1至问题3，将解答填入答题纸的对应栏内。  
【说明】  
随着汽车工业的飞速发展，越来越多的车上的原有机械控制装置正在被电子控制装置所取代，这是典型的实时控制系统，例如用于控制发动机、自动变速箱、防抱死系统、电子稳定控制系统、牵引力控制系统、刹车辅助系统的ECU和用于座位调整、车窗玻璃升降、车顶移动的电子产品，这在很大程度上提高和完善了汽车的性能和技术水平。但是，汽车上电控系统的多样化和系统结构的复杂化，也直接导致相应的汽车电子软件开发难度越来越高。  
某汽车的ECU（Electronic Control Unit,电子控制单元）系统，采用某高性能的多核处理器，软件架构米用符合AUTOSAR (AUTOmotive Open System Architecture,汽车开放系统架构）标准的多核操作系统，将多个控制应用集成在一个处理器上运行，降低了系统设计的成本、体积、功耗。  
  
【问题1】（5分）  
AUTOSAR中定义了应用任务有四种不同的状态，其状态之间的切换如图4-1所示。  
![5ae0fe9e78384771869d15b1b61cf010.jpg][]  
请从以下状态选项中为（1）~（5）选择正确的状态编号，并将答案填写在答题纸的对应栏中。  
A. 触发  
B. 启动  
C. 挂起  
D. 被抢占  
E. 创建  
F. 激活  
G. 删除  
H. 时间片用完  
  
【问题2】（4分）  
(1) 该系统中任务的优先级是静态分配的，在某些特定的情况下，多任务抢占资源会发生死锁，解决的策略一般是采用优先级天花板方式。请简述优先级天花板的原理。  
(2) 该系统采用了多核处理器，多核处理器一般有SMP和AMP两种不同的工作方式。请简述SMP和AMP的差异。  
  
【问题3】（6分）  
该ECU系统在上电、复位或唤醒后，首先进入Boot模式，进行开或者关，对FLASH 和RAM进行初始化，然后进入用户程序，用户程序是从cstart函数开始执行的，在多核嵌入式系统中通常是先进行主核的cstart，主核自身进行部分初始化后将从核从HALT 状态激活，然后主核和从核在完成各自必要的设置后分别进入各自的main函数。图4-2 是该系统多核处理器的启动流程，请补充空（1）~（3）的内容，将解答填写在答题纸的对应栏中。  
![af16264532c14212bae4b18d0ba47e66.jpg][]  


## 第5题 ##

试题五（15分）  
阅读下列说明和C语言代码，回答问题1至问题3，将解答填入答题纸的对应栏内。  
【说明】  
在某工厂的物流车间，设计一款智能监测系统，实现对车间进行24小时不间断图像采集的功能。王工设计了一个实时监测采集系统，主要由图像采集卡和数据存储卡组成。由于实时图像的数据量巨大，设计采用DMA方式进行数据传输，当DMA传输完成后，DMA控制器会发起一个硬件中断。操作系统接收到硬件中断，调用中断服务程序。  
该系统的软件基于某嵌入式操作系统开发，支持中断管理、多任务调度等功能。与DMA相关的一段驱动程序示例代码如下。  
![3baf7a2306f14ee5b140ef3265acba77.jpg][]  
![cdc2a1354c344f30be263227800cbd92.jpg][]  
![c139f8a3fe82456da6b9e48a02cd0ee3.jpg][]  
  
【问题1】（5分）  
在操作系统的头文件中，有如下类型定义：  
![a7f5b8c14270429592ceee55f370312d.jpg][]  
1. 该类型定义了一组什么类型的变量，简述其功能。  
2. 在程序1的dma\_init 函数中，应该将intConnec t函数的第二个参数转换成相应的类型，可以消除编译警告，请补充其中空（1）的内容。  
  
【问题2】（4分）  
DMA控制器的寄存器操作序列，必须为原子操作，该程序中使用了两个信号量，一个用于进行寄存器操作系统的临界区保护，一个用于在传输函数和DMA完成中断处理程序之间同步。请根据信号量创建时的不同初始值，在程序2的dma\_trans函数和程序3 dma\_intHandle 函数中，补充空（2）、（3）、（4）、（5）处的内容。  
  
【问题3】（6分）  
在该系统中有A、B两个应用任务同时从不同角度采集图像，都需要调用该DMA传输函数，任务A和任务B的优先级相同。该系统采用优先级抢占的调度策略。在任务A调用DMA传输函数进行DMA传输时，有时会出现函数返回值为0的情况。根据DMA 控制器的芯片手册定义，1表示正常完成，2表示传输超时，4表示奇偶校验错，所以返回值不应该为0。  
王工经过认真排查后，分析该故障发生的原因是当任务A调用dma\_trans函数时，会发生任务suspend的情况，此时如果任务B也调用dma\_trans函数，则会发生上述故障。  
1. 请给出dma\_trans函数中会导致任务发生阻塞的代码行号。  
2. 按照王工的分析，对全局变量的不正确操作会导致该函数的返回值错误，请给出发生错误的代码行号。  
3. 王工对该程序进行了改进，将上述会导致返回值错误的代码放在某一行程序之后执行，即可解决该问题，请给出代码行号。  
注意：这里的行号是指程序2中注释所标的第1行到第5行，请在第1行到第5行之中选择。  



[21cf44ddc8a849e28faeeae8a5816881.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第1题/21cf44ddc8a849e28faeeae8a5816881.jpg
[ad7adc68c15d4d5e94c611ce67e298d4.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第1题/ad7adc68c15d4d5e94c611ce67e298d4.jpg
[cb5b07e231f84f2b8af27f02acd8210f.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第1题/cb5b07e231f84f2b8af27f02acd8210f.jpg
[96d35d50d67e45acb4135105e36366de.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/96d35d50d67e45acb4135105e36366de.jpg
[f1698d02b4284561a11e6a48e13a44a7.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/f1698d02b4284561a11e6a48e13a44a7.jpg
[c74beab006e3496a8a24cfe81883a487.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/c74beab006e3496a8a24cfe81883a487.jpg
[6f8a0d44c2aa40278a1cf83d0ebf83b0.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/6f8a0d44c2aa40278a1cf83d0ebf83b0.jpg
[9cd92c9eb4314105b32f4ce2bf3c2fc3.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/9cd92c9eb4314105b32f4ce2bf3c2fc3.jpg
[226a53fa8fcf4490980448d903491150.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/226a53fa8fcf4490980448d903491150.jpg
[d8bb81112dc24dee8d30fa61c4ecd833.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/d8bb81112dc24dee8d30fa61c4ecd833.jpg
[e7263581bd7344cbbcb7dd5449f6aebf.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/e7263581bd7344cbbcb7dd5449f6aebf.jpg
[b5cee873cf3046c7a19ca204aceaa0b7.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/b5cee873cf3046c7a19ca204aceaa0b7.jpg
[5ae0fe9e78384771869d15b1b61cf010.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第4题/5ae0fe9e78384771869d15b1b61cf010.jpg
[af16264532c14212bae4b18d0ba47e66.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第4题/af16264532c14212bae4b18d0ba47e66.jpg
[3baf7a2306f14ee5b140ef3265acba77.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/3baf7a2306f14ee5b140ef3265acba77.jpg
[cdc2a1354c344f30be263227800cbd92.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/cdc2a1354c344f30be263227800cbd92.jpg
[c139f8a3fe82456da6b9e48a02cd0ee3.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/c139f8a3fe82456da6b9e48a02cd0ee3.jpg
[a7f5b8c14270429592ceee55f370312d.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/a7f5b8c14270429592ceee55f370312d.jpg
