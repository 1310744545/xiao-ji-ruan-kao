---  
title: 2013年下半年  
# icon: gears  
order: 996  
category:  
- 历年真题  
tag:  
- 真题  
  
# navbar: false  
# sidebar: false  
  
# breadcrumb: false  
# pageInfo: false  
# contributors: false  
# editLink: false  
# lastUpdated: false  
# prev: false  
# next: false  
comment: false  
# footer: false  
  
# backtotop: false  
---  
## 第1题 ##

【问题1】  
（1）其他楼层有呼叫请求，或a；  
（2）到达请求楼层，或d；  
（3）乘客进入电梯或等待一段时间后，或c；  
（4）无呼叫请求，或b；  
（5）电梯所在楼层有呼叫请求，或e；  
（6）其他楼层有呼叫请求，或a。  
  
  
本题考查嵌入式系统设计，涉及嵌入式软件和微处理器基础知识的应用。  
电梯控制系统是典型的嵌入式系统，本题所述是一个实验室环境下的自动电梯模拟控制系统，许多地方都做了简化。电梯的运行由电梯控制模块完成，它负责修改电梯当前状态，根据电梯状态派遣电梯执行停止、运行、开门、关门等任务，设置电梯处于各种状态的运行时间，指挥电梯按照运行规则运行。  
根据电梯运行的流程，把电梯划分为停止、运行、开门、关门4种控制状态，电梯控制状态转移图如图1-6所示。停止状态是指电梯在没有任何请求的情况下的静止状态，而不是指电梯在运行过程中开门前的停顿状况，本题忽略停顿状况，把电梯从运行状态直接迁移为开门状态。  
![e6bbe9ad2ec1466c8ed8f3f76e7865e1.jpg][]  
从图1-6可以看到，电梯根据控制状态的迁移规则进行状态迁移，具体如下：  
(1)系统初始时，电梯处于停止状态；  
(2)电梯处于停止状态时，根据发出请求的楼层不同可以分别迁移到运行或者幵门两种不同的状态；  
(3)电梯处于运行状态时，如果没有到达请求楼层时发生自迁移，即保持运行状态不变；当到达请求楼层时，迁移到开门状态；  
(4)电梯处于开门状态时，等乘客进入电梯后或一段时间后必然会迁移到关门状态；  
电梯处于关门状态时，可以根据是否有请求迁移到运行状态或者迁移到停止状态。  
  
【问题2】  
（1）改变状态为开门  
（2）当前层上移一层  
（3）改变状态为开门  
（4）改变状态为向下  
（5）改变状态为向上。  
  
  
电梯各个状态的处理过程是，根据电梯状态，调用相应的控制状态的处理程序来控制电梯的运行。图1-3为电梯运行状态的处理流程图。当进入电梯运行状态后，首先判断当前电梯的运行方向。程序处理逻辑如下：  
1.当电梯向上运行时：  
(1)若当前层有内部请求，或外部有向上请求，或外部有向上和向下请求，则改变状态为开门，返回；否则，转（2）；  
(2)若当前层上方有内外请求，则当前层上移一层，返回；否则，转（3）；  
(3)若当前层有外部向下请求，则改变状态为开门状态，返回；否则，转（4）；  
(4)若当前层下方有内外请求，则改变状态为向下，返回。  
2.当电梯向下运行时：  
(1)若当前层有内部请求，或外部有向下请求，或外部有向上和向下请求，则改变状态为开门，返回；否则，转（2）；  
(2)若当前层下方有内外请求，则当前层下移一层，返回；否则，转（3）；  
(3)若当前层有外部向上请求，则改变状态为开门状态，返回；否则，转（4）；  
(4)若当前层上方有内外请求，则改变状态为向上，返回。  
  
【问题3】  
tA=TM\+TDC\+TS\+TA\+TR；  
tB=TDC\+TS\+TB\+TR；  
tC=TDC\+TS\+TC\+TR；  
注意，TM只执行1次。  
中断饱和时间是：T=tA\+tB\+tC=TM\+3TDC\+3TS\+TA\+TB\+TC\+3TR  
  
该问题是一个关于多级中断的问题，题中现假设TDC为硬件中断周期时间，TM为一个指令执行周期时间，TA、TB、TC分别为A、B、C的中断服务程序执行时间，TS、TR为保护现场和恢复现场所需的时间。  
当三个设备同时发出中断请求时，依次处理设备A、B、C的时间分别为：  
tA=TM\+TDC\+TS\+TA\+TR；  
tB=TDC\+TS\+TB\+TR；  
tC=TDC\+TS\+TC\+TR；  
注意，TM只执行1次。  
这种结构下中断饱和时间是：T=tA\+tA\+tC=TM\+3TDC\+3TS\+TA\+TB\+TC\+3TR  


## 第2题 ##

【问题1】  
本题考查嵌入式系统设计，涉及嵌入式软件和硬件基础知识的应用，尤其是嵌入式处理器外设控制及操作方面。  
本问题主要考查嵌入式系统软硬件协同设计中外设控制器TVP5146（I2C设备）的操作访问以及串口配置的基本软硬件应用知识。  
I2C（Inter-Integrated Circuit）总线是一种由PHILIPS公司开发的两线式串行总线，  
用于连接微控制器及其外围设备。I2C总线产生于在1980年代，最初为音频和视频设备开发，如今主要在服务器管理中使用，其中包括单个组件状态的通信。例如管理员可对各个组件进行查询，以管理系统的配置或掌握组件的功能状态，如电源和系统风扇。可随时监控内存、硬盘、网络、系统温度等多个参数，增加了系统的安全性，方便了管理。I2C总线最主要的优点是其简单性和有效性。由于接口直接在组件之上，因此I2C总线占用的空间非常小，减少了电路板的空间和芯片管脚的数量，降低了互联成本。总线的长度可高达25英尺，并且能够以10kbps的最大传输速率支持40个组件。I2C总线的另一个优点是，它支持多主控（multimastering），其中任何能够进行发送和接收的设备都可以成为主总线。一个主控能够控制信号的传输和时钟频率。当然，在任何时间点上只能有一个主控。  
I2C总线是由数据线SDA和时钟SCL构成的串行总线，可发送和接收数据。右CPU与被控IC之间、IC与IC之间进行双向传送，最高传送速率100kbps。各种被控刨电路均并联在这条总线上，但就像电话机一样只有拨通各自的号码才能工作，所以每个电路和模块都有唯一的地址，在信息的传输过程中，I2c总线上并接的每一模块电路既是主控器（或被控器），又是发送器（或接收器），这取决于它所要完成的功能。CPU发出的控制信号分为地址码和控制量两部分，地址码用来选址，即接通需要控制的电路，确定控制的种类；控制量决定该调整的类别（如对比度、亮度等）及需要调整的量。这样，各控制电路虽然挂在同一条总线上，却彼此独立，互不相关。I2C总线在传送数据过程中共有三种类型信号，它们分别是：开始信号、结束信号和应答信号。  
(1)开始信号：SCL为高电平时，SDA由高电平向低电平跳变，开始传送数据。  
(2)结束信号：SCL为低电平时，SDA由低电平向高电平跳变，结束传送数据。  
(3)应答信号：接收数据的IC在接收到8bit数据后，向发送数据的1C发出特定的低电平脉冲，表示已收到数据。CPU向受控单元发出一个信号后，等待受控单元发出一个应答信号，CPU接收到应答信号后，根据实际情况作出是否继续传递信号的判断。若未收到应答信号，由判断为受控单元出现故障。  
I2C规程运用主/从双向通信。器件发送数据到总线上，则定义为发送器，器件接收数据则定义为接收器。主器件和从器件都可以工作于接收和发送状态。总线必须由主器件（通常为微控制器）控制，主器件产生串行时钟（SCL）控制总线的传输方向，并产生起始和停止条件。SDA线上的数据状态仅在SCL为低电平的期间才能改变，SCL为高电平的期间，SDA状态的改变被用来表示起始和停止条件。在起始条件之后，必须是器件的控制字节，其中高四位为器件类型识别符（不同的芯片类型有不同的定义，EEPROM一般应为1010），接着三位为片选，最后一位为读写位，当为1时为读操作，为0时为写操作。写操作分为字节写和页面写两种操作，对于页面写，根据芯片的一次装载的字节不同有所不同。读操作有三种基本操作：当前地址读、随机读和顺序读。  
目前很多的处理器都集成了I2C接口，同时外围的控制设备也具有I2C从唼口。对于从设备的访问需要依赖于I2C地址，同时挂载在同一个总线上面的从设备的I2C地址必须互不相同。通常一个嵌入式系统中可能包含多个I2C从设备，需要对每个设备配置相应的地址。不同的从设备其对应的I2C地址会有多种不同配置方法，有些是出厂固定，有些是可以通过外部地址线来配置。  
该题目中的地址线即通过外部的A0地址来进行配置。按照其给出的电路连接方式，即可确定不同I2C设备的地址。  
TVP5146（1）读操作时的I2C地址：OxB9  
TVP5146（1）写操作时的I2C地址：OxB8  
TVP5146（2）读操作时的I2C地址：OxBB  
TVP5146（2）写操作时的I2C地址：OxBA  
  
【问题2】  
（1）0xFC或者0xFD  
（2）0x0A  
  
本题考查嵌入式系统中的硬件驱动配置，要求考生能够正确配置串口的波特率。  
在图2-2原理图设计中，主处理器的串口控制器的时钟为27M，在进行串口调试时，需要将串口配置为9600bps的波特率，需要对串口控制器的DLL（Divisor LatchesLow寄存器）和DLH（Divisor Latches High寄存器）进行配置，同时该题目给出了DLL和DLH的寄存器定义。由定义可以看出来，其DLH和DLL分别为16位寄存器，但是只有低8位是有效的。  
在该题目中给出了对应的串口控制器的时钟，其波特率配置寄存器DLL和DLH的配置实际就是依据时钟和需要配置的波特率数值进行计算。在实际的嵌入式系统的驱动程序设计中，对于驱动的设计也就是如此。其计算方法为：  
(1)9600bps的波特率则意味着每个比特位数传输所需要的时间为1/9600秒。  
(2)串口控制器的时钟为27M，说明其对应的时钟周期时间为1/（27\*1000\*1000）秒。  
(3)因此，传输每个比特位所需要的时钟周期数目为：（1/9600）/（1/（27\*1000\*1000））=2812.5。  
2815.2换算为十六进制为AFCH或者是AFDH，因此对应的DLH设置为高8位，0x0A，对应的DLL设置为低8位，为OxFC或者OxHX。  
  
【问题3】  
（1）\*pdata=I2C\_DATA  
（2）0x8003  
（3）I2C\_DATA=wdata  
（4）I2C\_STAT&0x80  
  
本问题考查I2C设备的读写操作过程，要求考生能够正确的根据给出的寄存器，以及对应的逻辑要求，补全相关代码。  
对I2C的操作过程实际上就是对外部设备的操作过程。这里的I2C读写函数只是给出了原子性的读写实现方法，至于操作哪类I2C设备，即读、写哪个I2C设备的哪些地址，这需要在外部逻辑实现中考虑。  
在I2C的读操作中，其逻辑过程为从I2C\_DATA寄存器中获取准备好的I2C数据，其核心在于等待I2C控制寄存器准备好数据，实现方法为查询对应的状态寄存器的某个比特位。同时，在读操作中，需要首先将I2C控制寄存器修改为读控制状态。  
在I2C的写操作中，逻辑过程为：先将I2C控制寄存器配置为写控制状态，将要写出的数据写到I2C\_DATA寄存器中，然后等待写完毕，等待的方法为查询寄存器状态，待状态表明写完毕后，此次写操作才算完成。  


## 第3题 ##

【问题1】  
![73366b1e30924974965e7ccc88450945.jpg][]  
  
本问题考查嵌入式软件测试覆盖率的基本概念。  
语句覆盖要求设计足够多的测试用例，运行被测程序，使得程序中每条语句至少被执行一次。定覆盖（分支覆盖）要求设计足够多的测试用例，运行被测程序，使得程序中的每个判断的“真”和“假”都至少被执行一次。条件覆盖要求设计足够多的测试用例，运行被测程序，使得判定中的每个条件获得各种可能的结果，即每个条件至少有一次为真值，有一次为假值。MC/DC覆盖要求每个条件的取值都有覆盖，每个判定值都有覆盖且每个条件都能独立影响判定结果，各覆盖率的含义如表2.5所示。  
![7c6a37302940478eab02e4b02c425d59.jpg][]  
![7137eaea2667405b8e434576956b1b43.jpg][]  
  
【问题2】  
本问题考查程序流程图的画法。注意开始、结束的符号。根据源代码，程序流程图如下。  
![7010383d4ed24945a04b5f43ef71bd3b.jpg][]  
  
【问题3】  
用例数量：3个；  
条件取值范围：  
（x&gt;0 and y&lt;=0）、（x&lt;=0 and y&gt;0）及（x&gt;0 and y&gt;0）  
  
本问题考查MC/DC覆盖率判定的综合运用。  
MC/DC与代码中的逻辑运算有关。本题代码中的逻辑运算为x&gt;0 && y&gt;0。根据MC/DC的定义，MC/DC覆盖要求每个条件的取值都有覆盖，每个判定值都有覆II且每个条件都能独立影响判定结果。对于a && b这样的逻辑运算，真值表如下。  
![93d4c23f6cae4186b57cc1b301d986d6.jpg][]  
对测试用例1和测试用例2，条件a不变，因为条件b的不同而导致结果的不同，因此条件b独立影响判定的结果。对测试用例2和测试用例3，因为条件b不变，条件a的不同而导致结果的不同，因此条件a独立影响判定的结果。综合以上，对逻辑运算a && b应产生三个测试用例，包括：（True，False）、（True，True）、（False，True）。  
所以本题用例数量：3个；条件取值范围：（x&gt;0 and y&lt;=0）、（x&lt;=0 and y&gt;0）及（x&gt;0 and y&gt;0）。  


## 第4题 ##

【问题1】  
CPU故障：2，4，7  
RAM故障：1，6，9  
  
本题考查嵌入式系统中为提高产品的安全性和可靠性，广泛采用的机内\_1测试（Built\_In\_Test，BIT）技术的相关知识。  
产品的可测试性与安全性和可靠性具有密切的关系，在制定故障诊断方案、分配测试性需求时，都以故障模式及影响分析（FMEA）的结果为基础。故障是指产品已处于一种不合格的状态，是对产品正确状态的任何一种可识别的偏离，而这种偏离对特定使用者要求来说是不合格的，已经不能完成其规定的功能。  
对于电路系统来说，它的元器件由于一些物理或化学上的因素，使得其元件违反技术规定，无法正常工作时，称元件存在着缺陷，如元件的损坏、虚焊、短路、开路、漏电、老化等。有缺陷的元件、信号线断路、信号线对电源线或地线短路、信号线之间短路或延迟时间太长以及外界电磁干扰等因素都会造成电路故障，并且违背设计原则也能引起电路故障。  
CPU的常见故障类型有：  
1.寄存器译码功能故障；  
2.数据存储模块故障；  
3.数据传输模块故障，是指在CPU内部各条传输信号线上发生的故障，在执行传输指令时，指令传输通道中某条信号线发生固定“0”或固定“1”故障；  
4.数据处理模块故障，包括：  
a)整型和浮点型的加法、减法、乘法、除法操作发生故障，造成算术运算结果出错；  
b)进位标志、辅助进位标志无法正常复位和置位；  
c)或、与、非等逻辑操作发生故障，造成逻辑运算结果出错；  
d)布尔操作发生故障，造成“位”操作结果出错。  
5.指令译码和指令序列的译码故障；  
6.Cache故障；  
7.MMU单元中逻辑物理地址转换错。  
RAM的常见故障类型有：  
1.固定故障（stuck-at faults），存储单元i的值固定为“0”或“1”；  
2.跳变故障（transition faults），存储单元i在没有受到另外一个单元的组合故障的影响或者是存储单元i本身的写操作，存储单元直接发生了跳变；  
3.组合故障（coupling faults），由于存储单元i中的写操作导致存储单元j牛的值的变化；  
4.地址译码故障（Addressdecoder faults），用来选择存储单元的译码器发生了故障；  
5.数据保持故障（dataretention faults），指的是存储单元在一定的时间内不能保持其逻辑值不变。  
  
【问题2】  
(1)周期BIT  
(2)维护BIT  
(3)上电BIT  
  
BIT根据运行的时机和目的不同，分为多种类型，如上电BIT、周期BIT、维护BIT。上电BIT在系统加电引导过程中完成，确保了待测设备单元在使用前都被测试。周期BIT负责检测和隔离系统运行中的故障和异常，并记录了故障的发生与持续时间。它要求在任务期间执行但不影响和破坏任务的正常运行。  
维护BIT在任务停止的时候被执行，具有最完备的测试用例集合，可用于某些疑难故障的检测和隔离。  
  
【问题3】  
(1)刷新指令Cache（高速缓存）  
(2)将res与测试用例表中的预期结果进行比较  
(3)测试结果ret=1  
  
根据cmpw指令功能测试的算法流程示意图，结合题干中的描述信息，可以得出该测试算法的流程如下：  
a)初始化测试结果为正确；  
b)从测试用例表中获取一个测试用例数据；  
c)根据测试用例动态生成测试过程汇编代码；  
d)由于该系统选用的处理器集成了多级Cache（高速缓存），并且指令缓存和数据缓存是分开的，执行指令功能测试前需要刷新指令Cache，以保证与内存中的测试代码一致；  
e)执行测试过程，比较测试用例中的两个操作数，并返回比较结果；  
f)将测试用例执行的结果与测试用例表中的预期结果进行比较，判断是否相等；  
g)如果相等，继续从测试用例表中获取下一个测试用例数据，进行执行，直至全部执行完所有测试用例；  
h)如果不相等，则置测试结果为故障；  
i)返回测试结果。  


## 第5题 ##

【问题1】  
(1)&lt;函数类型&gt;的含义是：函数返回值的类型，无返回值时应写为void；  
(2)&lt;参数列表&gt;的含义是：函数的接口参数，可以为空，即表示没有参数，但函数名后面的()不能省略。  
(3)C语言函数之间的参数传递是传值，是通过栈来传递的。  
  
本题考查C语言应用知识。  
C语言函数的一般格式为：  
![1d4b9b7c0ef74ffc8a3a13f7fbead567.jpg][]  
其中&lt;函数类型&gt;为函数返回值的类型，无返回值时应写void；&lt;参数列表&gt;为函数的接口参数，可以为空，即表示没有参数，但函数名后面的()不能省略。  
C语言函数之间的参数传递是传值，是通过找来传递的。调用时所有参数在栈中新开辟相应类型的单元并将实参值填入，函数中对参数的任何操作都是对栈中单元的操作，调用结束，栈中开辟的相应单元都会释放，并不影响实参变量的值。  
  
【问题2】  
(1)sizeof（struct student1）结果为：31  
(2)sizeof（union student2）结果为：16  
(3)执行语句后的结果为：“fhangwei”  
  
student1是一个结构体，sizeof（struct studentl）结果为所有元素字节数之和，因此sizeof（struct student1）结果为：10+4+1+16=31字节。  
student2是联合体（或共用体），sizeof（union student2）结果为其中最长一个元素的字节数。因此sizeof（union student2）结果为：16字节。  
变量a2在程序段2中定义，执行以下语句：  
![5f09cc39f4c74507a4741d9c7b4852ba.jpg][]  
  
【问题3】  
(1)Disk2 A→B  
(2)Disk3 A→C  
(3)Disk1 B→A  
(4)Disk1 A→C  
  
汉诺塔问题是指有n个盘子在A处，盘子从大到小，最上面的盘子最小，现在要把这n个盘子从A出搬到C处，可以在B处暂存，但任何时候不能出现大的盘子压在小的盘子上面的情况。算法如下：  
(1)若n=1，则可以将盘子直接从A处搬到C处；  
(2)假设n-1时，指导如何解；  
(3)则n时，根据（2）的假设，可以先把前n-1个盘子从A处通过C处搬到B处，就可以把第n个盘子直接从A处搬到C处，再把前n-1个盘子从B处通过A处搬到C处，则完成了全部盘子搬动。  
因此，运行结果为：  
Step1：Disk1 A→C  
Step2：Disk2 A→B  
Step3：Disk1 C→B  
Step4：Disk3 A→C  
Step5：Disk1 B→A   
Step6：Disk2 B→C  
Step7：Disk1 A→C  



[e6bbe9ad2ec1466c8ed8f3f76e7865e1.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第1题/e6bbe9ad2ec1466c8ed8f3f76e7865e1.jpg
[73366b1e30924974965e7ccc88450945.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/73366b1e30924974965e7ccc88450945.jpg
[7c6a37302940478eab02e4b02c425d59.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/7c6a37302940478eab02e4b02c425d59.jpg
[7137eaea2667405b8e434576956b1b43.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/7137eaea2667405b8e434576956b1b43.jpg
[7010383d4ed24945a04b5f43ef71bd3b.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/7010383d4ed24945a04b5f43ef71bd3b.jpg
[93d4c23f6cae4186b57cc1b301d986d6.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/93d4c23f6cae4186b57cc1b301d986d6.jpg
[1d4b9b7c0ef74ffc8a3a13f7fbead567.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/1d4b9b7c0ef74ffc8a3a13f7fbead567.jpg
[5f09cc39f4c74507a4741d9c7b4852ba.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/5f09cc39f4c74507a4741d9c7b4852ba.jpg
