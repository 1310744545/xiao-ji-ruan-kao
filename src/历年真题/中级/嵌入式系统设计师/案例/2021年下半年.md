---  
title: 2021年下半年  
# icon: gears  
order: 988  
category:  
- 历年真题  
tag:  
- 真题  
  
# navbar: false  
# sidebar: false  
  
# breadcrumb: false  
# pageInfo: false  
# contributors: false  
# editLink: false  
# lastUpdated: false  
# prev: false  
# next: false  
comment: false  
# footer: false  
  
# backtotop: false  
---  
## 第1题 ##

试题一（15分）  
阅读下列说明和图，回答问题1至问题3，将解答填入答题纸的对应栏内。  
【说明】  
棱镜计划、中兴事件、华为事件、中美贸易战……我国网络安全、信息安全等领域正在面临严峻挑战，其根源在于核心技术和设备受制于人。在这个机遇与挑战并存的时代背景下，“国产化”“自主可控”上升为国家战略。在国产化过程中，CPU、操作系统、数据库等基础软硬件，是自主可控的正面战场，是国家信息安全和国防安全的基础和保证。  
FT-2000/4是一款兼容ARM v8体系结构，支持64位和32位指令的高性能国产通用处理器，主频2.6~3.0GHz，工作温度范围是-40℃~85℃，内置密码加速引擎，集成系统级安全机制，能够满足复杂应用场景下的性能需求和安全可信需求。FT-2000/4处理器功能框图如图1-1所示。  
![f777b83669a34b3294983b274d38741e.jpg][]  
  
【问题1】（4分）  
下面关于FT-2000/4特性的描述中，有些说法不正确，请选出不属于FT-2000/4的特性的叙述，将对应的编号依次填入答题纸的相应栏内。  
A.支持单精度浮点运算指令，不支持双精度浮点运算指令  
B.支持CISC处理指令  
C.支持基于域隔离的安全机制  
D.支持可信启动  
E.集成4个FTC663核  
F.集成1个Ethernet接口,支持10/100Mbps自适应  
G.集成1个SD卡控制器,兼容SD2.0规范  
H.集成1个HDA(HD-Audio)  
I.集成多种密码加速引擎  
J.集成温度传感器  
K.集成512KB On Chip Memory  
  
【问题2】（5分）  
(1)FT-2000/4采用层次结构的存储系统，请问Cache和虚拟存储的作用有何不同?  
(2)假设系统的Cache命中率H=0.98,主存周期是Cache的4倍,主存存取周期为200ns,求Cache-主存的效率和平均访问时间(需给出计算公式和计算结果)。  
  
【问题3】（6分）  
在IO处理时，采用中断方式处理输入输出。中断处理过程包括关中断、保存断点、识别中断源等一系列步骤，如图1-2所示，请填写其中的空(1)~(4)，将答案写在答题纸的对应栏中。  
![9e545887781341a59b404656953de1ac.jpg][]  


## 第2题 ##

试题二（15分）  
阅读下列说明和图，回答问题1至问题4，将解答填入答题纸的对应栏内。  
【说明】  
在某嵌入式系统中，视频处理单元负责对接收到的外部视频进行处理和控制。输入包括2路HDMI视频，在视频处理单元中通过叠加、选择、变换等方法输出1路HDMI视频。系统整体硬件设计框图如图2-1所示，包括一个 FPGA和一个 DSP处理器， FPGA采用 Xilinx 公司的 Virtex-5,DSP选用国产 BWDSP100处理器,HDMI视频采集芯片采用ADI公司的ADV7612,HDMI显示芯片选用ADI公司的ADV7513。系统处理器内核1.2V电源采用DC-DC 稳压器LTM4616EV,其他电源(2.5V,1.8V,3.3V等)采用德州仪器公司的TPS754xx。外部内存选用镁光公司的MT47H32M16HR-25EIT,NandFlash选用S29GL128N10TA102。  
  
![9b45745c8cab43049ae0dc581cd745dd.jpg][]  
  
【问题1】（4分）  
(1)在电源设计中，依据LTM4616EV手册描述，该芯片在5V供电情况下，输出电压可以在0.6V~5V之间任意调节，该系统设计中FPGA和DSP的内核电压均由该芯片提供。在输入电压5V的情况下输出电压的计算公式为  
![677d9153b8614702b4ab012d03f610a0.jpg][]  
其中， VREF=0.596,RFB为芯片外部的调节电阻,若期望Vout输出1.2V,外部调节电阻RFB应选用如下哪个阻值?  
A.5.1k Ω  
B.10k Ω  
C.6.65k Ω  
D.4.87k Ω  
(2)根据HDMI视频采集芯片手册描述，ADV7612可支持四种频率晶振输入，分别是 27.000MHz、28.63636MHz、24.576MHz、24.000MHz。在具体使用时需要根据设计来配置ADV7612的0x04号寄存器。ADV7612的0x04号寄存器各个Bit位的含义如表2-1所示。  
  
![9ae4588fb3014a9daec1b31048f83956.jpg][]  
OP_CH_SEL[2-0]三位用来配置HDMI视频输入线P35-PO(由高到低)各个位含义,对应如下：  
000:P35-P24为Y/G,P23-P12为U/CrCb/B,P11-P0为V/R  
001:P35-P24为Y/G,P23-P12为V/R,P11-P0为U/CrCb/B  
010:P35-P24为U/CrCb/B,P23-P12为Y/G,P11-P0为V/R  
011:P35-P24为V/R,P23-P12为Y/G,P11-P0为U/CrCb/B  
100:P35-P24为U/CrCb/B,P23-P12为V/R,P11-P0为Y/G  
101:P35-P24为V/R,P23-P12为U/CrCb/B,P11-P0为Y/G  
110:预留  
111:预留  
XTAL_FREQ_SEL[1-0]两位用来设置晶振频率,对应如下:  
00:27.000MHz  
01:28.63636MHz  
10:24.567MHz  
11:24.000MHz  
若该系统的HDMI视频输入线 P35-P0配置为 U/CrCb/B、 Y/G、 V/R,晶振频率选择为28.63636MHz,需要将ADV7612的0x04号寄存器配置为多少?(0x04号寄存器的Bit 0、Bit 3和Bit4设置为0)  
  
【问题2】（2分）  
在该系统中,FPGA支持三种启动方式,分别是 JTAG、 QSPI Flash和 Micro SD,需要利用FPGA的五个管脚MIO[6：2]来配置，对应的配置模式如表2-2所示。  
![faaa1b998225416c92719de2ebda3a62.jpg][]  
李工设计的启动方式电路图如图2-2所示。  
![dcb5ad763dfa490f8bc0c94e9abf590a.jpg][]  
请问：若选用QSPI Flash启动，J1跳线帽应该连接哪两个管脚?J2跳线帽应该连接哪两个管脚?  
  
【问题3】（3分）  
李工在实际设计中，需要将FPGA采集到的2路HDMI视频通过专用Link链路传接到BWDSP处理器。2路HDMI输入视频均为1080p,即视频采集分辨率为1920×1080,60帧(每路30帧)，每个像素点数据大小为24位，整个Link链路最大可传输带宽为5Gbps。  
(1)请问实时传输2路1080p视频数据的带宽要求是多大?  
(2)目前设计中的Link链路带宽是否能满足2路1080p视频的实时传输要求? (aGbps”指速度时,1Gbps=1000Mbps,1Mbps=1000Kbps,1Kbps=1000bps)  
  
【问题4】（6分）  
李工设计的ADV7513显示电路示意图如图2-3所示。  
![358b649679e9466e913b8a2361c67a67.jpg][]  
ADV7513的初始化过程描述如下：  
FPGA对ADV7513的时钟等先进行初始化,当ADV7513未连接HDMI接收设备时,ADV7513切换为掉电状态，此时ADV7513只有IIC模块和中断检测模块处于工作状态，FPGA 通过读取地址为0x42的寄存器来获取ADV7513的HPD检测状态(HDMI外接设备)。当连接HDMI外接设备时,HPD引脚被拉高,触发ADV7513的HPD中断,ADV7513会被唤醒。  
ADV7513被唤醒后,FPGA需要向ADV7513的断电寄存器0x41的上电标志位写入0,以此启动ADV7513的全部功能。  
按照此初始化过程，李工设计了如图2-4所示的ADV7513初始化流程。请根据处理逻辑，从以下选项A~I中选择正确答案，填写空(1)~(4)。  
![0e69f034a29c46499118bb1d46a6d598.jpg][]  
初始化过程的选项：  
A.检查ADV7513的HPD位是否有外接设备  
B.ADV7513的IIC模块操作  
C.ADV7513时钟初始化  
D.读取ADV7513寄存器  
E.读取ADV7513的0x42寄存器  
F.拉高HPD  
G.唤醒ADV7513  
H.给ADV7513的0x41寄存器上电标志位写1  
I.给ADV7513的0x41寄存器上电标志位写0  


## 第3题 ##

试题三（15分）  
阅读下列说明，回答问题1至问题3，将解答填入答题纸的对应栏内。  
【说明】  
某国产通信芯片中，其嵌入式软件配合硬件完成通信协议处理，包括设备管理、通信管理、时间管理、网络管理、配置加载和中断处理等功能。其中流消息发送函数用于流消息发送，主要完成分区包头封装，并向指定目的设备的指定目的分区发送流消息，其处理流程图如图3-1所示。  
![4960012b8cf641b1aa80e127849b1eb2.jpg][]  
  
【问题1】（6分,每空2分）  
软件的结构覆盖率指标是度量软件测试充分性和有效性的常用手段。在嵌入式软件白盒测试过程中，通常以语句覆盖率、分支覆盖率和MC/DC覆盖率作为度量指标。在实现题目说明的流程图时，设计人员采用了下列算法：  
if((设备句柄合法==FALSE)||(设备状态正常==FALSE))  
(  
Return(Fail);  
)  
else  
{  
if((发送流数据指针==NULL)&&(发送缓冲区标识==正确))  
{  
发送流数据；  
return(OK);  
}  
else  
{  
释放流数据发送逻辑ID；  
return(Fail);  
}  
}  
请指出测试上述算法达到100%语句覆盖、100%分支覆盖和100%MC/DC覆盖所需的最少测试用例数目，填入表3-1的空(1)~(3)处。  
![bd2e6993dcf847dbbb8b4af6e7bc1906.jpg][]  
  
【问题2】（6分,每空1分）  
为了测试软件功能，测试人员设计了表3-2所示的测试用例，请填写该表中的空白(1)~(6)。请将答案填写在答题纸的对应栏中。  
![be2e4cf13f5341178e2827ddb1513264.jpg][]  
  
【问题3】（3分,每空1.5分）  
嵌入式软件中通常使用圈复杂度来衡量程序的可维护性(一般要求圈复杂度不大于10)，流数据发送函数圈复杂度为 (1) 。  
白盒测试方法和黑盒测试方法是目前嵌入式软件测试常用的方法。依据本题说明，指明【问题2】中设计的测试用例使用了上述两种测试方法中的 (2)方法。  


## 第4题 ##

试题四（15分）  
阅读下列说明和图，回答问题1至问题4，将解答填入答题纸的对应栏内。  
【说明】  
飞腾(简称FT)处理器是国产自主可控的处理器，其中FT-2000/4是一款高性能通用4核处理器。每2个核构成1个处理器核簇，并共享L2 Cache。处理器核通过片内高速互联网络及相关控制器与存储系统、I/O系统相连。处理器核采用乱序多发射超标量体系结构，支持动态分支预测和全局历史缓存区。  
某数据处理计算机模块基于FT-2000/4处理器设计，模块逻辑图如图4-1所示。  
![38cee5aba644495ab3cc9263887a4ba6.jpg][]  
该数据处理计算机模块存储系统包含Cache子系统和DDR，I/O系统包含PCIE、高速IO子系统、千兆位以太网GMAC和低速IO子系统。  
  
【问题1】（2分）  
多核处理器存在Cache一致性问题，请回答以下问题：  
(1)导致Cache一致性问题的主要原因是什么?  
(2)该问题主要依靠硬件还是软件来解决?  
  
【问题2】（3分）  
FT-2000/4处理器集成的PCIE接口是串行总线控制器，请问以下总线哪些是串行总线?  
A. UART  
B. ATA  
C. SPI  
D. I2C  
E. PCI  
F. CAN  
G. SATA  
H. USB  
  
【问题3】（4分,每空2分）  
FT-2000/4的物理地址宽度为44bit,地址空间共计16TB。FT-2000/4总体地址空间划分见表4-1。  
![2e7fc0fcf427424d96d9e6acd5a796bf.jpg][]  
该处理器的QSPI接口用于连接Flash存储器，请问该空间最多可以配置的Flash容量是 (1)MB。  
该处理器定义的Memory空间配置支持最多2GB的容量，请问Memory空间的最大地址是0x000(2)。  
  
【问题4】（6分,每空2分）  
FT-2000/4PCIE接口支持PCIE3.0规范,FT-2000/4的PCIE是树形结构,所有控制器都是0号总线下的设备，如图4-2所示。当访问的总线号为0时，表示是对控制器的访问。当总线号对应的控制器确实存在时，那么就转发为对控制器内配置寄存器的访问；不存在时，忽略写请求，读请求返回全F。PCIE树形结构视图如图4-2所示。  
  
![961d2314e11e49f39708819671a4db1b.jpg][] PCIE的地址空间划分见表4-2所示。  
  
![bb03519f6a43474689738f235485df66.jpg][] 当地址位于PCIE配置空间时，将按照表4-3格式进行解析。  
  
![ab0020e493ee451ca0b33f80cea406bb.jpg][] (1)PCEI空间中配置空间的作用是什么?  
(2)按照PCIE配置空间寻址格式定义，PCEI总线理论上每条总线最多可以有多少个设备?  
(3)若要访问图4-1中的PEU1 C0的功能号为0的设备，如果配置空间内偏移0x4，则处理器发起的配置地址数据用十六进制表示是多少?  


## 第5题 ##

试题五（15分）  
阅读以下说明和C语言代码，回答问题1至问题3，将答案填入答题纸的对应栏内。  
【说明】  
计算机系统中以字节为单位存储信息，每个地址单元都对应着一个字节。但是在C程序中除了8bit的char型数据外,还有16bit的short型、32bit的int型及long型(要看具体的编译器)。另外，对于16位或者32位的处理器，由于寄存器宽度为多个字节，那么必然存在如何安排多个字节的问题,因此就导致了大端(Big-endian)存储模式和小端(Little-endian)存储模式。问题1是关于大端模式和小端模式方面的问题。  
在C语言中，可以用指针变量指向整型变量、字符串、数组、结构变量，也可以指向一个函数，对指针的用法非常灵活，也很容易出错。其中，函数指针变量为较高级的用法。问题2是将函数指针变量应用于设备驱动程序中的问题。  
飞腾FT2000-4国产处理器的QSPI(Quad Serial Peripheral Interface),是为外接SPI设备所提供的专用接口，问题3是用C语言编写的关于QSPI设备驱动的部分操作的问题。  
  
【问题1】（4分）  
对于一个32bit的十六进制整数0x12345678,在Little-endian模式以及Big-endian模式内存中的存储方式(假设从地址0x8000开始存放)如表5-1所示。请完成表5-1的内容，填写由0x8000到0x8003字段中大端模式和小端模式下的值。  
![89ffe4389fd844f484972d54e8f381ea.jpg][]  
  
【问题2】（6分）  
请用C语言的函数指针变量，对 manage_device 函数进行改造，填写下面C语言代码中的(1)~(4)处的代码，将解答填入答题纸的对应栏内。  
```c++
#include"stdio.h"  
#include"stdlib.h"  
extern int sys_status;  
extern int Dev_drv1( int arg1, int arg2);  
extern int Dev_drv2( int arg1, int arg2);  
extern int Dev_drv3( int arg1, int arg2);  
extern int Dev_drv4( int arg1, int arg2);  
#define NOERROR 0  
typedef struct {  
int fd;  
(1) ;/*函数指针变量说明,变量名用process*/  
}TYP_DEV_TAB;  
TYP_DEV_TAB dev_tab[50]={{101, Dev_drv1},{99, Dev_drv2},  
{80, Dev_drv3},{120, Dev_drv4},};  
/*程序*/  
void manage_device( int devid, int arg1, int arg2)  
{  
int place;  
int ret;  
(2) ;/*函数指针变量说明,局部变量,变量名用ProcAction*/  
for(place=0;place&lt;50;place++) {  
if( dev_tab[ place]._fd== devid){  
(3) ;/*语句1,变量名用ProcAction,得到具体函数的入口地址*/  
break;  
}  
}  
if(place&gt;=50)  
printf("NO DEVICE fd =%dn",devid);  
(4) ;/*语句2*/  
if(ret!=NOERROR)  
printf("DEVICE %d error!",devid);  
}  
```
  
【问题3】（5分）  
在飞腾FT2000-4国产处理器上,李工利用QSPI(Quad Serial Peripheral Interface)接口外接SPI Flash芯片,设计了针对该SPI Flash的擦除操作函数。  
SPI Flash的擦除操作函数实现流程分为2步。  
第一步:先对QSPI中的CMD_PORT寄存器的[31:24]位写入使能命令,并置位bit22;再对QSPI中的LD_PORT寄存器写入0x01。  
第二步:先对QSPI中的CMD_PORT寄存器的[31:24]位写入 Flash 擦除命令,并置位bit22和bit15;再对ADDR_PORT寄存器中写入要擦除的地址;最后对LD_PORT寄存器写入0x01。  
飞腾FT2000-4国产处理器的QSPI中的CMD_PORT、ADDR_PORT、LD_PORT三个寄存器各个bit位对应含义如下表5-2、表5-3和表5-4所示。  
![c41c0152b7874006906bc24ae165c0ef.jpg][]  
![77c81af8511b4a3cba9761e6eb0a5059.jpg][]  
李工设计的QSPI Flash擦除函数代码如下：  
# define QSPI_ADDR_BASE 0x28014000  
# define QSPI_CMD_PORT_ADDR_QSPI_ADDR_BASE+0x10  
# define QSPI_ADDR_PORT_ADDR_QSPI_ADDR_BASE+0x14  
# define QSPI_LD_PORT_ADDR_QSPI_ADDR_BASE+0x1c  
# define QSPI_FLASH_ENABLE_CMD 0x06  
# define QSPI_FLASH_ERASE_CMD 0xd8  
void QSPI FlashErase( void)  
{  
unsigned int*p_cmd_port=( unsigned int*)(QSPI_CMD_PORT_ADDR);  
unsigned int*p_addr_port=( unsigned int*)(QSPI_ADDR_PORT_ADDR);unsigned int*p_Id  
port=( unsigned int*)(QSPI_ID_PORT_ADDR);  
(1) ;/ *  
第一步：利用移位操作和或运算，  
对p_cmd_port 指针,运用QSPI_FLASH_ENABLE_CMD,  
对QSPI中的CMD PORT寄存器的[31:24]位写入使能命令,并置位bit22*/  
(2) ;/*  
第二步:利用p_Id_port 指针,对LDFORT寄存器写入0%01  
*/  
(3) ;/*  
利用移位操作和或运算，  
对p_cmd_port 指针,运用QSPI_FLASH_ERASE_CMD,  
对QSPI中的CMD_PORT寄存器的[31:24]位写入擦除命令,  
并置位bit22和bit15  
*/  
(4) ;/*利用p_addr_port 指针,对ADDR_PORT寄存器写入0%10000*/  
(5) ;/*利用p_Id_port 指针,对LD_PORT寄存器写入0%01*/  
}  



[f777b83669a34b3294983b274d38741e.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第1题/f777b83669a34b3294983b274d38741e.jpg
[9e545887781341a59b404656953de1ac.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第1题/9e545887781341a59b404656953de1ac.jpg
[9b45745c8cab43049ae0dc581cd745dd.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/9b45745c8cab43049ae0dc581cd745dd.jpg
[677d9153b8614702b4ab012d03f610a0.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/677d9153b8614702b4ab012d03f610a0.jpg
[9ae4588fb3014a9daec1b31048f83956.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/9ae4588fb3014a9daec1b31048f83956.jpg
[faaa1b998225416c92719de2ebda3a62.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/faaa1b998225416c92719de2ebda3a62.jpg
[dcb5ad763dfa490f8bc0c94e9abf590a.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/dcb5ad763dfa490f8bc0c94e9abf590a.jpg
[358b649679e9466e913b8a2361c67a67.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/358b649679e9466e913b8a2361c67a67.jpg
[0e69f034a29c46499118bb1d46a6d598.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/0e69f034a29c46499118bb1d46a6d598.jpg
[4960012b8cf641b1aa80e127849b1eb2.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/4960012b8cf641b1aa80e127849b1eb2.jpg
[bd2e6993dcf847dbbb8b4af6e7bc1906.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/bd2e6993dcf847dbbb8b4af6e7bc1906.jpg
[be2e4cf13f5341178e2827ddb1513264.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/be2e4cf13f5341178e2827ddb1513264.jpg
[38cee5aba644495ab3cc9263887a4ba6.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第4题/38cee5aba644495ab3cc9263887a4ba6.jpg
[2e7fc0fcf427424d96d9e6acd5a796bf.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第4题/2e7fc0fcf427424d96d9e6acd5a796bf.jpg
[961d2314e11e49f39708819671a4db1b.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第4题/961d2314e11e49f39708819671a4db1b.jpg
[bb03519f6a43474689738f235485df66.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第4题/bb03519f6a43474689738f235485df66.jpg
[ab0020e493ee451ca0b33f80cea406bb.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第4题/ab0020e493ee451ca0b33f80cea406bb.jpg
[89ffe4389fd844f484972d54e8f381ea.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/89ffe4389fd844f484972d54e8f381ea.jpg
[c41c0152b7874006906bc24ae165c0ef.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/c41c0152b7874006906bc24ae165c0ef.jpg
[77c81af8511b4a3cba9761e6eb0a5059.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/77c81af8511b4a3cba9761e6eb0a5059.jpg
