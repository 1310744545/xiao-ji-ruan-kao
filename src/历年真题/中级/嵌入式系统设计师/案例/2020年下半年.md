---  
title: 2020年下半年  
# icon: gears  
order: 989  
category:  
- 历年真题  
tag:  
- 真题  
  
# navbar: false  
# sidebar: false  
  
# breadcrumb: false  
# pageInfo: false  
# contributors: false  
# editLink: false  
# lastUpdated: false  
# prev: false  
# next: false  
comment: false  
# footer: false  
  
# backtotop: false  
---  
## 第1题 ##

试题一（15分）  
阅读下列说明和图，回答问题1至问题3，将解答填入答题纸的对应栏内。  
【说明】  
2019年12月以来，新型冠状病毒首先在国内蔓延，现在又肆虐全球，我国政府全力以赴，抗击疫情，全国人民积极响应，短短几个月来，疫情得到很好的控制。在抗疫战斗中， 相关医疗设备起到了至关重要的作用。某公司生产的红外热成像系统（测温仪）已被广泛使用，可以检测发热症状，排查受感人群。  
该红外热成像系统如图1-1所示，主要由红外光学系统、红外探测器、驱动采集电路、图像处理电路、显示与存储电路组成。  
![da923008e7c64242afd35c1a58c5a206.jpg][]  
在该系统中，光学系统主要指专门红外镜头，与普通光学镜头不同，光学材料针对相应波段的红外光线，实现滤光和对焦。红外探测器是完成红外热辐射到电信号的转换。驱动采集电路完成图像信号的输出与采集。红外图像处理电路在系统中不仅要对红外图像进行非均校正、盲元补偿处理，还要对图像的温度漂移、图像增强以及温度测量信息进行处理。最后，红外图像需要设置不同的输出方式以匹配不同的显示器，或者采用文件系统将红外图像及信息进行存储。  
红外热成像系统具体的系统架构如图1-2所示，主处理器采用ARM，红外探测器采用非制长波红外探测器，系统电路包括偏置电压电路、温控电路、A/D转换电路、 基于FPGA的实时红外图像信号采集电路、基于ARM的系统控制电路以及LCD显示电路。实现了红外探测器的驱动、红外图像信号的采集和处理、红外图像的输出显示以及一些外设辅助功能。  
![d8436fffb55e4e329144ed374a473b7a.jpg][]  
  
【问题1】（4分）  
系统采用4片IS61LV51216 SRAM来做数据缓存，请问：  
(1)下列关于SRAM、DRAM和ROM 的论述中，哪些是正确的？  
A. SRAM的中文名称为“静态随机存储器”  
B.存放在SRAM中的信息不会因去掉供电电源而丢失  
C. SRAM的静态存储单元是在静态触发器的基础上附加门控管而构成的  
D. SRAM必须定时不断刷新，以保证所存储的信总不会丢失  
E. SRAM将每个位存储在一个双稳态存储器单元  
F. SRAM的功耗较大，集成度不能做得很高  
G. ROM所存数据稳定，断电后所存数据也不会改变  
H. SRAM需要刷新电路才保存它内部存储的数椐  
I. SRAM的优点是集成度较低，功耗较DRAM小  
J. DRAM每隔-段时间要刷新充电一次，否则内部的数据即会消失  
(2)SRAM的容M为512KX 16位，那么SRAM的地址线和数据线数目分别为多少?  
  
【问题2】（7分）  
在红外热像仪系统中，FPGA完成红外图像的采集与预处理，包括前端探测器驱动、数据采集与整形、数据预处理、SRAM控制器、ARM通信等，在整个数据采集过程中，FPGA将接收到的红外图像数据采用“乒乓”结构交持不断写入两块SRAM中，FPGA在进行数据写入时，ARM不能读取相应区的数据，FPGA每写完一帧数据，就通过寄存器通知ARM取数据，新的一帧数据写入另一块SRAM。这样就避免了红外探测器图像采集时钟与ARM的图像处理帧频时钟的不匹配问题。  
(1)下列关于FPGA的描述中，哪些是正确的?  
A. FPGA由逻辑单元、RAM、乘法器等硬件资源组成  
B. FPGA只能实现有限次的重新编程   
C. FPGA可通过使用原理图或者Venlog HDL来设计  
D. FPGA的所有功能均依靠硬件实现  
E. FPGA可以实现定点和浮点运算  
F. FPGA的工作频率由FPGA芯片及设计决定  
(2)完成图像乒乓操作流程图1-3中的空①-⑤。  
![cbbf81d216c84b1681d4f4850c56a1f7.jpg][]  
  
【问题3】（4分）  
假设该红外热像仪CPU的中断系统有4个中断源A、B、C、D,其硬件排队优先次序为A&gt;B&gt;C&gt;D,每个中断源对应一个屏蔽码，表1-1为中断服务程序与屏蔽码的关系，其中 “0”为允许，“1”为屏蔽，CPU状态时屏蔽码为0000。  
![0d2e4afbdd5c4b6f99fa6756c21684dc.jpg][]  
(1) 设A、B、C、D同时请求中断，试画出CPU执行程序的轨迹。  
(2) 请给出中断服务程序完成的顺序。  


## 第2题 ##

试题二（15分）  
阅读下列说明和图，回答问题1至问题4，将解答填入答题纸的对应栏内。  
【说明】  
电子体温计可以快速、准确地进行体温测量，第一时间排查发热病人。李工通过AD模块设计体温采集电路，如图2-1所示，AD采集芯片使用ADC0809，单片机采用AT89S52。  
![f39ae17ed0a446c7b90db2a816423412.jpg][]  
对应的电路连接描述如下：  
(1) ADC0809的DO-D7端口连接到AT89S52的P0口；  
(2) ADC0809的A、B、C为AD输入IN0~IN7选择端，A为最高位，C为最低位;  
(3) ADC0809的AD转换结束信号(EOC)连接到AT89S52的P3.2；  
(4) ADC0809的AD转换启动信号(ST)受AT89S52的P1.4管脚控制；  
(5) ADC0809的AD转换数据输出使能(OE)受AT89S52的P3.1管脚控制;  
(6) ADC0809的时钟通过AT89S52的ALE输出控制，经过2个D触发器来生成；  
(7) ADC0809的输入模拟电压范围是0-5V;  
(8) AT89S52的P3.0管脚用来控制LED。  
对于ADC0809而言，启动一次AD转换时，需要给ST—个短时的高电平。在AD转换过程中，EOC为低电平，当AD转换完毕后，EOC会变为高电平。在AD转换结束后，需要给OE一个短时高电平，在该期间内从DO-IT7读取AD转换后的数据。  
  
【问题1】（3分）  
AT89S52和ADC0809之间的连接线中，对ADC0809而言，下列信号中哪些为输入信号?  
A. ST  
B. EOC  
C. OE  
D. A  
E. B  
F. C  
  
【问题2】（2分）  
当外围的温度传感器模拟电压为1.2V时，ADC0809的输出值是多少？  
  
【问题3】（2分）  
若单片机AT89S52的ALE输出为2M的时钟频率，那么ADC0809的时钟是多少？  
  
【问题4】（8分）  
李工按照该电路的工作原理设计了如下程序，该程序以査询方式实现AD转换，读取AD转换后的数据。  
请根据逻辑，在下面A到0中选择正确答案，完成（1）-（8）填空。  
![d3ed7861418f4f7892e0664ede7cd16f.jpg][]  
A. LED=0 B. LED=1 C. OE =1 E.ST=O F.ST=1 G. P0=0xF8 H. P0=0xFC I.while (EOC==0) J. while (EOC===1) K.ADdata=P0 L. P0=ADdata M. if(ADdata&gt;128) N. if (ADdata &lt; 128) O. LED=1  


## 第3题 ##

试题三（15分）  
阅读下列说明和图，回答问题1至问题3，将解答填入答题纸的对应栏内。  
【说明】  
人体的红外辐射特性与它的表面温度有着十分密切的关系，门式测温仪通过对人体自身辐射红外能量的测量，便能准确地测定人体表面温度。由于门式测温仪最大的优点是非接触、快速测量，一般小于1秒钟，所以被广泛应用于机场、车站、码头、学校等人流量大的地方。该设备中软件主要完成A/D数据采集，并通过数学运算将红外数据转换为温度值，自动将额头表面温度结果换算为人体腋下温度，在显示终端显示。软件主要包括主程序模块、红外测温程序模块、温度转换模块、显示程序模块、报警程序模块、环境温度补偿模块等。  
程序的主要功能说明如下：  
(1)如果按下“高温报警设置”键，则通过“+”键每次增加0.1℃或通过“-”键每次减少0.1℃，设置最高温度报警值（默认值为40℃），按下“确认”键进行确认；  
(2)如果按下“低温报警设置”键，则通过“+”键每次增加0.1℃或通过“-”键每次减少0.1℃，设置最低温度报警值（默认值为35°C），按下“确认”键进行确认；  
(3)主程序模块判断是否在30厘米范围内存在红外能量，如果没有，继续执行（3）； 否则执行（4）；  
(4)读取红外测温程序模块送回的目标表面温度信息，并调用温度转换模块和环境温度补偿模块进行温度转换和补偿，并形成最终人体温度；  
(5)将读取的温度信息与设定的最大值与最小值比较，如果大于等于最大值或小于等于最小值，则执行（6）；否则句显示程序模块发送显示的温度值，并执行（7）；  
(6)调用报警处理程序，发出蜂鸣声提醒检测人员，并向显示程序模块发送报警信息；  
(7)显示程序模块显示高溫报警或低温报警或者温度信息。  
  
【问题1】（7分）  
为了测试软件功能，测试人员设汁了表3-1所示的测试用例，请填写该表中的空白（1）-（7）。  
![7c220db9c0e341848fe2307452257e81.jpg][]  
  
【问题2】（6分）  
软件的结构覆盖率是度量测试充分性和有效性的一种手段。在嵌入式软件白盒测试过程中,通常以语句覆盖率、分支覆盖率和MC/DC覆盖率作为度量指标。  
采用以下处理过程实现“判断温度是否在正常范围”的功能：  
![1741d07c83fb4123ae48c5da45a2e866.jpg][]  
![74b64b84f6d1476baaa2c4ee0fc38a56.jpg][]  
针对上述处理过程:  
(1)若要求达到100%的语句覆盖，则所需的最少用例数是多少？  
(2)若要求达到100%的分支覆盖，则所需的最少用例数是多少？  
(3)若要求达到100%的MC/DC覆盖，则所需的最少用例数是多少？  
  
【问题3】（2分）  
常见的黑盒测试的测试用例设计方法包括：①等价类划分；②边界值分析；③因果图； ④决策表等。测试人员在表3-1中针对本题设计测试用例时，使用了其中的哪种方法？  


## 第4题 ##

试题四（15分）  
阅读下列说明和图，回答问题1至问题3，将解答填入答题纸的对应栏内。  
【说明】  
某温度采集系统以处理器为核心，采用I2C总线连接嵌入式键盘和多个温度传感器，温度传感器负责采集温度，键盘可以输入宇符和数字信息，并通过RS232总线连接上位机。  
I2C (Inter Integrated Circuit)总线是一种2线式串行总线，用于连接控制器及其外围设备。I2C总线最主要的优点是其简单性和有效性。它支持多主控（multimastering)，其中任何能够进行发送和接收的设备都可以成为主总线。一个主控能够控制信号的传输和时钟频率。 但在任何时间点上只能有一个主控。I2C的这些特点使其在许多设计中备受青睐，本系统中采用I2C总线连接嵌入式键盘和多个温度传感器，如图4-1所示。  
![95ad87cc70144bbcb01011daebf87efe.jpg][]  
  
【问题1】（4分）  
I2C总线上传送的信号是广义的，既包括地址信号，又包括数据信号。在起始信号后必须传送一个从机的地址、数据的传送方向。每次数据传送总是由主机产生的终止信号结束。 但是，若主机希望继续占用总线进行新的数据传送，则可以不产生终止信号，马上再次发出起始信号对另一从机进行寻址。 I2C总线协议规定:寻址字节由从机地址(D7-D1位)、数据传送方向位(D0位:“0” 表示主机向从机写数据，“1”表示从从机读取数据）组成，如图4-2所示。主机发送地址时， 总线上的每个从机都将这7位地址码与自己的地址进行比较，如果相同，则认为自己正被主机机寻址，根据D0位将自己确定为发送器或接收器。  
![566173fa2db7403796821568dc791f4d.jpg][]  
该系统中用I2C总线连接了多个同样的温度传感器，用于实时采集温度值。该传感器的从机地址由固定位和可编程位组成，7位地址位前4位(即D7-D4)是固定位，后3位(即D3-D1)是可编程位。 该系统中最多可连接（1）个本型号的温度传感器。 该温度传感器从机地址中固定位是OxA，传感器1的可编程位是0、传感器2的可编程位是1……以此类推。当主机读取传感器4的数据时，总线命令序列中的寻址字节值是（2）。  
  
【问题2】（6分）  
本系统通过1路RS232总线将采集的温度值传给上位机进行处理。RS232采用异步通信方式传送ASCII码，数据位8位，奇校验1位，停止位1位。当RS232的波特率设置为4800时，字符传送的速率是（1）字符/秒，毎个数据位的时间长度是（2）毫秒，数据位的传送速率是（3）位/秒。  
  
【问题3】（5分）  
同时，本系统通过I2C总线连接了嵌入式键盘，用于人机交互。频繁按键会导致连续使用I2C总线读取数据，由于I2C总线操作是一个应答式的命令序列，所以防止2次读写之间的干扰(即在一次读写没有完成之前，另一次读写操作也占用I2C总线，两次的数据会造成紊乱）是一个重要的问题。  
(1)为防止多次频繁按键，导致总线访问错误，需要采取什么机制，保证每次只允许一个读写操作占用总线?  
(2)在执行读写操作命令序列时，如何使用该机制？  


## 第5题 ##

试题五（15分）  
下面是关于C语言的基本概念和编程方面的叙述，回答问题1至问题3，将答案填入答题纸的对应栏内。  
【说明】  
王工在红外热像仪系统设计中负责软件模块，其核心功能在于进行人脸检测，调取温度检测模块获取检测到人的体温，将检测到的人脸信息及体温通过网络发送给平台进行存储，软件采用C语言编写。  
  
【问题1】（3分）  
请说明在C语言中下列宏定义的含义。  
(1) \#defme f(a,b) a\#\#b  
(2) \_LINE\_  
(3) \_DATE\_  
  
【问题2】（3分）  
王工在利用网络发送所检测到的人脸及对应的体温信息时定义了对应的数据结构FaceTemp info,内容依次包括：检测到人脸框的左上角像素坐标（横向坐标Face\_X，纵向坐标Face\_Y），人脸框的像素大小（横向宽度Face\_W,纵向高度Face\_H）,以及人体温度信息Temp。假设人脸框坐标信息、人脸框的像素大小都用unsigned short来表示，人体温度信息用float来表示。请给出FaceTemp\_info数据结构的定义。  
  
【问题3】（9分）  
在红外热像仪的图像信息处理中，王工设计了如下人脸检测、温度检测及信息发送程序， 当检测到温度大于等于37.3°C时，需要报警提示。请补全程序中的（1）~（6）。  
【程序】  
![d85a8a1cb0ff41a8b433d7dbac0959a3.jpg][]  
![07bced33673b4c899ccf24ed24228974.jpg][]  
![d5e39c3389ce4de6a48e563d6629aa1b.jpg][]  
  


## 答案及解析 ##

  



[da923008e7c64242afd35c1a58c5a206.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第1题/da923008e7c64242afd35c1a58c5a206.jpg
[d8436fffb55e4e329144ed374a473b7a.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第1题/d8436fffb55e4e329144ed374a473b7a.jpg
[cbbf81d216c84b1681d4f4850c56a1f7.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第1题/cbbf81d216c84b1681d4f4850c56a1f7.jpg
[0d2e4afbdd5c4b6f99fa6756c21684dc.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第1题/0d2e4afbdd5c4b6f99fa6756c21684dc.jpg
[f39ae17ed0a446c7b90db2a816423412.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/f39ae17ed0a446c7b90db2a816423412.jpg
[d3ed7861418f4f7892e0664ede7cd16f.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/d3ed7861418f4f7892e0664ede7cd16f.jpg
[7c220db9c0e341848fe2307452257e81.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/7c220db9c0e341848fe2307452257e81.jpg
[1741d07c83fb4123ae48c5da45a2e866.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/1741d07c83fb4123ae48c5da45a2e866.jpg
[74b64b84f6d1476baaa2c4ee0fc38a56.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/74b64b84f6d1476baaa2c4ee0fc38a56.jpg
[95ad87cc70144bbcb01011daebf87efe.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第4题/95ad87cc70144bbcb01011daebf87efe.jpg
[566173fa2db7403796821568dc791f4d.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第4题/566173fa2db7403796821568dc791f4d.jpg
[d85a8a1cb0ff41a8b433d7dbac0959a3.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/d85a8a1cb0ff41a8b433d7dbac0959a3.jpg
[07bced33673b4c899ccf24ed24228974.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/07bced33673b4c899ccf24ed24228974.jpg
[d5e39c3389ce4de6a48e563d6629aa1b.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/d5e39c3389ce4de6a48e563d6629aa1b.jpg
## 第1题 ##

【问题1】  
(1) A、 C、 E、 F、 G、 J  
(2)地址线19根，数据线16根  
  
本题考查嵌入式系统设计过程中的实际问题。  
本问题考查主存储器的基本概念。  
按照存储器在计算机中的用途分类，嵌入式系统的存储器包括内部存储器和外部存储器， 将存储器按照存放信息的易失（发挥）性，可分为易失性存储设备和非易失性存储设备。易失性存储设备的代表是RAM (Random Access Memory），称为随机存取存储器。在计算机存储体系结构中，RAM是与CPU直接交换数据的内部存储器，也叫主存、内存。按照RAM存储单元的工作原理，RAM又分为SRAM (Static RAM,静态随机存储器）和DRAM（Dynamic RAM,动态随机存储器)。  
(1) SRAM。  
静态存储单元是在静态触发器的基础上附加门控管而构成的。因此，它是靠触发器的自保功能存储数据的。SRAM将每个位存储在一个双稳态存储器单元，每个单元用一个六晶体管电路实现。  
数据一旦写入，其信息就稳定地保存在电路中等待读出。无论读出多少次，只要不断电，此信息会一直保持下去。SRAM初始加电时，其状态是随机的。写入新的状态，原来的旧状态就消失了。新状态会一直维持到写入新的状态为止。  
在电路工作时，即使不进行读写操作，只要保持在加电状态下，电路中就一定有晶体管导通，就一定有电流流过，带来功率消耗。因此与DRAM相比，SRAM功耗较大，集成度不能做得很高。  
高速缓存Cache一般采用SRAM。高速缓冲存储器是存在于主存与CPU之间的一级存储器，由静态存储芯片（SRAM）组成，容量比较小但速度比主存高得多，接近于CPU的速度。  
(2) DRAM。  
DRAM将每个位存储为对-个电容的充电，每个单元由一个电容和一个访问晶体管组成。 当DRAM存储器单元中的电容非常小，它被干扰之后很难恢复，也有很多原因会造成电容漏电，因此为了避免存储信息的丢失，必须定时地给电容补充电荷。通常把这种操作称为“刷新”或“再生”，因此DRAM内部要有刷新控制电路，其操作也比静态RAM复杂。尽管如此，由DRAM存储单元的结构非常简单，所用元件少且功耗低，可以制造得很密集，已成为大容量RAM的主流产品。  
常说的内存条就是采用DRAM构成，目前使用的主要足SDRAM和DDR SDRAM。  
(3)ROM。  
ROM ( Read-Only Memory,只读存储器）的重要特性是其存储信息的非易失性，存放在ROM中的信息不会因去掉供电电源而丢失，再次充电时，存储信息依然存在。其结构较简单，读出较方便，因而常用于存储各种固定程序和数据。 因此，题中关于SRAM、DRAM和ROM的论述中，正确的为A、C、E、F、G、J。  
SRAM的容为512KX16位=29X16,所以，SRAM的地址线为19根（1K=20)，数据线为16根。  
  
【问题2】  
（1）A、C、E、F、G、J  
（2）  
①清SARM可读状态  
②置SARM写状态  
③写满（是否5满）  
④置SRAM可读  
⑤有无空闲SRAM(是否有空闲SRAM)  
  
FPGA (Field Programmable Gate Array)是在PAL、GAL等可编程器件的基础上发展的产物。FPGA采用逻辑单元阵列LCA (Logic Cell Array),内部包括可配置逻辑模块CLB (Configurable Logic Block)、输入输出模块IOB( Input Output Block)和内部连线（Interconnect) 三个部分。  
与传统逻辑电路和门阵列（如PAL、GAL及CPLD器件）相比，FPGA具有不同的结构。FPGA利用小型查找表（16X1RAM)来实现组合逻辑，每个查找表连接到一个D触发器的输入端，触发器再来驱动其他逻辑电路或驱动I/O，由此构成了既可实现组合逻辑功能又可实现时序逻辑功能的基本逻辑单元模块，这些模块间利用金属连线互相连接或连接到I/O税模块。FPGA的逻辑是通过叫内部静态存储单元加载编程数据来实现的，存储在存储器单元中的值决定了逻辑单元的逻辑功能以及各模块之间或模块与I/O间的联接方式，并最终决定了FPGA所能实现的功能，FPGA允许无限次的编程。  
FPGA的优点如F：  
(1) FPGA由逻辑单元、RAM、乘法器等硬件资源组成，通过将这些硬件资源合理组织，可实现乘法器、寄存器、地址发生器等硬件电路。  
(2) FPGA可通过使用框图或者Verilog HDL来设计，从简单的门电路到FIR或各FFT电路。  
(3) FPGA可无限地重新编程，加载一个新的设计方案只需几百毫秒，利用重配置可以减少硬件的开销。  
(4) FPGA的工作频率由FPGA芯片以及设计决定，可以通过修改设计或者换更快的芯片来达到某些苛刻的要求(当然，工作频率也不能无限制地提高，而是受当前的IC工艺等因素制约）。 FPGA的缺点如下：  
(1) FPGA的所有功能均依靠硬件实现，无法实现分支条件跳转等操作 。  
(2) FPGA只能实现定点运算。  
因此，FPGA依靠硬件来实现所有的功能，速度上可以和专用芯片相比，但设计的灵活度与通用处理器相比有很大的差距。  
综上所述，本题的正确答案为A、C、D、F、B和E是错误的论述。  
乒乓操作法是FPGA开发中的一种数据缓冲优化设计技术，可以看成是另一种形式的流水线技术。输入的数据流在通过“输入数据流选择单元”时，时间等分地将数据流分配到两个数据缓冲校块内。数据缓冲模块可以是FPGA中的任何存储模块，如双口RAM、单口RAM 和FIFO等。在第一个缓冲周期，将输入的数据流缓存到“数据缓冲模块1”；在第一个缓冲周期，通过“输入数据流选择单元”的切换，将输入的数据流缓存到“数据缓冲模块2”，同时将“数据缓冲模块1”缓存的第一个周期的数据通过“输出数据流选择单元”的选择，送到“数据流运算处理模块”进行运算处理。在第三个缓冲周期，通过“输入数据流选择单元” 的再次切换，将输入的数据流缓存到“数据缓冲模块1”，同时将“数据缓冲模块2”缓存的 第二个周期的数据通过“输出数据流选择单元”的切换，送到“数据流运算处理模块”进行运算处埋，如此循环往复。  
这种操作方式下，通过“输入数据流选择单元”和“输出数据流选择单元”按节拍、相互配合的切换，将经过缓冲的数据流“无缝”地（即没有时间停顿地）送到“数据流运算处理税块”进行处理。如果将此操作模块作为-个整体，可以发现输入数据流和输出数据流都是连续不断的，没有任何停顿，因此特别适用于对数据流进行流水线式处理。因此，乒乓操作法常应用于流水线式算法，完成数据的无缝缓冲与处理。  
本题选的存储模块为SRAM,当2选1选择器选中SRAM1时，首先清除SARM可读状态，设置SARM写状态，接下来判断SRAM是否写满，若没有写满则等待，如已写满，则置SRAM可读，最后判断有无空闲SRAM，若没有则等待，若有空闲的SRAM，则转到由2选I选择器继续判断，选择操作的SRAM。  
  
【问题3】  
（1）  
![5efb87e0d4b84612a4fd1471050b2653.jpg][]  
（2）C、A、D、B  
  
本问题是关于多重中断的处理。多重中断是指在处理某一个中断过程中又发生了新的中断请求，从而中断该服务程序的执行，又转去进行新的中断处理。这种重叠处理中断的现象又称为中断嵌套。一般情况下，在处理某级中断的某个中断时，与它同级的或比它低级的新中断请求应不能中断它的处理，而在处理完该中断返回主程序后，再去响应和处理这些新中断，而比它优先级高的新中断请求却能中断它的处理。  
利用屏蔽可以改变多重中断处理次序。中断级的响应次序是由硬件来决定的，但是，在优先级中断屏蔽控制条件下，系统软件根据需要可以改变屏蔽位的状态，从而改变多重中断处理次序。利用屏蔽技术可以改变各设备的优先级，使计算机适应各种场合的需要。现代计算机一般都使用了屏蔽技术，即通过控制各设备接口的屏蔽触发器状态，达到改变处理次序的目的。CPU送往各设备接口屏蔽触发器状态信总的集合，称为屏蔽码。  
本题中该红外热像仪CPU的中断系统有4个中断源A、B、C、D，其硬件排队优先次序为A&gt;B&gt;C&gt;D，每个中断源对应一个屏蔽码，表1-1描述了中断服务程序与屏蔽码的关系。  
当CPU正在执行现行程序时，中断源A、B、C、D同时请求中断服务，按照中断优先级的高低，CPU首先响应并处理A的中断请求，由于A设备中断服务程序的屏蔽码为1101，把A、B、D都屏蔽了，设备C的中断没有被屏蔽，所以C打断了A,于是CPU响应C，进到C设备中断服务程序，在C设备中断服务程序中，屏蔽码变成了1111，即将所有的中断都屏蔽了，所以处理C设备的服务程序得以执行完，然后回到主程序，这时由于A的优先级A，CPU又继续处现A设备中断服务程序，这时，由于A、B、D都被屏蔽，所以A的中断服务程序执行完成。CPU再进入主程序，以此类推，CPU进入B设备中断服务程序，由于B设备中断服务程序的屏蔽码为0100，只对自己屏蔽，而没有对D设备屏蔽，所以CPU转而去执行D，由于D设备中断服务程序对B、D是屏蔽的，所以D得以完成，最后处理B。  
因此本题中断服务程序完成的顺序为C、A、D、B。  


## 第2题 ##

【问题1】  
A、C、D、E、F  
  
本题考查硬件电路的基本设计及简单的C语言编程知识。  
根据题目给出的信息描述可知，AT89S52和ADC0809之间的连接线中，对ADC0809而言，输入信号包括ST、OE、A、B、C这几组，其他为输出信号。  
  
【问题2】  
61或者0x3D  
  
当外围的温度传感器模拟电压为1.2V时，ADC的输出值根据公式进行计算即可（最大输入电压为5V):  
(1.2/5)X255=61=0x3D  
  
【问题3】  
500kHz  
  
根椐电路示意图可知，通过ALE输出的时钟信号，经过2个D触发器输出，作为后端ADC0809的时钟信号输入。  
通过对2个D触发器的次态方程(即Q(n+1)=D)进行分析可知，这2个D触发器级联构成一个4分频电路，因此输出时钟为输入时钟的1/4分频，也就是D触发器输出最终为2M/4=500kHz  
  
【问题4】  
(1) E  
(2) F  
(3) J  
(4) C  
(5) K  
(6) D  
(7) M  
(8) A  
  
根据题目中对应的电路连接描述：  
(1) ADC0809的D0-D7端口连接到AT89S52的P0口 ；  
(2) ADC0809的A、B、C为AD输入IN0-IN7选择端，A为最高位，C为最低位；  
(3) ADC0809的AD转换结束信号(EOC)连接到AT89S52的P3.2；  
(4) ADC0809的AD转换启动信号(ST)受AT89S52的P1.4管脚控制;  
(5) ADC0809的AD转换数据输出使能OE)受AT89S52的P3.1管脚控制；  
(6) ADC0809的时钟通过AT89S52的ALE输出控制，经过2个D触发器来生成;  
(7) ADC0809的输入模拟电压范围是0-5V;  
(8) AT89S52的P3.0管脚用来控制LED。  
以及对ADC0809在数据转化过程中的描述：启动一次AD转换时，需要给ST一个短时的高电平。在AD转换过程中，EOC为低电平，AAD转换完毕后，EOC会变为高电平。在AD转换结束后，需要给OE—个短时高电平，在该期间内从D0-D7读取AD转换后的数据。  
可以分析判断出(1)为 ST=0, (2)为 ST=1, (3)为while(EOC==1)，(4)为OE=0, (5)为ADdata=P0, (6)为OE==1，(7)为if(ADdata&gt;128)，(8)为LED=0。  


## 第3题 ##

【问题1】  
(1) 37.5℃  
(2) 35.5°C  
(3) 被测目标物体温度为37.4°C或37.4°C  
(4) 高温报警信息  
(5) 人于等于37.5°C或大于37.5°C  
(6) 35.6℃  
(7) 低温报警信息  
  
本题主要考查软件测试的一些基本概念和方法在测试实践中的应用。  
在嵌入式软件测试过程中，由于大部分嵌入式软件无人机界面，测试人员不能按照界面信息对软件进行直观理解，必须通过埋解软件需求和算法，运用测试概念和方法进行基于需求的测试用例设计，同时需要根据不同软件軍要度等级要求保证设计测试用例的充分性。   
此问题主要考査考生理解软件需求和算法信息的能力，以及运用等价类划分方法和边界值分析方法设计测试用例的能力。  
按照说明中对测温仪软件的说明信息，对照表3-1中的己知信息和提示信息，完成表3-1中的问题。  
(1)中的输入为“按下‘高温报警设置’键后，先按键10次，再按键15次，按下‘确认’键”，根据输出的提示信息，需要使用说明信息计算出最高温度报警设定值。根椐说明中的第（1）条，按下“高温报警设置”键后，通过键每次减少0.1℃，设置最高温度报普值（默认值为40°c)。因为默认值为40℃，按键每次减少0.1°C，先按“-”键10次， 故应该减少0.1℃，默认值40℃减去1℃，为3。  
  
【问题2】  
(1) 3  
(2) 3  
(3) 3  
  
此问题主要考查对语句覆盖、分支覆盖和MC/DC覆盖概念的掌握以及实际应用。  
语句覆盖要求设计适当数量的测试用例，运行被测程序，使得程序中每一条语句至少被运行一遍，覆盖在测试中主要发现错误语句。  
分支覆盖要求设计适当数量的测试用例，运行被测程序，使得程序中每个真值分支和假值分支至少执行一次，分支覆盖也称判定覆盖。  
修正判定条件覆盖（CMC/DC)要求设计适当数量的测试用例，保证在一个程序中每一种输入输出至少得出现一次，在程序中的每一个条件必须产生所有可能的输出结果至少一次，并且每个判断中的每个条件必须能够独立影响一个判断的输出，即在其他条件不变的前提下仅改变这个条件的值，而使判断结果改变。 按照上述句覆盖要求，语句覆盖就要使得问题2中给定箅法中所有语句执行一次，问 题2中有三个语句块，如下所示。  
![a3b8a107177845ac8da9a4f509acb5be.jpg][]  
因此为了使问题2中定算法的个语句块各执行一次，最少需要3个测试用例来满足覆盖要求。  
按照上述分支覆盖要求，分支覆盖要使得程序中每个真值分支和假值分支至少执行一次。 对问题2中种判断条件进行分析，有两个判断条件，需要分别取每个判断的真值分支和假值分支，即从理论上需要4个测试用例来满足覆盖要求。但是，由于第一个判断的假分支中包含了第二个判断条件的真假分支，当满足第一个判断的假分支时，同时可满足第二个判断条件的真或假分支，可减少一个测试用例，故问题2最少需要3个测试用例来满足分支覆盖要求。  
按照上述MC/DC覆盖要求，即每个判断中的每个条件必须能够独立影响一个判断的输出。对问题2中给定算法的两个判断条件进行分析，第一个判断有两个条件，两个条件共有四种组合，即TT (TRUE和TRUE)、TF (TRUE和FALSE)、FT (FALSE和TRUE)和 FF (FALSE和FALSE);第二个判断只有一个条件，不需要考虑MC/DC覆盖要求。由于第一个判断中的两个条件为逻辑与条件，当前一个条件为FALSE时，其整个判断值为FALSE,后 一个条件的真或假均不能独立影响整个判断的输出，所以只需要TT、TF和FX (X表示后一个条件为TRUE或FALSE都可以）三种情况就可以，故这个判断至少需要3个测试用例满足MC/DC覆盖要求。  
  
【问题3】  
边界值分析法或②  
  
常见的黑盒测试的测试用例设汁方法包括：①等价类划分；②边界值分析；③图； ④决策表等。  
等价类划分是在分析需求规格说明的基础上把程序的输入域划分成若干部分，然后在每部分中选取代表性数据形成测试用例。  
边界值分析是针对边界值进行测试的。使用等于、小于或大于边界值的数据对程序进行测试的法就是边界值分析方法。  
因果图方法是通过画因果图，把用自然语言描述的功能说明转换为决策表，然后为决策表的每列设计一个测试用例。 决策表由四部分组成：条件桩、条件条目、动作桩、动作条目。任何一个条件组合的取值及其相应要执行的操作构成规则，条目中的每一列是一条规则。条件引用输入的等价类，动作引用被测软件的主要功能处理部分，规则就是测试用例。建立并优化决策表，把决策表中每一列表示的情况写成测试用例。  
按照上述方法的说明，测试人员在表3-1中针对本题设计测试用例时，主要根椐设置的高温和低温边界，对等于、小于和大于边界值的数据进行了测试，故使用了边界值分析方法。  


## 第4题 ##

【问题1】  
(1) 8 个  
  
本题考查嵌入式计算机相关的基础知识。  
l2C总线是种简单、双问二线制同步串疗总线。它只需要两根线即可在连接于总线上的器件之间传送信息。  
主器件用于启动总线传送数据，并产生时钟以开放传送的器件，此时任何波寻址的器件均被认为是从器件。在总线上主和从、发和收的关系不是恒定的，而是取决于此时数据传送方句。如果主机要发送数据给从器件，则主机首先寻址从器件，然后主动发送数据至从器件，最后主机终止数据传送；如果主机要接收从器件的数据，苜先由主器件寻址从器件，然后主机接收从器件发送的数据，最后由主机终止接收过程。在这种情况下，主机负责产生定时时钟和终止数据传送。  
发送到SDA线上的每个字节必须为8位，每次传输可以发送的字节数量不受限制。每个字节后必须跟一个响应位。首先传输的是数据的最高位（MSB），如果从机要完成一些其他功能后（例如一个内部中断服务程序）才能接收或发送下一个完整的数据字节，可以使时钟线SCL保持低电平，迫使主机进入等待状态，当从机准备好接收下一个数据字节并释放时钟线SCL后数据传输继续。  
本系统中用I2C总线连接多个同样的温度传感器，传感器的从机地址由固定位和吋编程位组成，后3位(即D3-D1)是可编程位，所以该系统中最多可连接8个本型号的温度传感器。  
本系统中寻址字节由从机地址（D7-D1位)、数据传送方向位（D0位：“0”表示主机向从机写数据，“1”表示从从机读取数据）组成，当主机读取传感器4的数据时，从机地址中固定位是0xA，传感器4的可编程位是3, D0位“1”表示从从机读取数据，总线命令序列中的寻址字节值是0xA7。  
  
【问题2】  
(1) 480  
(2) 0.208  
(3) 3840  
  
在串行通信时，要求通信双方都采用一个标准接口，使不同的设备可以方便地连接起来进行通信。RS232接口是目前最常用的一种串行通信接口。  
在信息传输通道中，携带数据信息的信号单元叫码元，每秒钟通过信道传输的码元数称为码元传输速率，简称波特率，其单位是波特（Baud, symbol/s)，波特率是传输通道频宽的指标。波特率可以理解为一个设备在一秒钟内发送（或接收）了多少码元的数据，它是对符号传输速率的一种度量，表示单位时间内传输符号的个数（传符号率）。通过不同的调制方法吋以在一个符号上负载多个比特信息。  
RS232典型的“波特率”是300、1200、2400、9600、19 200、38400、115200 等。例如，4800波特表小每秒钟发送4800个符号。如果协议需要4800波特率，那么时钟是4800Hz。这意味着串口通信在数据线上的采样率为4800Hz。  
当计算机发送一个信息包，实际的数据不会是8位的。例如，如果数据使用简单的文本 (标准ASCII码），那么每个数据包使用7位数据。每个信息包还包括开始/停止位、数据位和命偶校验位。  
本系统的信息包中数据位8位，奇校验1位，停止位1位，共10位，当RS232的波特率设置为4800时，字符传送的速率是480字符/秒，每个数据位的时间长度是1/4800秒，即 0.208毫秒，数据位的传送速率是4800X0.8=384C位/秒。  
  
【问题3】  
(1)互斥机制。  
(2)读写操作开始之前，等待互斥锁进行互斥；读写操作完毕后，释放互斥锁。  
  
在多任务系统中，如果有多个任务试图同时访问临界区，应该采取互斥保护的措施，在有一个任务进入临界区后，其他所有试图访问此临界区的任务将被挂起，并一直持续到进入临界区的任务离开。临界区在被释放后，其他任务可以继续抢占，并以此达到用原子方式操作共享资源的目的。  
任务进入临界区的调度原则是：  
1.如果有若干任务要求进入空闲的临界区，一次仅允许一个进程进入。  
2.任何时候，处于临界区内的任务不可多于一个。如已有任务进入自己的临界区，则其他所有试图进入临界区的任务必须等待。  
3.进入临界区的仟务要在有限时间内退出，以便其他任务能及时进入自己的临界区。  
4.如果任务不能进入自己的临界区，则应让出CPU，避免出现“忙等”现象。  
本系统中频繁按键会导致任务连续使用I2C总线读取数据，为防止多次频繁按键，导致总线访问错误，需要采取互斥机制，保证毎次只允许一个读写操作占用总线。 按照临界区的调度原则，在执行读写操作命令开始之前，等待互斥锁进行互斥；读写操作完毕后，释放互斥锁。  


## 第5题 ##

【问题1】  
(1) C语言的宏定义中，\#\#是连接a、b两端的内容的意思，它是宏定义中的关键字， 表示将前后数据连接起来。  
(2) 封前行号。  
(3) 3前口期。 本  
  
本题考查嵌入式c语言编程及应用能力。  
在C语言源程序中，允许用一个标识符来表示一个字符串，称为“宏”，宏是一种预处理命令，被定义为“宏”的标识符称为“宏名在编译预处理时，对程序中所有出现的“宏名”，都用宏定义中的字符串去代换，这称为”宏代换”或“宏展开”。宏定义是由源程序中的宏定义命令来完成的，宏展开是由预处理程序自动完成的。根据是否带参数，将宏定义分为无参宏定义和带参宏定义两种。  
本题中的三条宏定义中，\#defmef(a，b) a\#\#b,是带参宏定义，表示连接a、b两端的内容的含义，\#\#是宏定义中的关键字，表示将前后数据连接起来。  
标准C语言预处理要求定义某些对象宏，每个预定义宏的名称以两个下画线字符开头和结尾，这些预定义宏不能被取消定义(\#undef)或由编程人员重新定义。\_LINE\_和\_DATE\_都是预定义宏。  
\_LINE\_：当前程序行的行号，表示为s十进制整型常量。  
\_DATE\_：表示运行程序时的当前曰期.，  
  
【问题2】  
![37b6dc6064534233a11ad50d996b5148.jpg][]  
![9e1758d081d44843996e9a29f3680dc3.jpg][]  
  
依据题意，数据结构 FaceTemp\_info 中，有unsigned short 类型的元素 Face\_X、Face\_Y、Face\_W和Face\_H，float类型的元素Temp。因此，FaceTemp\_info数据结构可定义为：  
![0ab25c58307f4a408995643f4c4c1150.jpg][]  
其中，关键字struct或typedef struct后而的结构体类型名FACETEMP\_STRUCT考生可以根据标识符构造规则使用其他标识符来命名。在第二种定义方式中，结构类型变量FaceTemp info TPYE的命名也由考生自己定义。  
  
【问题3】  
(1) temp &gt;= 37.3 或 temp -37.3 &gt;0.000001 或 temp -37.3 &gt;10E-6  
(2) facetemp\_info.Face\_X二 face x  
(3) facetemp\_info.Face\_Y = face\_y  
(4) facetemp\_info.Face\_W z= face\_w  
(5) facetemp—info.Face H = face—h  
(6) &facetemp\_info  
(其中（2）-(5)顺序可互换）  
  
本问题为一段段C语言编程问题。依据题意以及程序段中的解释，FaceTempInfo\_Send程序中，首先对数据结构facetemp\_info进行初始化，然后调用FaceDetection函数，进打人脸检测，当返回值小于0时，表示没有检测到人脸，程序返回。当大于等于0时，表示检测到人脸。接下来根据采集到的红外图像信息input\_image，调用函数TempDetection计算人体温度，接下来就是判断人体温度是否大于37.3℃，问题（1）有三种写法：  
temp &gt;= 37.3  
temp - 37.3 &gt;0.000001  
temp - 37.3 &gt;10E-6  
如果人体温度大于等于37.3°C，则报警，程序返回。否则，将内部变量的数据赋位到变量facetemp\_info.Face 中：  
(2) facetemp\_info.Face\_X = face\_x  
(3) facetemp\_info.Face\_Y = face\_y  
(4) facetemp\_nfo.Face\_W = face\_w  
(5) facetemp\_info.Face\_H = face\_h  
这4条填空内容的次序可互换。  
接下来，调用SendUDP函数，将检测到的人脸信息和体温信息发送给后端服务器。第一个参数是指针数据，所以，空(6)应填入“&facetemp\_info”。  



[5efb87e0d4b84612a4fd1471050b2653.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第1题/5efb87e0d4b84612a4fd1471050b2653.jpg
[a3b8a107177845ac8da9a4f509acb5be.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/a3b8a107177845ac8da9a4f509acb5be.jpg
[37b6dc6064534233a11ad50d996b5148.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/37b6dc6064534233a11ad50d996b5148.jpg
[9e1758d081d44843996e9a29f3680dc3.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/9e1758d081d44843996e9a29f3680dc3.jpg
[0ab25c58307f4a408995643f4c4c1150.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/0ab25c58307f4a408995643f4c4c1150.jpg
