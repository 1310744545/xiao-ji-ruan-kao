---  
title: 2019年下半年  
# icon: gears  
order: 990  
category:  
- 历年真题  
tag:  
- 真题  
  
# navbar: false  
# sidebar: false  
  
# breadcrumb: false  
# pageInfo: false  
# contributors: false  
# editLink: false  
# lastUpdated: false  
# prev: false  
# next: false  
comment: false  
# footer: false  
  
# backtotop: false  
---  
## 第1题 ##

试题一（15分）  
阅读下列说明和图，回答问题1至问题3，将解答填入答题纸的对应栏内。  
【说明】  
服务型智能扫地机器人因其低廉的价格和高效的工作能力，越来越受到消费者的认可，目前己逐渐进入家庭生活代替人们的清洁工作，具有广阔的市场。  
服务型智能扫地机器人需要具有自主运动规划和导航功能，在其工作过程中，需要通过对环境信息的融合感知进行行为决策。扫地机器人一般具备的主要功能包括：  
(1) 紧急状态感知：包括碰撞检测、跌落检测和离地检测等功能，防止与障碍物碰撞、前方台阶跌落危险以及扫地机器人离地等，实现扫地机器人运动中的自我保护。  
(2) 姿态感知：包括运动里程计数和航向测量等功能，需要获取扫地机器人的运动速度、行走距离、航向角度等信息。  
(3) 视觉感知：包括单目视觉避障系统和单目视觉定位系统等，需要通过视觉信息探测障碍物，视觉信息来自两个单目摄像头系统。在某些设计中，也可结合红外测距传感器进行障碍物探测。  
(4) 自动充电：在工作过程中，需要实时监控扫地机器人的电量，且在电量少于一 定阈值时自动返回电源处进行充电。  
(5) 扫地及吸尘单元：使用电机控制刷子实现清扫，使用抽灰电机实现吸尘。  
(6) 运动执行：对机器人的运动进行控制。  
(7) 监控系统：通过无线网络传递扫地机器人的状态数据及视频图像等信息到远程客户端，客户端参与到扫地机器人的运动监视及控制中，实现信息交互，监控扫地机器人的实时状态。客户端包括PC客户端和手机客户端两种。  
(8) 信息处理中心：用于接收各种传感器信息和视觉信息，通过分析处理进行扫地机器人的运动控制，且负责和后台监控中心通信。 服务型智能扫地机器人选用ARM+STM32双核架构模式，分别处理数据量较大的图像信息和短促型的非图像信息。STM32选用STM32F103VET6芯片，用于实现非图像以外的众多传感器的驱动以及数据采集，并控制车轮电机的运动；ARM选用S5PV210处理器实现摄像头图片的采集、在监控系统中接入无线网络、对STM32串口传过来的传感器数据以及图像定位和避障信息做综合处理，生成运动决策，发送给STM32,执行扫地机的前进、后退、转弯等。  
  
【问题1】（5分）  
图1-1是本题的服务型智能扫地机器人典型的功能结构图，请根据说明的描述，填写（1）-（5）空白处，完成该功能结构图。请将（1）-（5）的内容填在答题纸上相应的位置中。  
![65038bf5565d481dad7525cd14db4475.jpg][]  
  
【问题2】（6分）  
为了实现服务型智能扫地机器人的功能，就需要多种传感器来感知工作环境信息。 王工在对传感器进行选型时，选择了如下类型的传感器：  
1. USB摄像头；  
2. 开关式传感器；  
3. 槽型光耦模块；  
4. 数字式防跌落传感器；  
5. 红外测距传感器；  
6. GGPM01A单轴角度陀螺仪（传感器)；  
7. 霍尔码盘传感器。  
请根据传感器的功能完成表1-1，请将（1）-（6）的内容填在答题纸上相应的位置中。  
![fb14997024844510ac11d901051c7ec5.jpg][]  
  
【问题3】（4分）  
由于该服务型智能扫地机器人的硬件采用双处理器架构，即ARM+STM32双核架构模式，选用串口方式在处理器之间传递数据， 如图1-2所示。假设在本串行传输中的数据格式为:8位数据位、1位起始位、1位停止位，无校验位。（1）当波特率为9600b/s时，每秒钟传送的有效数的通信关系数据是多少字节？（2）为保证数据收发正确（每个字节数据传输中的累计误差不大于1/4 bit），试分析发送方和接收方时钟允许的误差范围， 并以百分比形式给出最大误差。请将答案填写在答题纸的对应栏中。  
![27f6c4fcb23d4781902f6ef1c5182952.jpg][]  


## 第2题 ##

试题二（15分）  
阅读下列说明和图，回答问题1至问题4，将解答填入答题纸的对应栏内。  
【说明】  
在服务型智能扫地机器人的系统设计中，李工设计的扫地机器人硬件系统接口如图2-1所示，其中STM32单片机负责进行各个传感器的数据釆集，包括利用GPIO进行各种传感器数据的获取、利用ADC进行红外测距仪数据的获取、利用IIC进行陀螺仪(角度）传感器数据的获取，通过串口将数据发送给主处理器S5PV210,并利用脉冲计数进行扫地机器人运动速度、距离等信息的获取。主处理器S5PV210通过USB接口采集实时视频，利用PWM进行云台控制，同时利用USB接口通过WIFI和后台主机实现信息交互。  
![dde81683519440798417b6313439c5eb.jpg][]  
STM32单片机有BOOT1和BOOTO两个启动方式选择管脚，包括三种不同的启动方式，如表2-1所示。  
![63560df386714dc4971ed8faf63dabdc.jpg][]  
李工在STM32单片机的启动电路设计时，釆用跳线帽形式进行启动方式选择，对应电路如图2-2所示。  
![2288f79a5414435d86c211c7edb88ece.jpg][]  
李工在利用ADC进行红外测距仪数据的釆集设计中，采用STM32内置的12bit逐次比较型ADC，参考电压Ref为3.3V，ADC的釆集数字输出为：  
![b0fa6ff5644a4aa8b851930f5ca3fa11.jpg][]  
为获取扫地机器人在移动过程中的距离、速度等信息，李工将霍尔传感器模块分别安装在左右车轮驱动电机的轴上，通过两个计数器采集左右驱动电机轴上的霍尔传感器脉冲数，以此来计算获取扫地机器人的移动距离、旋转角度等信息。图2-3为扫地机器人的圆形机身和左右两轮的示意图。  
![5c085bbc72b24f948bdefc03e212bc28.jpg][]  
已知左右车轮转动一圈时，霍尔传感器输出564个脉冲（表示为n0），那么计数器采集到的脉冲数和左右轮的移动距离关系可以表示为(R为车轮距中心半径，r为左右轮的半径，nx为当前计数器从开始到现在采集到的脉冲数)：  
![8477959c44cb480889d90e49eada2c09.jpg][]  
  
【问题1】（2分）  
如果STM32的选择从主Flash启动，那么图2-2中的跳线帽应该连接管脚1和管脚2还是管脚2和管脚3?  
  
【问题2】（2分）  
当红外测距仪数据模拟电压Vin为2.4V时，ADC的输出值是多少？（用十进制数表示）  
  
【问题3】（3分）  
假设扫地机器人的车轮距中心半径R=30cm,左右轮的半径r=5cm。当左轮PWM脉冲计数数目为2256时，左轮从脉冲计数开始到现在，移动的距离是多少厘米？ (π取 3.14)  
  
【问题4】（8分）  
李工在扫地机器人设计中加入了陀螺仪模块，通过陀螺仪可以获取不同时刻之间的偏转角，进而与霍尔传感器相融合，使得运动控制器能够直接快速得到系统当前的偏转角。陀螺仪和STM32之间通过IIC接口进行数据通信，陀螺仪和STM32之间还有一个信号线（STM32的GPI09）和陀螺仪芯片复位线（STM32的GPI08,低电平为复位， 高电平为非复位）。  
在STM32通过IIC接口获取陀螺仪数据前，需要先对陀螺仪复位并查询信号线的有效性（GPI09高为有效，低为无效)，有效时再通过IIC接口读取陀螺仪的数据。李工设计了通过IIC接口获取陀螺仪数据的流程图（图2-4)，请选择合适的项进行补全。  
图2-4 中（1）-（4）备选答案：  
A.GPI09和GPI08都设置为输入  
B.GPI09和GPI08都设置为输出  
C.GPI09设置为输入，GPI08设置为输出  
D.GPI09设置为输出，GPI08设置为输入  
E.GPI09设置为高，持续一段时间，  
G.PI09设置为低  
F.GPI09设置为低，持续一段时间， GPI09设置为高  
G.GPI08设置为低，持续一段时间, GPI08设置为高  
H.GPI08设置为高，持续一段时间, GPI08设置为低  
I.GPI09为高电平？  
J.GPI09为低电平?  
K.GPI08为高电平？  
L.GPI08为低电平？  
M.通过IIC读取数据  
N.通过IIC写入数据  
![2624dc45f4ab4d4a8bbe4cdf94dc2427.jpg][]  


## 第3题 ##

试题三（15分）  
阅读下列说明，回答问题1至问题3，将解答填入答题纸的对应栏内。  
【说明】  
在服务型智能扫地机器人的软件设计中，为了更好地记录机器人的个体信息和工作信息，设计了信息数据库。数据库主要完成收集服务型智能扫地机器人反馈信息的作用， 记录机器人的所有工作记录，方便了使用者对机器人的管理及对机器人状态的掌握，并且在机器人发生运行故障时，可以根据数据库存储的信息分析产生故障的原因。数据库收集服务型智能扫地机器人反馈信息的流程如下：  
服务端接收反馈信息：  
1. 第一次解析判断反馈信息类型是否正确。如果正确继续执行2，否则执行3。  
2. 第二次解析判断反馈信息内容是否正确。如果正确执行4,否则执行3。   
3. 调用错误信息处理函数后执行4。  
4. 将反馈信息存入数据库。  
  
【问题1】（6分）  
在本软件测试过程中，测试人员为了设计测试用例，根据题目中的说明，画出了机器人反馈信息收集软件的流程图，如图3-1所示。  
![219d9e6f461845f0b41a7cea2f8e000c.jpg][]  
请在下列选项中， 为图3-1中的(1)-(3)选择正确的描述内容， 将答案填写在答题纸的对应栏中。  
空（1）备选答案：  
A.反馈格式是否正确  
B.反馈长度是否正确  
C.反馈类型是否正确  
D.反馈内容是否正确  
空（2）备选答案：  
A.标记错误信息  
B.错误信息处理  
C.错误信息纠正  
D.错误信息报告  
空（3）备选答案：  
A.信息存入内存  
B.信息存入文件  
C.信息存入数据库  
D.信息存入软件  
  
【问题2】（4分）  
软件的结构覆盖率是度量测试完整性的一种手段，也是度量测试有效性的一种手段。在嵌入式软件白盒测试过程中，通常以语句覆盖率和分支覆盖率作为度量指标。 在实现题目说明的反馈信息接收功能时，设计人员采用了下列算法：  
![409e48b8cd1c498591864c4ade31b070.jpg][]  
![5834f3d2c2b44fcebf17f92cbae0255c.jpg][]  
请完成表3-1中的（1）和（2）空白，指出对上述算法达到100%语句覆盖和100%分支覆盖所需的最少测试用例数目。请将答案填写在答题纸的对应栏中。  
![8e4a18a582b946098f8ce0f9b5f7bae8.jpg][]  
  
【问题3】（5分）  
为了测试软件功能，测试人员设计了表3-2所示的测试用例，请填写该表中的空白 (1)-(5)。请将答案填写在答题纸的对应栏中。  
![7b52e57a17e744ebb1656dafcae444a1.jpg][]  


## 第4题 ##

试题四（15分）  
阅读下列说明和图，回答问题1至问题3，将解答填入答题纸的对应栏内。  
【说明】  
服务型智能扫地机器人涉及了众多传感器，通过对环境信息的融合感知进行行为决策。同时也设计了丰富的多媒体人机交互系统，实现输入输出功能。  
  
【问题1】（5分）  
服务型智能扫地机器人的输入输出终端采用触摸屏技术，李工设计了一款具有触摸功能的显示单元，该显示单元的主板采用X86架构的处理器，触摸控制板的核心是控制芯片，当触摸笔点击触摸面板时，将通过输入端点上传数据报文，格式如图4-1所示。数据报文按照小端字节顺序发送，第一个Byte表示触摸笔的状态，0x70表示Down, 0x30表示Up,后四个Byte包含触摸笔点击位置的坐标值，Byte1和Byte2表示X轴坐标，Byte3和Byte4表示Y轴坐标。触摸板左上角坐标值为（0, 0），右下角坐标值为（1022，766）。  
![b7be5443f89b4281ba1c3d9e3ac0ed09.jpg][]  
当触摸笔在触摸板中心位置按下时，触摸屏发送的数据报文内容是(1)、(2)、(3)、(4)、(5),请将答案填写在答题纸的对应栏中。  
  
【问题2】（5分）  
该机器人系统内部集成众多传感器，通过现场总线互联起来，构成了底层的网络， 选用的CAN控制器内含二个接收缓冲器、三个发送缓冲器，具有灵活的中断管理能力。  
李工设计了一种采用中断方式的数据接收程序，每当接收寄存器接收到数据时，中断寄存器的接收中断使能，并产生中断信号通知CPU，中断处理程序在读取数据后，清空中断标识位，等待下一次中断。由于两个接收器共享一个中断号，在调试过程中发现， 当短时间（毫秒级）接收大量数据时，丢包现象比较严重。李工对上述流程进行了改进, 当产生一次中断时，依次查询两路接收器的状态，这样大大提高了数据接收处理能力， 减少了系统开销，其处理流程如图4-2所示。  
![7322358695f74e518dcd37b2389f58d7.jpg][]  
请将上述改进后的双通道数据接收流程图补充完整，将答案填写在答题纸的对应栏中。  
  
【问题3】（5分）  
该机器人系统按照图4-2的方式接收传感器采集数据，并由上层应用程序对数据进行处理。当应用访问操作速度和底层硬件输入的速度存在较大差异时，采用环形缓冲 制，可以起到良好的缓冲作用，减少丢包率。李工设计的环形缓冲是基于先进先出（FIFO）的原则，并设计了环形缓冲的数据结构，读写指针各自独立，读任务和写任务可以同时访问环形缓冲，无需互斥信号量的介入。但是，在运行多任务时，如果存在多个读任务和多个写任务同时操作环形缓冲，则需要应用互斥操作机制。  
1.请简述互斥操作的作用。  
2.为了在多任务环境中能正确使用环形缓冲，不发生读写冲突，增加了读写锁进行保护。应用任务读取环形缓冲的伪代码如下，请完善其中空（1）-（3）处的内容，将答案写入答题纸对应栏内。  
![27eb36810fad45e184b097c94bc27dc6.jpg][]  
![037c7e61d66a400bb3df53b57307c86f.jpg][]  


## 第5题 ##

试题五（15分）  
阅读以下关于C语言的基本概念和编程方面的叙述，回答问题1至问题3，将解答填入答题纸的对应栏内。  
【说明】  
服务型智能扫地机器人的信息处理中心，用于接收各种传感器信息和视觉信息，通过分析处理进行扫地机器人的运动控制，且负责和后台监控中心通信。信息处理中心基于嵌入式计算机实现。  
  
【问题1】（4分）  
在信息处理中心的计算机系统中，系统总是要用户对变量或寄存器进行位操作，下面程序1代码中对给定整型变量a，实现了两个函数，其中：set\_bit3函数用于设置a的bit 3(第3位)，clear\_bit3函数用于清除a的bit 3(第3位)。请补全程序1代码的（1）和（2），将正确代码写在答题纸的相应位置。  
![fa939b2ccda84eb9beff329cfd508a11.jpg][]  
![d84aba2b2275484199f6649fbbb3bb32.jpg][]  
  
【问题2】（6分）  
信息处理计算机采用中断方式快速响应外部事件。中断是嵌入式系统中簠要的组成部分，这使得很多编译器开发商提供了标准C支持中断的扩展（使用关键字\_\_interrupt）。 下面程序2是王工设计的中断处理程序代码，请对这段程序进行同行评审，找出你认为不合适的3个方面，将解答写入答题纸相应的位置。'  
![f82aa46aad4c4bccadb21f6502f6f7ca.jpg][]  
  
【问题3】（5分）  
王工设计了信息处理中的软件算法，利用单向链表来存储信息。其中如下给定的程序3中已建立一个带有头结点的单向链表，链表中的各结点按结点数据域中的数据从小到大顺序链接。函数fun的功能是：把参数x的值放入一个新结点并插入到链表中，插入后各结点仍保持从小到大顺序排列。该程序的实现如程序3所示。  
![85d63407b6eb4e719753f51c6592a41d.jpg][]  
![bcf4871b1e3a476ba0203ff477cbfc62.jpg][]  
根据题意分析程序，完成程序3的空(1)-(5)，将解答写入答题纸相应的位置。  
  


## 答案及解析 ##

  



[65038bf5565d481dad7525cd14db4475.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第1题/65038bf5565d481dad7525cd14db4475.jpg
[fb14997024844510ac11d901051c7ec5.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第1题/fb14997024844510ac11d901051c7ec5.jpg
[27f6c4fcb23d4781902f6ef1c5182952.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第1题/27f6c4fcb23d4781902f6ef1c5182952.jpg
[dde81683519440798417b6313439c5eb.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/dde81683519440798417b6313439c5eb.jpg
[63560df386714dc4971ed8faf63dabdc.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/63560df386714dc4971ed8faf63dabdc.jpg
[2288f79a5414435d86c211c7edb88ece.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/2288f79a5414435d86c211c7edb88ece.jpg
[b0fa6ff5644a4aa8b851930f5ca3fa11.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/b0fa6ff5644a4aa8b851930f5ca3fa11.jpg
[5c085bbc72b24f948bdefc03e212bc28.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/5c085bbc72b24f948bdefc03e212bc28.jpg
[8477959c44cb480889d90e49eada2c09.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/8477959c44cb480889d90e49eada2c09.jpg
[2624dc45f4ab4d4a8bbe4cdf94dc2427.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/2624dc45f4ab4d4a8bbe4cdf94dc2427.jpg
[219d9e6f461845f0b41a7cea2f8e000c.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/219d9e6f461845f0b41a7cea2f8e000c.jpg
[409e48b8cd1c498591864c4ade31b070.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/409e48b8cd1c498591864c4ade31b070.jpg
[5834f3d2c2b44fcebf17f92cbae0255c.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/5834f3d2c2b44fcebf17f92cbae0255c.jpg
[8e4a18a582b946098f8ce0f9b5f7bae8.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/8e4a18a582b946098f8ce0f9b5f7bae8.jpg
[7b52e57a17e744ebb1656dafcae444a1.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/7b52e57a17e744ebb1656dafcae444a1.jpg
[b7be5443f89b4281ba1c3d9e3ac0ed09.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第4题/b7be5443f89b4281ba1c3d9e3ac0ed09.jpg
[7322358695f74e518dcd37b2389f58d7.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第4题/7322358695f74e518dcd37b2389f58d7.jpg
[27eb36810fad45e184b097c94bc27dc6.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第4题/27eb36810fad45e184b097c94bc27dc6.jpg
[037c7e61d66a400bb3df53b57307c86f.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第4题/037c7e61d66a400bb3df53b57307c86f.jpg
[fa939b2ccda84eb9beff329cfd508a11.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/fa939b2ccda84eb9beff329cfd508a11.jpg
[d84aba2b2275484199f6649fbbb3bb32.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/d84aba2b2275484199f6649fbbb3bb32.jpg
[f82aa46aad4c4bccadb21f6502f6f7ca.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/f82aa46aad4c4bccadb21f6502f6f7ca.jpg
[85d63407b6eb4e719753f51c6592a41d.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/85d63407b6eb4e719753f51c6592a41d.jpg
[bcf4871b1e3a476ba0203ff477cbfc62.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/bcf4871b1e3a476ba0203ff477cbfc62.jpg
## 第1题 ##

【问题1】  
(1)紧急状态感知  
(2)跌落检测  
(3)航向测量  
(4)单目视觉避障系统  
(5)扫地及吸尘单元  
  
本题考查嵌入式系统设计的相关知识，以及对嵌入式系统分析、设计和开发的综合能力。服务型智能扫地机器人是一个典型的嵌入式系统。  
根据题干说明，服务型智能扫地机器人需要具有自主运动规划和导航功能，在其工作过程中，需要通过对环境信息的融合感知进行行为决策。扫地机器人一般具备的主要功能包括：紧急状态感知、姿态感知、视觉感知、自动充电、扫地及吸尘单元、运动执行、监控系统、信息处理中心等。  
紧急状态感知包括碰撞检测、跌落检测和离地检测等功能。所以空（1）为紧急状态感知，空（2）为跌落检测。  
状态感知包括运动里程计数和航向测量等功能。所以，空（3）为航向测量。  
视觉感知包括单目视觉避障系统和单目视觉定位系统等。所以，空（4）为单目视觉避障系统。  
根据题意，扫地及吸尘单元使用电机控制刷子实现清扫，使用抽灰电机实现吸尘。 其他功能都在扫地机器人的功能结构中。所以，空（5）为扫地及吸尘单元。  
  
【问题2】  
(1)红外测距传感器  
(2)红外测距传感器  
(3)开关式传感器  
(4)槽型光耦模块  
(5)GGPM01A单轴角度陀螺仪  
(6)霍尔码盘传感器  
或给出编号：  
(1) 5  
(2) 4  
(3) 2  
(4) 3  
  
各传感器的功能如下：   
①USB摄像头：用于采集环境的图像信息，该扫地机器人选用JD-2020摄像头，输出格式为YUYV和MJPG,每秒30帧。   
②开关式传感器：用于车身离地检测，当车轮离地时，开关闭合，输出高电平，未碰撞断开时输出低电平。   
③槽型光耦模块：用于碰撞检测，当触碰发生时，与防撞栏联动的挡板会遮挡红外光束，接收端直接收到少量的红外光束，输出高电平，反之输出低电平。   
④数字式防跌落传感器：用于平台防跌落，该传感器红外发射头发出红外光线，经过地面反射进入到接收端，当反射光束地面位置距离较远（台阶）或者光路被挡住，接收端接收不到足够的光束，就输出高电平，反之输出低电平。   
红外测距传感器：为了感知周围障碍物的信息，保证安全距离，防止移动机器人撞击损坏，就需要在机器人两侧安装红外测距传感器检测障碍物，左右两侧红外测距结合单目摄像头实现避障。   
⑥GGPM01A单轴角度陀螺仪（传感器)：用于检测航向角度，GGPM01A数字陀螺仪导航模块，通过内置的处理器结合高性能滤波算法输出精确的角速度及偏航角度。   
⑦霍尔码盘传感器：用于测速和计里程，霍尔码盘安装在紧邻电机的位置，电机由 PWM信号驱动，流过电机的电流信号为脉动电流信号，在电机转动时，对紧邻的外部电路会产生干扰噪声且噪声频率与PWM频率一致。  
  
【问题3】  
(1)960字节  
(2)数据位8位、起始位1位、停止位1位，无校验位，累积的最大误差为(8+1+1)△, 该值应小于1/4位，即（8+1+1) △≤1/4，所以最大误差为2.5%。  
  
每秒钟传送的有效数据：9600/(1+8+1)=960字节。  
分析发送方和接收方时钟允许的最大误差：  
在启动位同步后，数据位8位、起始位1位、停止位1位，无校验位，累积的最大误差为（8+1+1) △,该值应小于1/4位，即（8+1+1)△≤1/4，所以最大误差为2.5%。  


## 第2题 ##

【问题1】  
管脚1和管脚2  
  
本题考查嵌入式系统硬件设计的基础知识和相关的流程。  
此类题目要求考生认真阅读题目的题干，以及问题中的流程化说明和表信息，经过分析、对比、计算、归纳等回答各个问题。  
如果STM32的选择从主Flash启动，从表2-1 STM32单片机启动方式说明中可以很容易看出，BOOTO必须是0, BOOT1任意即可，对比图2-2中的连接，要使得BOOTO满足要求，必须将管脚1和管脚2通过跳线帽连接起来。  
  
【问题2】  
2978  
  
当红外测距仪数据模拟电压Vin为2.4V时,ADC的输出值是多少？该问题只需要根据题目中给出的公式：  
![ed5746b5e4534fcf810b9c3ff398b041.jpg][]  
在参考电压为3.3V时，带入计算即可，需要注意的是按照题目要求要给出十进制的结果。  
  
【问题3】  
125.6厘米  
  
该题目也只需要使用题目中给出的公式进行计算即可：  
![94d500a510bb4d90930a2185a45bfd0d.jpg][]  
其中，半径r=5cm,结合题目中给出的霍尔传感器输出564个脉冲（表示为n0), 此时nx为2256,只需要带入公式即可得到需要的距离数值。  
  
【问题4】  
(1)C  
(2)G  
(3)I  
(4)M  
  
本问题需要仔细分析题目中给出的两部分流程说明：  
1. 陀螺仪和STM32之间还有一个信号线（STM32的GPI09）和陀螺仪芯片复位线（STM32的GPI08,低电平为复位，高电平为非复位）。  
2. 在STM32通过IIC接口获取陀螺仪数据前，需要先对陀螺仪复位并查询信号线的有效性（GPI09高为有效，低为无效），有效时再通过IIC接口读取陀螺仪的数据。  
按照题目中给出的流程说明，在对应流程图中只要选择对应的GPIO管脚的配置或者检查即可。  


## 第3题 ##

【问题1】  
(1)D  
(2)B  
(3)C  
  
在嵌入式软件测试过程中，大部分嵌入式软件无人机界面，测试人员不能对软件进行直观的理解，必须通过理解软件需求和算法，运用测试用例设计方法进行基于需求的测试用例设计，而且需要保证测试用例的充分性。  
本题主要考查软件测试的一些基本概念和方法在测试实践中的应用。要求考生认真阅读题目所给的软件需求和设计算法信息，结合嵌入式软件测试的基本概念和测试用例设计要求，在此嵌入式软件测试中进行实际应用。  
本问题主要考查考生理解软件需求信息的能力，能依据软件需求信息画出软件流程。  
从题干给定的需求信息服务端接收反馈信息中，第1条描述内容为“1.第一次解析判断反馈信息类型是否正确。如果正确继续执行2,否则执行3。”故空（1）的内容应该在第2条描述中；空（2）的内容应该在第3条描述中。  
第2条描述内容为“2.第二次解析判断反馈信息内容是否正确如果正确执行4, 否则执行3。”从第2条内容可知，空（1）的内容应该为反馈内容是否正确；空（3）的内容应该在第4条描述中；同时再次确认空(2)的内容在第3条内容描述。  
第3条描述内容为“3.调用错误信息处理函数后执行4。”从第3条内容可知，空（2）的内容应该为错误信息处理；同时再次确认空(3)的内容在第4条内容描述。  
第4条描述内容为“4.将反馈信息存入数据库。”从第4条内容可知，空(3)的内容应该为信息存入数据库。  
根据以上分析，完整流程图如3-2所示。  
![4bde9104af214f6bb7d94743d2484f64.jpg][]  
  
【问题2】  
(1)3  
(2)3  
  
本问题主要考查对语句覆盖和分支覆盖概念的掌握以及实际应用。  
语句覆盖要求设计适当数量的测试用例，运行被测程序，使得程序中每一条语句至少被运行一遍，语句覆盖在测试中主要发现错误语句。  
分支覆盖要求设计适当数量的测试用例，运行被测程序，使得程序中每个真值分支和假值分支至少执行一次，分支覆盖也称判定覆盖。  
按照上述语句覆盖要求，语句覆盖就要使得问题2中的所有语句执行一次，问题2中有三个语句块，如下所示。  
![279e9b8678eb49e6a4540dbd2c6c267d.jpg][]  
故为了使问题2中的三个语句块各执行一次，最少需要3个测试用例来覆盖。  
按照上述分支覆盖要求，分支覆盖要使得程序中每个真值分支和假值分支至少执行一次。对问题2中的判断条件进行分析，有两个判断条件，需要分别取每个判断的真值分支和假值分支，即从理论上需要4个测试用例来满足覆盖要求。但是，由于第一个判断的真分支中包含了第二个判断条件的真假分支，当满足第一个判断的真分支时，同时可满足第二个判断条件的真或假分支，可减少一个测试用例，故问题2最少需要3个测试用例来满足分支覆盖要求。  
  
【问题3】  
(1)报告信息类型不正确/错误  
(2)报告信息内容不正确/错误  
(3)正确  
(4)不正确/错误  
(5)典型类型3  
  
为了测试数据库收集服务型智能扫地机器人反馈信息软件的功能，就要依据题目说 明中对数据库收集服务型智能扫地机器人反馈信息软件的具体功能描述，进行测试用例 的设计。此题考查测试用例的设计能力，主要包括输入数据的设计，及输入数据所对应的预期输出的确定，特别需要考虑测试用例的充分性。  
序号1，输入为反馈类型不正确，依据服务端接收反馈信息第1条设计说明，软件应进行错误处理，并将错误信息存入数据库。从设计说明中不能直接看出对反馈类型不正确的具体错误处理。但在进行此类问题时，应该参考其他给定全部内容的测试用例。 比如序号2中，当输入为反馈类型和内容均不正确，其对应输出为报告信息类型和内容均不正确，错误信息存入数据库。从第1条设计说明分析，软件也是进行错误处理，并将错误信息存入数据库。这样，从序号2的具体错误处理中就可推断出序号1的输入为反馈类型不正确时，具体错误处理为报告信息类型不正确或错误。  
序号3,输入为反馈类型正确，反馈内容不正确，依据服务端接收反馈信息第1条和第2条设计说明，软件应进行错误处理，并将错误信息存入数据库。从设计说明中不能直接看出对反馈内容不正确的具体错误处理。但是类比序号2的具体错误处理，可推断出序号3的输入为反馈类型正确，反馈内容不正确时，具体错误处理为报告信息内容不正确或错误。  
序号5,预期输出为典型类型1信息存入数据库，由于是典型类型1信息，可推断出此信息类型一定正确；并且预期输出中没有进行错误处理，可推断出此典型类型1信息内容正确，依据服务端接收反馈信息第1条和第2条设计说明，序号5用例的输入应该为内容正确的典型类型1信息。  
序号6,预期输出为报告典型类型2信息内容错误，错误信息存入数据库，由于是典型类型2信息，可推断出此信息类型一定正确；由于预期输出中报告了典型类型2信息内容错误，故可推断出此典型类型2信息内容不正确或错误，依据服务端接收反馈信息第1条和第2条设计说明，序号6用例的输入应为内容不正确或错误的典型类型2信息。  
序号7,输入为内容正确的典型类型3信息，由于是典型类型3信息，可推断出此信息类型一定正确；而且输入为内容正确的典型类型3信息，依据服务端接收反馈信息第1条和第2条设计说明，序号7用例输出为将典型类型3信息存入数据库。  


## 第4题 ##

【问题1】  
(1)0x70  
(2)0xFF  
(3)0x1或者1  
(4)0x7F  
(5)0x1或者1  
  
本题考查嵌入式计算机相关的基础知识及应用。  
触摸屏通过串行通信协议向主机传送数据报文。常用的串行协议包括RS-232、 RS-422和RS-485等。尽管串行通信速度较慢，但是串口可以在使用一根线发送数据的同时用另一根线接收数据。  
串口通信协议是指规定了数据包的内容，内容包含了起始位、主体数据、校验位及停止位，双方需要约定一致的数据包格式才能正常收发数据的有关规范。文中定义了串行数据报文格式，分别是触摸笔的状态、X轴坐标低字节、X轴坐标高字节、Y轴坐标低字节、Y轴坐标高字节。当触摸笔在触摸板中心位置按下时，触摸笔的状态是0x70, X轴坐标是511 (即0xlFF), Y轴坐标是383 (即0x17F)。由于数据报文按照小端字节顺序发送，所以X轴坐标低字节是0xFF、X轴坐标高字节是0x1、Y轴坐标低字节是0x7F、Y轴坐标高字节是0x1。  
  
【问题2】  
(1)设备中断使能  
(2)接收器0有数据  
(3)接收器1有数据  
(4)接收器0有数据  
(5)清除中断标识  
  
一般CPU和外部设备之间的数据传输有查询和中断两种方式。从查询式的传输过程可以看出，它的优点是硬件开销小，使用起来比较简单。但在此方式下，CPU要不断地查询外设的状态，当外设未准备好时，CPU就只能循环等待，不能执行其他程序，这样就浪费了 CPU的大量时间，降低了主机的利用率。为了解决这个矛盾，提出了中断传送方式，即当CPU进行主程序操作时，外设的数据已存入输入端口的数据寄存器，或端口的数据输出寄存器已空，由外设通过接口电路向CPU发出中断请求信号，CPU在满足 一定的条件下，暂停执行当前正在执行的主程序，转入执行相应能够进行输入/输出操作的子程序，待输入/输出操作执行完毕之后CPU即返回继续执行原来被中断的主程序。 这样CPU就避免了把大量时间耗费在等待、查询状态信号的操作上，使其工作效率得以大大地提高。能够向CPU发出中断请求的设备或事件称为中断源。而对其的处理方式即中断处理。  
当CPU (中央处理器）执行一条现行指令的时候，如果外设向CPU发出中断请求，  
那么CPU在满足响应的情况下，将发出中断响应信号，与此同时关闭中断，表示CPU不再受理另外一个设备的中断。这时，CPU将寻找中断请求源是哪一个设备，并保存CPU自己的程序计数器(PC)的内容。然后，它将转移到处理该中断源的中断服务程序。CPU在保存现场信息、设备服务（如交换数据）以后，将恢复现场信息。在这些动作完成以后，开放中断，并返回原来被中断的主程序的下一条指令。  
当中断控制器的输入不够多时，使用共享中断是很有必要的。典型的外部通用异步收发器（UART)，它只有一个中断输出，为不同的内部中断资源所共享，比如：接受中断和发送中断。这些中断在中断控制器内部用“或方式”有效地连接到一块了。  
使用共享中断时，必须要考虑的是：当两个或更多的中断信号同时产生或相继产生时，会出现什么样的状况？如果不能很好处理的话，就有可能丢失中断信号以及锁定中断线。共享边缘触发中断比较复杂。如果两个中断信号同时产生或相继产生，中断控制器就会只收到一个中断信号。要避免丢失中断信号，中断服务程序必须在离开当前命令行外壳之前检查所有中断资源。  
共享中断的最简单方式，就是使用电平触发中断类型。这种方式很安全，例如，如果两个中断请求同时要求中断服务，只能处理其中一个，这时中断线不会锁住，仍然能有效工作。而另一个中断请求会照常产生，等待处理。  
  
【问题3】  
1.互斥操作用来保证共享数据操作的完整性。通过互斥锁保证任一时刻只能有一个应用访问共享对象。  
2. (1)bReadLock为真或bReadLock==TRUE  
(2)bReadLock=TRUE或等效形式  
(3)bReadLock=FALSE或等效形式  
  
(1) 在编程中引入了对象互斥的概念，来保证共享数据操作的完整性。每个对象都对应于一个可称为“互斥锁”的标记，这个标记用来保证在任一时刻，只能有一个线程访问该对象。(2) 在多任务操作系统中，同时运行的多个任务可能都需要使用同一种资源。互斥锁（mutex)是一种简单的加锁的方法来控制对共享资源的访问，互斥锁只有两种状态， 即上锁(lock)和解锁（unlock）。  
互斥锁的特点有：原子性，把一个互斥量锁定为一个原子操作，这意味着操作系统保证了如果一个线程锁定了一个互斥量，没有其他线程在同一时间可以成功锁定这个互斥量；唯一性，如果一个线程锁定了一个互斥量，在它解除锁定之前，没有其他线程可以锁定这个互斥量；非繁忙等待，如果一个线程己经锁定了一个互斥量，第二个线程又试图去锁定这个互斥量，则第二个线程将被挂起（不占用任何CPU资源），直到第一个线程解除对这个互斥量的锁定为止，第二个线程则被唤醒并继续执行，同时锁定这个互斥量。  
互斥锁的操作流程如下：  
1.在访问共享资源后临界区域前，对互斥锁进行加锁；  
2.在访问完成后释放互斥锁导上的锁；  
3.对互斥锁进行加锁后，任何其他试图再次对互斥锁加锁的线程将会被阻塞，直到锁被释放。  


## 第5题 ##

【问题1】  
(1)a= a | BIT3 或者 a|=BIT3  
(2)a= a & -BIT3 或者 a =-BIT3  
  
本题考查嵌入式程序设计能力。  
位操作是程序中对位模式按位进行的一元或二元操作。位运算符有取反、按位或、 按位异或、按位与、移位等。  
(1)取反（NOT)。  
取反是一元运算符，对一个二进制数的每一位执行逻辑反操作。使数字1成为0, 0 成为1。例如：NOT0111 (十进制7) = 1000 (十进制8)。  
在C程序语言中，取反操作符用波浪线"~”表示。值得注意的是此操作符与“逻辑非(!)”操作符不同，“逻辑非”并不是一个位操作，将非零值转化为0。  
(2)按位或（OR）。  
按位或处理两个长度相同的二进制数，两个相应的二进位中只要有一个为1,该位的结果值为1。例如0101 (十进制5) OR 0011 (十进制3) =0111 (十进制7)。  
在C语言中，按位或操作符是"|"。这一操作符需要与逻辑按位或运算符（||)区别开来。按位或能够将每一位看作标志；在二进制数中的每一位可以表示不同的布尔变量。 应用按位或操作可以将二进制数的某一位设为1。例如0010 (十进制2)能够看作包含4个标志的组合。第1，2, 4标志为0;第3个标志为1。利用按位或可以将第1个标志设置为1，而其他标志不变。0010 (十进制2) OR 1000 (十进制8) =1010 (十进制10)，这一技巧通常用来保存程序中的大量布尔变量。  
(3)按位异或（XOR）。  
按位异或运算，对等长二进制模式按位或二进制数的每一位执行逻辑按位异或操作，操作的结果是如果某位不同则该位为1，否则该位为0,例如0101 XOR 0011 =0110。  
在C语言中，按位异或运算符是汇编语言的程序员们有时使用按位异或运算作为将寄存器的值设为0的捷径。用值的自身对其执行按位异或运算将得到0。并且在许多架构中，与直接加载0值并将它保存到寄存器相比，按位异或运算需要较少的中央处理单元时钟周期。  
按位异或也可以用于在比特集合中切换标志。给出一个比特模式，0010，第一和第三位能够通过按位异或运算使用同时切换。0010 XOR 1010 = 1000,这一技巧可用于操作表示布尔变量的比特模式。  
(4)按位与（AND）。  
按位与处理两个长度相同的二进制数，两个相应的二进位都为1，该位的结果值才为1，否则为0。例如：0101 AND 0011=0001。  
在C语言中，按位与用表示。  
(5)移位。  
移位是一个二元运算符，用来将一个二进制数中的每一位全部都向一个方向移动指 定位数，溢出的部分将被舍弃，而空缺的部分填入一定的值。  
在C语言中，左移使用两个小于符号"&lt;&lt;”表示，右移使用两个大于符号'&gt;&gt;”表示。  
  
【问题2】  
回答以下4项中任意3项（意思相近即可）。  
(1)中断程序的返回值。中断程序中一般不能返回一个值。  
(2)中断程序参数。中断程序中一般不能传递参数。  
(3)浮点运算。中断程序应该是短而有效率的，一般在中断程序上下文切换时不保存浮点寄存器，尽量不要在中断程序中做浮点运算。  
(4)printf()—般是阻塞性调用，尽量不要在中断程序中调用阻塞性服务。  
  
中断是指计算机运行过程中，出现某些意外情况需主机干预时，CPU能自动停止正在运行的程序并转入处理新情况的程序，处理完毕后又返回原被暂停的程序继续运行。 按照事件发生的顺序，中断过程包括以下步骤：  
(1)中断源发出中断请求；  
(2)判断当前处理机是否允许中断和该中断源是否被屏蔽；  
(3)优先权排队；  
(4)处理机执行完当前指令或当前指令无法执行完，则立即停止当前程序，保护断点地址和处理机当前状态，转入相应的中断服务程序；  
(5)执行中断服务程序；  
(6)恢复被保护的状态，执行“中断返回”指令回到被中断的程序或转入其他程序。中断服务程序应该遵循短而有效这一原则，所以编写中断服务程序需要遵守以下的一些基本原则：  
(1)中断服务程序中一般不能返回一个有效值，应该将返回类型定义为void;  
(2)中断服务程序中一般不能传递参数，中断服务程序的参数列表应为void;  
(3)中断服务程序上下文切换时不保存浮点寄存器，所以不要在中断程序中做浮点运算；  
(4)中断服务程序中不要调用阻塞性服务，如malloc、printf等。  
  
【问题3】  
(1)x  
(2)s  
(3)q-&gt;next或p-&gt;next  
(4)s  
(5)q  
  
链表是使用指针进行构造的列表，因为链表是由一个个结点组装起来的，其中每个结点都有指针成员变量指向列表中的下一个结点。一般用head指针指向第一个结点（称为表头结点），链表终止于最后一个指向NULL的指针。  
单向链表（单链表）是链表的一种，其特点是链表的链接方向是单向的，对链表的访问要从头部开始进行顺序读取。带有头结点的单向链表如图5-1所示，具有以下优点：  
(1)所有的链表都要有个头指针first,带头结点的链表的头指针指向的是头结点，头结点的指针域指向首元结点，不带头结点的头指针直接指向首元结点。  
(2)在删除和插入操作中，无论删除和插入的位置如何，带头结点的链表不需要修改头指针的值，而不带头结点的有时候需要修改头指针。在清空操作中，带头结点的保留头结点，而不带头结点的要销毁。  
(3)在结构上，带头结点的单链表无论是否为空，均含有一个头结点，不带头结点的单链表不含头结点。  
(4)在操作上，带头结点的单链表的初始化为申请一个头结点。无论插入或删除的位置是第一个结点还是其他结点，算法步骤都相同。对于不带头结点的单链表，其算法步骤要分别考虑插入或删除的位置是第一个结点还是其他结点。  
![1ef816de83bd4139a5b9df25c3ae6b27.jpg][]  
单链表为空时，带头结点单链表的头指针就指向头结点（其指针域为NULL）,而不带头结点的单链表头指针为NULL。同时为了方便单链表的特殊操作，插入在表头或者删除第一个结点时，保持了单链表操作的统一性。单链表加上头结点之后，无论单链表是否为空，头指针始终指向头结点，因此空表和非空表的处理也统一了，方便了单链表的操作，也减少了程序的复杂性和出现bug的机会。  



[ed5746b5e4534fcf810b9c3ff398b041.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/ed5746b5e4534fcf810b9c3ff398b041.jpg
[94d500a510bb4d90930a2185a45bfd0d.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第2题/94d500a510bb4d90930a2185a45bfd0d.jpg
[4bde9104af214f6bb7d94743d2484f64.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/4bde9104af214f6bb7d94743d2484f64.jpg
[279e9b8678eb49e6a4540dbd2c6c267d.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第3题/279e9b8678eb49e6a4540dbd2c6c267d.jpg
[1ef816de83bd4139a5b9df25c3ae6b27.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/1ef816de83bd4139a5b9df25c3ae6b27.jpg
