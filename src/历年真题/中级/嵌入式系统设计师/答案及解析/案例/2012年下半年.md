---  
title: 2012年下半年  
# icon: gears  
order: 997  
category:  
- 历年真题  
tag:  
- 真题  
  
# navbar: false  
# sidebar: false  
  
# breadcrumb: false  
# pageInfo: false  
# contributors: false  
# editLink: false  
# lastUpdated: false  
# prev: false  
# next: false  
comment: false  
# footer: false  
  
# backtotop: false  
---  
## 第1题 ##

【问题1】  
(1)RXD和TXD（或者TXD和RXD）  
(2)RTS和CTS（或者CTS和RTS）  
(3)993。  
  
本题考查嵌入式系统设计，涉及嵌入式软件和硬件基础知识的应用。  
本题主要考查嵌入式系统软硬件协同设计中串口RS232的基本软硬件应用知识。  
在RS-232标准中，字符是以将比特串一个接一个的串行（serial）方式传输，优点是传输线少，配线简单，传送距离可以较远。最常用的编码格式是异步起停（asynchronousstart-stop）格式，它使用一个起始比特后面紧跟7或8个数据比特（bit），然后是可选的奇偶校验比特，最后是一或两个停止比特。所以发送一个字符至少需要10比特，带来的一个好的效果是使用全部的传输速率，发送信号的速率以10划分。  
RS-232设计之初是用来连接调制解调器做传输之用，也因此它的脚位意义通常也和调制解调器传输有关。RS-232的设备可以分为数据终端设备（DTE，Data Terminal Equipment，Forexample，PC）和数据通信设备（DCE，Data Communication Equipment）两类，这种分类定义了不同的线路用来发送和接受信号。一般来说，计算机和终端设备有DTE连接器，调制解调器和打印机有DCE连接器。使用中采用配线分接器测试连接，或者用试误法来判断电缆是否工作，常常需要参考相关的文件说明。RS-232指定了20个不同的信号连接，由25个D-sub（微型D类）管脚构成的DB-25连接器。很多设备只是用了其中的一小部分管脚，出于节省资金和空间的考虑不少机器采用较小的连接器，特别是9管脚的D-sub或者是DB-9型连接器广泛使用在绝大多数PC机和其他许多设备上。DB-25和DB-9型的连接器在大部分设备上是雌型，但不是所有的都是这样。  
在使用RS232进行数据传输时，RXD和TXD管脚被用来进行数据的接收和发送，RS232的流控方式包括无流控，软件流控和硬件流控三种。无流控是指没有流控功能。软件流控也称之为XON/XOFF流控，使用控制字符XON、XOFF来实现。在RS232数据通信过程中，如果发送方收到XOFF字符则停止发送数据，反之如果收到XON字符则重新开始发送数据。XON—般定义为十六进制数0x11，XOFF为十六进制数0x13。硬件流控又分为DSR/DTR流控和CTS/RTS流控。硬件流控是通过硬件的高低电平来通知发送方，接收方的缓冲区是否快满了。CTS/RTS流控时，RS232（DB9）的8引脚为RTS，7引脚为CTS。DSR/DTR流控时，RS232CDB9）的6引脚为DSR，4引脚为DTR。  
在使用RS232进行数据传送时，需要注意其配置方式，包括流控位宽，起始位宽等。在该题目中，数据位宽为8bit，停止位为lbit，无别的流控位，因此，每个字节传输需要的位宽为9bit，按照9600bps的速率进行传输时，每个字节需要的时间为9/9600=0.9375ms，因此传输4字节需要的时间为4×0.9375ms=3.75ms。在进行100次的传输中，每隔10ms传输一次，又由于同时忽略了其他调度时间，由于3.75小于10，可知，在每10ms传输一次的过程中肯定是可以将对应的4字节数据传输完毕。因此，在100次的传输中，前99次传输需要的时间是99×10ms=990ms，最后一次也就是第100次传输消耗的时间为3.75ms，因此，总共需要的时间为990ms+3.75ms=993.75ms。  
  
【问题2】  
(1)!（\*Mutex\[0\]）或者\*Mutex\[0\]==0x00或者\*Mutex\[0\]=0  
(2)\*Mutex\[0\]=0x00或者\*Mutex\[0\]=0  
(3)len=Read—Buffer（1，Data）  
  
本题考查嵌入式系统中的C程序设计，要求考生正确使用软件锁。  
在本题中主处理机模块与信号处理模块间通过双端口存储器进行数据交换。由信号处理模块发送数据，主处理机模块接收数据。  
在本题中给出了很多假设条件，如将双端口存储器空间划分为两个缓冲区，两个缓冲区分别交替地接收信号处理机传输来的最新数据；再如假设双端口存储器中不提供硬件信号量，两个缓冲区间的互斥操作由软件标记实现，软件对双端口存储器的单次操作（读写一个字的操作）为原子操作。同时本题也给出了软件程序的架构，BufferFlag为缓冲区有无新数据的标志，Mutex为软件锁。  
在数据处理模块端的初始化程序INIT\_PPC()中，BufferFlag和Mutex被分配在缓冲区的前端，并被初始化为无数据和未锁定。  
信号处理模块写数据程序DSP\_Write\_Data()中，初始化与数据处理模块端类似，同样以BufferFlag表示与数据处理模块端的对应的标志，即两端操作的是相同的池址空间；同样Mutex也表示与数据处理模块端的对应的软件锁，即两端操作的是相同的池址空间。信号处理模块写数据程序DSP\_Write\_Data()是一个无限循环程序，在等待信号处理模块产生新的数据，之后就将数据写入双缓冲Data中。具体过程如下：  
1)循环等待新数据；  
2)如果缓冲区0未被锁定，则：  
(1)缓冲区0加锁；  
(2)写数据到缓冲区0；  
(3)标记缓冲区0未有数据；  
(4)缓冲区0解锁。  
3)如果缓冲区0已被锁定，则对缓冲区1重复上述步骤。  
在数据处理模块端读数据程序PPC\_Read\_Data()首先判断双缓冲有无数据，如果缓冲区0有数据，再判断缓冲区0是否加锁，如果未加锁，则先加锁，再读数据，再解锁。对缓冲区1同样如此处理。  
  
【问题3】  
硬件方法和软件方法都可以。  
  
在一般的按键设计中，通常的按键所用开关为机械弹性开关。由于机械触电的弹性作用，按键在闭合及断开的瞬间均伴随有一连串的抖动。键抖动会引起一次按键被误读多次。为了确保CPU对键的一次闭合仅作一次处理，必须去除抖动。消除抖动的方法有硬件和软件两种方法。硬件方法常用专用的去抖芯片或者自己组装一个双稳态消抖电路，就是两个与非门构成的RS触发器。  
软件方法是当检测出键闭合后执行一个10ms~20ms的延时程序，再一次检测键的状态，如仍保持闭合状态，则确认真正有键按下。  
硬件方法和软件方法都可以消除抖动问题。  


## 第2题 ##

【问题1】  
（1）0000H-1FFFH  （2） 2000H-3FFFH  
（3）E000H-FFFFH  （4）RAM5  
  
本题考查嵌入式处理器硬件应用和设计。  
在该嵌入式系统设计中，使用8片RAM进行64KRAM的外部存储器扩展。该CPU共有16根地址线，8根数据线。在设计中，各个RAM的片选信号依次连接在74LS138的八位输出信号上，74LS138的地址选择线连接在CPU的地址线A15，A14，A13上，因此，对8个RAM的选择依赖于CPU的地址线A15，A14和A13的电平。根据74LS138可知，对于RAMO~RAM7的8个RAM而言，依次对应的A15，A14，A13的值为000，001，010，011，100，101，110，111。  
同时，由于每个RAM的空间大小为8K，占据的地址线为A0~A12，因此，可以知道各个RAM的地址范围依次是：  
RAM0:0000H-1FFFH  
RAM1:2000H-3FFFH  
RAM2:4000H-5FFFH  
RAM3:6000H-7FFFH  
RAM4:8000H-9FFFH  
RAM5:A000H-BFFFH  
RAM6:C000H-DFFFH  
RAM7:E000H-FFFFH  
  
【问题2】  
（1）RAM6  
（2）D  
  
由问题1分析可知，对应COOOH地址的片选为RAM6，也就是说RAM6—直处于被选通状态。  
从原理图中的连接情况可以看出，CS片选只有一直是低电平状态下才可以有效。从原理图中可以看出，WE以及MREQ信号都是低电平有效，同时由题目中知道，该管脚为片内上拉到电源，因此如果该CS—直有效，可能潜在的原因包括与WE信号或者MREQ信号接错，或者是直接与地短接。  
  
【问题3】  
A、B、D  
  
如果A15与CPU断开，并且接到高电平，则说明A15—直为高，那么A15，A14，A13取值的可能范围为100，101，110，111。也就是说，此时存储器的寻址范围只能是A15=l的存储地址空间，与之前的8片RAM相比，现在只能寻址到4片RAM因此先前的64KB空间中只能寻址到高32KB的地址空间。同时，由于高位A15—直为1，因此，如果按照用户期望访问总共64KB空间的低32KB空间时，会错误的访问致高32KB地址空间。  


## 第3题 ##

【问题1】  
所谓抢占式，指按照一定的规则（例如优先数），在每次中断处理结束后进行调度，选择条件最优的进程投入运行；  
所谓非抢占式调度是指，进程一旦被调度，就将一直运行，除非由于自葑原因不能运行。  
  
本题考查操作系统中进程、线程以及进程调度等方面的应用知识。  
在操作系统初始化时，创建所有进程，进程运行过程中，也可创建子进程&lt;进程调度算法很多，归结为两类，即抢占（剥夺）式和非抢占式。抢占式调度策略，指按照一定的规则（例如优先数），在每次中断处理结束后进行调度，选择条件最优的进程投入运行。非抢占式调度是指，进程一旦被调度，就将一直运行，除非由于自身原因不能运行。  
  
【问题2】  
B、D、E  
  
在多进程多线程系统中，处理机调度的最小单位是线程，而不是进程。  
线程可定义为进程内的一个执行单位，或者定义为进程内的一个可调度的实体。  
进程由一个或一组线程组成；一个线程属于且仅属于一个进程。  
进程处于可执行状态时，它的线程可以被调度执行，而处于阻塞状态时，其所有线程均不能执行。  
进程的多个线程共享进程的地址空间。  
  
【问题3】  
运行状态特点：进程占有CPU，正在运行其程序时处于运行态。  
就绪状态特点：进程具备了一切运行的条件，但由于CPU正在运行别的进程而使它不能运行时，处于就绪态。  
等待状态特点：进程由于自身原因必须等待某个条件的具备，否则不能继续运行时，处于等待态。  
(a)某个运行条件不能满足（例如等待资源）；  
(b)等待条件消失（例如等待的资源已经获得满足）；  
(c)进程自愿放弃CPU使用权，或被强制剥夺CPU使用权；  
(d)就绪队列中的进程获得CPU使用权。  
  
图3-1给出了进程三个状态：运行、就绪、等待之间的切换关系，这三种状态的特点如下：①进程拥有CPU，正在运行其程序时处于运行态；②具备了一切运行的条件，但由于CPU正在运行别的进程而使它不能运行时，进程处于就绪态；③由于自身原因必须等待某个条件的具备，否则不能继续运行时，进程处于等待态。  
对于正在运行的进程，当某个运行条件不能满足，例如等待某个资源时，便将CPU让出而转入等待态；当等待条件消失，例如等待的资源已经获得满足，进程从等待态进入就绪态等待调度；处于运行态的进程，如自愿放弃CPU，或被高优先级进程强制剥夺CPU使用权后，从运行态转入就绪态；控制权被释放后，CPU将从就绪队列中选取排在最前面的进程投入运行。就绪队列中获得CPU使用权的进程，便转入运行态。  
三种状态的特点如下。  
(1)运行态：进程占有CPU，正在运行其程序时处于运行态；  
(2)就绪态：进程具备了一切运行的条件，但由于CPU正在运行别的进程而使它不能运行时，处于就绪态；  
(3)等待态：进程由于自身原因必须等待某个条件的具备，否则不能继续运行时，处于等待态。  
三种状态之间的切换条件分别为：  
(1)某个运行条件不能满足（例如等待资源）；  
(2)等待条件消失（例如等待的资源已经获得满足）；  
(3)进程自愿放弃CPU使用权，或被强制剥夺CPU使用权；  
(4)就绪队列中的进程获得CPU使用权。  


## 第4题 ##

【问题1】  
(1)&gt;或大于  
(2)修改定时器的计数值（或重新设定看门狗的定时周期）  
(3)溢出（或超时）  
(4)系统复位中断  
  
本题考査嵌入式系统中看门狗的应用以及驱动程序的设计。  
看门狗电路是一个独立的定时器，有一个定时器控制寄存器，可以设定时间。当系统工作正常时，应用程序在到达时间之前要置位（喂狗），表明程序正常运行，如果没有置的话，就认为是程序跑飞，看门狗电路发出RESET指令，迫使系统自动复位而重新运行程序。看门狗的主要作用是防止程序跑飞或死锁。  
所以，当程序完整运行的周期是tp，看门狗的定时周期为tw时，要求tw大于tp，在程序运行过程中需要定时修改定时器的计数值（俗称“喂狗”），只要程序正常运行，定时器就不会溢出。若由于干扰等原因使系统不能在tp时刻修改定时器的计数值，定时器将在tw时刻溢出（或超时），引发系统复位中断，使系统得以重新运行。  
  
【问题2】  
(1)类型修饰符，防止编译器对代码进行优化  
(2)设置看门狗的分频因素为1/128、使能中断产生  
(3)使能看门狗定时器  
(4)统一编址  
(5)小端方式  
  
(1)在驱动程序中对寄存器操作时，经常使用volatile关键字，作用是确保本条指令不会因编译器的优化而省略，且要求每次直接读值。  
(2)在程序第7行，对看门狗定时器控制寄存器（WTCON）设置了三个属性值，通过查表4-4中WTCON的相应标识位，可以得知对预装比例值\[15:8\]、时钟分频因素\[4:3\]、中断使能\[2\]进行了设置。  
(3)在程序第10行，也对看门狗定时器控制寄存器（WTCON）进行了设置，通过查表4-4中WTCON的相应标识位，可以得知使能看门狗定时器\[5\]。  
(4)从程序的第2、3、4行可以看出，对寄存器的操作，采用存储器指令进行，所以，该系统结构采用的是内存和外设统一编址的方式。  
(5)从程序第7行、第10行对看门狗定时器控制寄存器的操作，结合表4-4中对应寄存器的位定义可以看出，该系统的位序是小端方式。  


## 第5题 ##

【问题1】  
李工的问题：形参不能作为函数的输出参数使用。  
对应的swap函数修改如下：  
![e7dbe0f9c1e84d8a89c64fff169ae5e4.jpg][]  
![c77f80fb1c3c468abdbe115275a8cd22.jpg][]  
  
本题考查嵌入式C/C++编程知识与应用。  
函数swap采用值传递，虽然将形参x和y交换了，但是并不影响到实参，所以执行【程序1】后，打印出来的a=3，b=4;并没有完成数据交换。将值传递改成指针传递就可以了。  
对应的swap函数应修改如下：  
![e5e649f159d941b9ae53ba01f9de44c7.jpg][]  
![9ff02bf17d15476abb2b3139bb6b548e.jpg][]  
  
【问题2】  
(1)x!=NULL&&y!=NULL  
(2)x-&gt;itemid==y-&gt;itemid  
(3)x，&gt;un.data=y-&gt;un.data  
(4)Equalltem（x-&gt;un.link，y-&gt;un.link）;  
(5)Equalltem（x-&gt;nextltem，y-&gt;nextltem）;  
  
该段C语言程序是一段利用递归方法判别链表表示的两个数据结构是否相等的程序，若相等则返回值为1，否则返回为0。判别的准则是若两个链表的首指针相等，则相等；否则进行内部元素比较，元素中的itemid表示后面联合体un的有效性，itemid为0时，联合体un里面的data项有效，否则联合体un中的link项有效。该程序具体如下：  
如果x=y，则返回1，表示断定两个数据实际指向是同一地方，当然相等；  
如果x和y都不为空则继续，否则返回0；  
如果x-&gt;itemid=y-&gt;itemid，则继续，否则返回0；  
如果x-&gt;itemid=0，则若x-〉un.data=y-&gt;un.data，res=1，否则res=0；  
如果x-&gt;itemid不等于0，联合体un中的link项有效，递归调用Equalltem（x-&gt;un.link，y-&gt;un.link），继续判断；  
如果res=1，也就是x-〉un.data==y-&gt;un.data，则递归调用Equalltem（x-&gt;nextltem，y-&gt;nextltem），判断F一级链表；  
如果res=0，也就是x-&gt;un.data不等与y-〉un.data，则即可断定两个数据不相等，返回为0。  
  
【问题3】  
(1)对于\#include&lt;filename.h〉，编译器从工程指定路径搜索filename.h;  
对于\#include’’filename.h"，编译器从当前路径和工程指定路径搜索filenane.h;  
(2)C++语言支持函数重载，C语言不支持函数重载，函数被C++编译后在库中的名字与C语言不同。C++提供了C连接交换指定符号extern”C”来解决名字匹配问题。  
  
本题考查考生对预处理指令include的正确理解。对于\#include&lt;filename.h&gt;来说，编译器会从工程指定路径搜索filename.h文件；对于\#include"filename.h”来说，编译器会从当前路径和工程指定路径搜索filename.h文件。  
C++语言支持函数重载，C语言不支持函数重载，函数被C++编译后在库中的名字与C语言不同。为了C++程序中能够调用C程序，就需要C++提供C连接交换指定符号extern”C”来解决名字匹配问题。  



[e7dbe0f9c1e84d8a89c64fff169ae5e4.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/e7dbe0f9c1e84d8a89c64fff169ae5e4.jpg
[c77f80fb1c3c468abdbe115275a8cd22.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/c77f80fb1c3c468abdbe115275a8cd22.jpg
[e5e649f159d941b9ae53ba01f9de44c7.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/e5e649f159d941b9ae53ba01f9de44c7.jpg
[9ff02bf17d15476abb2b3139bb6b548e.jpg]: https://www.xkxxkx.cn/file/exam/software/嵌入式系统设计师/案例/第5题/9ff02bf17d15476abb2b3139bb6b548e.jpg
