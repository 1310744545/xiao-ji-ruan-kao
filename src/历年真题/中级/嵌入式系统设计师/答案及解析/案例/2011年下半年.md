---  
title: 2011年下半年  
# icon: gears  
order: 998  
category:  
- 历年真题  
tag:  
- 真题  
  
# navbar: false  
# sidebar: false  
  
# breadcrumb: false  
# pageInfo: false  
# contributors: false  
# editLink: false  
# lastUpdated: false  
# prev: false  
# next: false  
comment: false  
# footer: false  
  
# backtotop: false  
---  
## 第1题 ##

【问题1】  
(1) 5mV  
(2) 0x332，或818  
(3) 通过查询状态寄存器的对应状态位判断  
  
本题考查嵌入式系统设计基础知识和软件工程知识的应用，要开发完成一项嵌入式系统是一个较为复杂工程，涉及软件和硬件基础知识。  
A/D变换器的量化间隔为A/D变换器最低有效位所代表的是模拟电压值，当前A/D变换器的模拟电压最大为5.115V，表示A/D输出的最大值为3FFH，因此，A/D变换器的量化间隔为5.115V/3FFH=5mV。 1  
根据AID变换器的量化间隔，可以根据需要控制的模拟电压来计算出对应的数字值。按照题意，如果当前的阈值为4.092V，则可以计算出要产生中断时候配置的A/D变换器的比较寄存器的值为4.092V/5mV，即818或者0x332。  
一般嵌入式系统设计中，对于外部A/D变化报警事件的处理，可以采用査询方式，也可以采用中断方式。当采用查询方式来检查电源电压是否超过一定阈值或者低于一定阈值的事件时，需要首先设置A/D变换的比较寄存器的阈值，然后开启对应的控制字，最后应用程序通过不断查询状态寄存器中对应的标志位来判断是否有对应的事件发生。  
  
【问题2】  
李工的安排不合理。  
软件开发和软件测试不能为同一个人。  
一般情况下，每个软件配置项的软件需求分析、软件设计与编码、软件测试的人员需要分开，不能由一人全部完成，以确保软件的质量。  
  
按软件工程的要求，开发过程分为软件策划、软件需求分析、软件概要设计、软件详细设计、软件编码、软件测试（单元级、部件级、系统级）、验收交付等阶段。一般情况下，软件可以分解为若干软件配置项，由不同的人员完成，但对于同一软件配置项，软件开发和软件测试必须不能为同一个人，即不允许自己测试自己开发的软件；对于重要的软件，每个软件配置项的软件需求分析、软件设计与编码、软件测试的人员需要分开，不能由一人全部完成，以确保软件的质量。  
因此，李工的安排不合理，必须在软件策划中，将各阶段的人员分开，否则，软件开发计划和软件配置管理计划在评审时将不能通过。  
  
【问题3】  
有问题。  
(1) 数据结构定义有边界对齐问题；  
(2) 接收和发送端的处理程序没有对大小端转换进行处理。  
  
本题中，田工在发送和接收消息时采用的数据类型为FCSND\_DATA和FCRCV\_DATA,数据类型中有字符型、整型、短整型、字符数组；而发送端为信号处理模块，其处理器为专用的数字信号处理器DSP。接收端为数据处理模块，其处理器为PowerPC7447。在嵌入式系统中，C语言的编译器在专用的信号处理器DSP和POWCTPC7447很可能不同，不同的编译器对数据有边界的对齐处理会有不同的方式，不—定采用表1-1规定的组织方式。可能的情况是：  
(1) 两者都不是表1-1规定的内存组织方式；  
(2) 信号处理模块数据可能与数据处理模块的内存组织方式不同。  
解决办法为在数据结构设计中只用字符型和字符数组，不同其他类型数据。  
另外，题干中已经明确：PowerPC7447和DSP是32位处理器，内存按字节编址。  
PowerPC7447以大端方式（big\_endian)存储数据，DSP以小端方式（little\_endian)存储数据。因此，需要对大小端转换进行处理，在发送端或接收端都可以，而本题明显没进行大小端转换处理。  


## 第2题 ##

【问题1】  
(1)8000H  
(2)8001H  
(3)8002H  
  
从题中给出的电路图中可以看出，8255控制芯片的CS信号的有效电平为低电平。其对应的CS由嵌入式处理器地址线中的A15~A2通过“或门”进行控制，从这里可以看出，要使得8255的片选信号CS有效，必须使得A15为1，A14~A2都为0。  
由题中表2-1提供的端口访问控制表及电路图可知，如果要访问8255的PA口，必须使得Al、A0都为0,PB口访问时A1为0、A0为1，PC口访问时A1为1，A0为0。  
因此，结合8255的片选信号CS控制，以及Al、A0对于端口访问的控制，即可得到使用嵌入式处理器进行8255的PA、PB、PC口访问时的地址。  
  
【问题2】  
(1)将3AH立即数传送到A中  
(2)将3AH存储单元的内容传送到R4中  
  
立即数的传送指令和直接寻址指令是两种最基本的汇编指令。其中立即数的表示是在进制数前加\#号。  
  
【问题3】  
(1) \#09FH  
(2) @R0  
(3) 20H  
(4) \#09EH  
(5) R0  
  
由表2-2知道，对于中断使能控制的访问也就是设置该寄存器的对应位为1或者0,为1表示开启对应的中断控制，为0表示关闭对应的中断控制，按照对应的各个位来进行立即数配置即可进行各个中断的控制。  
程序中的空（2）处是表示使用寄存器寻址方式获取数据。空（3）处于中断程序的服务程序中，需要重复从20H中获取待打印的内容，使用直接寻址方式。空（4）是指使用“与指令”关闭对应的中断位。空（5）处为与入栈相对应的出栈操作。  


## 第3题 ##

【问题1】  
(1) 条件覆盖是指设计足够的测试用例，使得被测程序每一个判定中的每个条件的所有可能结果至少出现一次。  
(2) 路径覆盖是指设计足够的测试用例，使得被测程序中每条路径至少执行一次。  
  
【问题2】  
(1)④（路径覆盖）  
  
在结构测试中，根据覆盖目标的不同，可以分为语句覆盖、条件覆盖、判定覆盖（分支覆盖）和路径覆盖等。  
语句覆盖的含义是设计足够的测试用例，使得被测程序每一条语句至少被执行—次。  
判定覆盖（分支覆盖）的含义是设计足够的测试用例，运行被测程序，使得程序中每个判定的取真分支和取假分支至少执行一次。  
其中，路径覆盖是最强的覆盖准则。  
  
【问题3】  
(1) ⑤  
(2) ⑧  
(3) ⑦  
(4) ⑤  
(5) ⑧  
其中，第（1）、(2)题的答案顺序可互换，第（4）、（5）题的答案顺序可互换。  
  
为判定覆盖选取测试用例情形：对第一个判定选取测试用例组I和II,当用I覆盖判定的T分支时，不会走到第二个分支；当用II覆盖判定的F分支时，第二个判定需要另取一个测试用例组覆盖其t分支，此时取测试用例组in或iv即可。  
为条件覆盖选取测试用例情形：取测试用例组I、in和iv，就可以覆盖所有4个条件的取值。  
为路径覆盖选取测试用例情形：总共三条路径，需要三个测试用例，可选使各路径为t的测试用例。I、II、ni或I、II、iv均可。  


## 第4题 ##

【问题1】  
(1) 单级、或单级中断系统  
(2) 设备C，设备B，设备A。  
  
根据计算机系统对中断处理的策略不同。可分为单级中断系统和多级中断系统。  
单级中断系统是中断结构中最基本的形式。在单级中断系统中，所有的中断源都属于同一级，所有中断源触发排成一行。其优先次序是离CPU近的优先权高。当响应某一中断请求时，执行该中断源的中断服务程序。在此过程中，不允许其他中断源再打断中断服务子程序。即使优先权比它高的中断源也不能再打断。只有该中断服务程序执行完毕之后，才能响应其他中断。  
多级中断系统是指计算机系统中有相当多的中断源，根据各中断条件的轻重缓急程度不同而分成若干级别，每一中断级分配给一个优先权。一般说来，优先级高的中断级可以打断优先权低的中断服务程序，以程序嵌套方式进行工作。根据系统的配置不同，多级中断可分为一维多级中断和二维多级中断。  
本项目中王工设计的系统属于单级中断系统，设备A、设备B、设备C的中断优先级按照从高到低的次序排列为设备C设备B&gt;设备A。  
  
【问题2】  
(1) CPU关中断  
(2) 保存中断现场  
(3) 执行中断处理程序  
(4) 恢复现场  
(5) 开中断  
  
如果系统设计时不允许中断嵌套，当系统产生中断后，CPU响应中断的流程如下：  
a) CPU检查响应中断的条件是否满足；  
b) 如果CPU响应中断，则CPU先关中断；  
c) 保存中断现场，为了使中断处理程序不影响主程序的运行，要把发生中断时的任务上下文现场保存起来，当中断处理完成返回主程序时，CPU能够恢复主程序在中断前的状态，保证主程序的正确运行。  
a) 分析中断原因，根据中断向量得到中断处理程序入口地址；  
b) 执行中断处理程序；  
c) 退出中断，恢复现场；  
d) 开中断，CPU继续执行。  
如果系统设计时允许中断嵌套，那么CPU响应中断的流程比上述流程复杂一些。  
  
【问题3】  
(1) TA=3TDC+TS+Ta+TR  
(2) TB=2TDC+TS+Tb+TR  
(3) TC=TDC+TS+Tc+TR  
(4) f=1/T  
  
当设备A、设备B、设备C同时发出中断请求时，处理器按照优先级依次处理每个设备的中断请求。中断查询链中每个设备的延迟时间为TDC,设备A经过3个延迟，设备B经过2个延迟，设备C经过1个延迟，加上保存现场和恢复现场的时间，以及每个设备的中断服务程序时间，所以三个设备的中断处理时间分别为：  
TA=3TDC+TS+Ta+TR  
TB=2TDC+TS+Tb+TR  
TC=TDC+TS+Tc+TR  
如果处理三个设备所需要的总时间为T,那么本系统所设计的中断极限频率f=l/T。  
  
【问题4】  
(1) 用户进程或应用程序  
(2) 设备无关的系统软件或设备管理程序  
(3) 设备驱动程序  
(4) 中断处理程序  
  
嵌入式系统中多用I/O设备管理软件来管理外设。为了实现对硬件的抽象，提供统一的API接口，I/O设备管理软件一般分层设计。  
硬件之上为中断处理程序，负责处理与设备相关的各种异步事件，如发送完成、接收完成、总线错误等；上面一层为设备相关的驱动程序，负责设置硬件设备的寄存器，包括初始化、启动、关闭硬件设备，以及进行状态检査等工作；再上一层为设备无关的系统软件，即设备管理程序，实现对设备进行命名、保护、阻塞、缓存、分配等功能；最上面一层是应用程序，进行10调用。  


## 第5题 ##

【问题1】  
Sum=6  
  
可变参数函数的应用在嵌入式C程序设计中应用非常广泛。在X86平台下，参数在堆栈中的存放是按照由底向上进行存储的。因此，在该程序中，sum函数的第一个参数表示的是在该参数后面还包含有几个参数。在程序体中，使用第一个参数进行参数访问控制，参数的获取方式按照数组方法进行获取。因此，C代码1执行后，Sum的值为6。  
  
【问题2】  
1) static的作用：是将变量修饰成静态变量，静态变量的存储地址在整个程序的运行执行期间均保留，不会被别的变量占据。  
2) const的作用：是用于冻结一个变量，使其值在程序中不能被进一步改变。  
3) 不安全，有缺陷。  
4) 应对形参的有效性进行检查，应判形参dest、src指针是否为空，形参n是否大于0,还应保证dest所指向的内存空间不越界。  
  
在程序设计中，static变量和const变量的应用非常广泛。static变量表示将变量修饰为静态变量，其含义是指其对应的存储空间在整个程序的运行过程中都保持不变，不会像堆栈那样被重复使用。static即可以用来修饰局部变量，也可以修饰全局变量。  
一旦变量定义为是const，则其对应的值不能再被修改。在程序运行中，此变量的值就一直维持在其初始化时候的值。  
王工编写的这段程序不安全，存在严重的安全漏洞，具体的缺陷包括：  
(1) 对于指针参数的有效性没有进行任何判断，如果指针为NULL，这样访问存在严重的安全问题。  
(2) 参数n的有效性也没有进行判断，如果参数II对应的空间超过src所包含的空间，则函数得到的结果和期待的结果会有所偏差。同样，如果n对应的空间超过dest所包含的地址空间，则会造成程序的混乱，会将内存冲掉，可能导致灾难性后果。  
  
【问题3】  
(1) ptrl=ptrl-&gt;next  
(2) ptr2=ptr2-&gt;next  
(3) ptr2  
(4) temp2-&gt;next=tempi  
(5) temp3  
  
在单向链表中，对某元素的后继元素的访问只能通过结点中的next指针项来获取。按照题目要求，首先创建两个指针ptrl,ptr2,并且都指向链表头，然后ptrl向前走index步，这样ptrl和ptr2之间就间隔index个结点，然后ptrl和ptr2同时向前步进，当ptrl到达最后一个结点时，ptr2就是倒数第index个结点了。因此，对于第index个结点的查找，只需要移动ptrl和ptr2，最后ptr2返回的为倒数第index个结点。  

