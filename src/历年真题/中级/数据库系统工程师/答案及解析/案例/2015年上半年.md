---  
title: 2015年上半年  
# icon: gears  
order: 994  
category:  
- 历年真题  
tag:  
- 真题  
  
# navbar: false  
# sidebar: false  
  
# breadcrumb: false  
# pageInfo: false  
# contributors: false  
# editLink: false  
# lastUpdated: false  
# prev: false  
# next: false  
comment: false  
# footer: false  
  
# backtotop: false  
---  
## 第1题 ##

【问题1】  
E1：教师  
E2：学生  
  
本题考查采用结构化方法进行系统分析与设计，主要考查数据流图(DFD)的应用，是比较传统的题目，与往年相比考点类似，要求考生细心分析题目中所描述的内容。  
DFD是一种便于用户理解、分析系统数据流程的图形化建模工具。是系统逻辑模型的重要组成部分。上下文DFD(顶层DFD)通常用来确定系统边界，将待开发系统本身看作一个大的加工(处理)，然后根据谁为系统提供数据流，谁使用系统提供的数据流，确定外部实体。建模出的上下文DFD中只有唯一的一个加工和一些外部实体，以及这两者之间的输入输出数据流。在上下文确定的系统外部实体以及与外部实体的输入输出数据流的基础上，建模0层DFD,将上下文DFD中的加工进一步分解，成多个加工，识别这些加工的输入输出数据流，使得所有上下文DFD中的输入数据流，经过这些加工之后变换成上下文DFD的输出数据流。根据0层DFD的中加工的复杂程度进一步建模加工的内容。  
在建模分层DFD时，根据需求情况可以将数据存储在建模在不同层次的DFD中，注意要在绘制下层数据流图时要保持父图与子图平衡。父图中某加工的输入输出数据流必须与它的子图的输入输出数据流在数量和名字上相同，或者父图中的一个输入(或输出)数据流对应于子图中几个输入(或输出)数据流，而子图中组成这些数据流的数据项全体正好是父图中的这一个数据流。  
本问题考查上下文DFD,要求确定外部实体。考察系统的主要功能，不难发现，针对系统与考试有关的主要功能，涉及到教师和学生，系统管理员不在与考试有关的主要功能中涉及，另外没有提到其他与系统交互的外部实体。根据描述(1)中“教师制定试题等考试信息”等信息，描述(2)中“根据教师设定的考试信息，在考试有效时间内向学生显示考试说明和题目”，从而即可确定E1为“教师”实体，E2为“学生”实体。  
  
【问题2】  
D1：试题(表)或题目和答案(表) D2：学生信息(表) D3：考试信息(表) D4：解答结果(表)  
  
本问题要求确定0层数据流图中的数据存储。分析说明中和数据存储有关的描述，说明中(1)中“教师制定试题(题目和答案)，制定考试说明、考试时间和提醒时间等考试信息，录入参加考试的学生信息，并分别进行存储”，可知D1、D2和D3为试题、学生信息和考试信息，再从图1-2中流入D2的数据流名称“学生信息数据”，确定D2是学生信息，流入D1的数据流名称为“试题”，确定D1为试题，流入D3的数据流名称为考试信息，确定D3为考试信息。说明中(3)根据答案对接收到的解答数据进行处理，然后将解答结果进行存储，确定D4是解答结果。其他描述中对数据存储的使用更进多说明，进一步确定D1~~D4满足上述分析。  
  
【问题3】  
![8b64f5deba364760a2a813de0009cd75.jpg][]  
  
本问题要求补充缺失的数据流及其起点和终点。通过不同层的DFD以及说明中描述和图之间的对应关系加以确定。首先对照图1-1和图1-2的输入、输出数据流，发现数据流的数量和名称均相同，所以，需进一步考查说明中的功能描述和图1-1中的数据流的对应关系，以确定缺失的是加工之间还是加工与数据存储之间的数据流。  
说明(2)显示并接收解答，需要“根据教师设定的考试信息，在考试有效时间内向学生显示考试说明和题目”，对照图1-2可以看出，加工2缺少所要显示的题目的输入源，即缺失输入流“题目”，题目存储于数据存储试题中，因此，缺少的数据流为从题目(D1)到加工2显示并接收解答的题目。说明(3)处理解答，需要“根据答案对接收到的解答数据进行处理”，对照图1-2可以看出，加工3“处理解答”缺少输入流“答案”，而答案从说明(1)中可以看出是存储在试题(题目和答案)数据存储中(D1)，因此确定缺失的一条数据流“答案”，从D1或试题到加工3或处理解答。  
  
【问题4】  
![3433a65e08464243834ac8c7f096caee.jpg][]  
  
本问题针对建模分层DFD的时候的分解粒度。考查说明(6)发送通知中，“根据成绩报告数据，创建通知数据并将通知发送给学生；根据成绩单数据，创建通知数据并将通知发送给教师。”说明功能(6)发送通知包含创建通知并发送给学生或老师。在图1-2中建模为一个加工，完成的功能是依据不同的输入数据流创建通知，然后发送给相应的外部实体老师或学生，因此为了进一步清晰每个加工的职责，需对图1-2中原有加工6进行分解，分解为“创建通知”和“发送通知”。创建通知针对输入数据流“报告数据”和“成绩单数据”，这两条数据流保持原有的起点，终点即为创建通知。创建通知产生出“通知数据”。“通知数据”作为加工“发送通知”的输入流，进一步根据通知数据是针对哪个外部实体而发送“通知”给相应的学生或者教师。至此，对图1-2中原有加工6的分解完成。  


## 第2题 ##

【问题1】  
(a) REFERENCES EMP(Eno)  
(b) REFERENCES COMPANY(Cno)  
(c) CHECK(Salary&gt;=1500)  
(d) (Eno,Cno)  
  
本题考查SQL语句的应用。  
此类题目要求考生掌握SQL语句的基本语法和结构，认真阅读题目给出的关系模式，针对题目的要求具体分析并解答。本试题已经给出了3个关系模式，需要分析每个实体的属性特征及实体之间的联系，补充完整SQL语句。  
由题目说明可知，Eno和Cno两个属性组合是WORKS关系表的主键，所以在PRIMARYKEY后填的应该是(Eno,Cno)组合；Eno和Cno分别作为外键引用到EMP和COMPANY关系表的主键，因此需要用REFERENCES对这两个属性进行外键约束；由“工资不能低于1500元”的要求，可知需要限制账户余额属性值的范围，通过CHECK约束来实现。从上述分析可知，完整的SQL语句如下：  
![8f75680c46384a20acb69088e1d6974e.jpg][]  
  
【问题2】  
(1) (e) VIEWFemaleEMP(Eno,Ename,Cno,Cname,Salary)  
(f) EMP.Eno=WORKS.EnoANDCOMPANY.Cno=WORKS.CnoANDSex='女,  
(2) (g) TRIGGER  
(h) UPDATE  
(i) Salary=Salary—value(nrow.Eno)  
(j) WORKS.Eno=nrow.Eno  
  
(1) 创建视图需要通过CREATEVIEW语句来实现，由题目可知视图的属性有(Eno,Ename,Cno,Cname,Salary)；通过公共属性列Eno和Cno对使用的三个基本表进行连接；由于只创建女员工的试图，所以还要在WHERE后加入“Sex='女’”的条件。从上分析可见，完整的SQL语句如下：  
![e047d27f4ad94e2e820a103c6593286f.jpg][]  
(2) 创建触发器可通过CREATETRIGGER语句实现，要求考生掌握触发器的基本语法结构。按照问题要求，在工资关系中更新职工职称级别时触发器应自动执行，故需要创建基于UPDATE类型的触发器，其触发条件是更新职工职称级别；最后添加表连接条件。完整的触发器实现的方案如下：  
![50bcc75d279a43e8bf89a9d95a8a5cf0.jpg][]  
  
【问题3】  
(1) (k) COMPANY.Cno,Cname  
(l) COUNT(\*)&gt;=ALL  
(2) (m) NOT IN或&lt;&gt;ANY(注：两者填一个即可)  
(n) WORKS,COMPANY  
(o) WORKS.Cno=COMPANY.Cno  
  
SQL查询通过SELECT语句实现。  
(1)根据问题要求，可通过子查询实现“查询员工最多的公司编号和公司名称”的查询；对COUNT函数计算的结果应通过HAVING条件语句进行约束；通过Cno和Cname的组合来进行分组查询。完整的SQL语句如下：  
![83c83250287e44f08cb2678fdbf9d634.jpg][]  
(2) 根据问题要求，需要使用嵌套查询。先将WORKS和COMPANY表进行连接,查找出所有在“中国银行北京分行”工作的员工；然后在雇员表中使用“NOTIN”或者“&lt;&gt;ANY”查询不在前述结果里面的员工即可。完整的SQL语句如下：  
![bde49841cea64ad8a54897258bb7cfb1.jpg][]  


## 第3题 ##

【问题1】  
![e35b77d2c90c4b729e6f2a7200fec637.jpg][]  
比赛联系应具有的属性包括：比赛编码，比分，日期。  
  
本题考查数据库概念结构设计及向逻辑结构转换的掌握。  
此类题目要求考生认真阅读题目，根据题目的需求描述，给出实体间的联系。  
根据题意由“一名球员只能效力于一支球队”可知球队和球员之间为1：\*联系。由“一场比赛有两支球队参加，一支球队作为主队身份、另一支作为客队身份参与比赛”可知球队分别按照“主队”和“客队”两种角色参与“比赛”的\*：\*联系。“比赛”应具有的属性：比赛编码，比分和曰期。  
  
【问题2】  
（1）球队编号  
（2）球队编号  
  
根据问题1分析可知球队和球员之间为1：\*联系，所以在球员关系里应该包括球队的主键，即“球队编号”。根据“每支球队有一名主教练，一名主教练只能受聘于一支球队”可知球队和教练之间为1：1联系，而球队关系已经给定，所以需要在主教练关系中包含球队的主键，即“球队编号”。  
现在系统要增加赞助商信息，赞助商信息主要包括赞助商名称和赞助商编号。  
  
【问题3】  
![1b212b91cef6485cbdc0711d717bc696.jpg][]  
  
根据题意由“赞助商可以赞助某支球队，一支球队只能有一个赞助商，但赞助商可以赞助多支球队”可知赞助商和球队之间为1：\*联系。由“赞助商也可以单独赞助某些球员，一名球员可以为多个赞助商代言”可知赞助商和球员之间为\*：\*联系。  


## 第4题 ##

【问题1】  
对关系“个人信息”：  
(1) 候选键：毕业证书编号  
(2) 不是3NF。存在非主属性“姓名”对候选键“毕业证书编号”的传递依赖：毕业证书编号→身份证号，身份证号→姓名。故毕业证书编号→姓名为传递依赖。  
(3) 分解后的关系模式  
个人信息1(身份证号，姓名，性别，出生日期，联系电话，电子邮件，个人简历及特长)  
个人信息2(身份证号，毕业院校，专业名称，学历，毕业证书编号)  
  
本题考查数据库逻辑结构设计及应用。  
此类题目要求考生认真阅读题目对现实问题的描述，对题目给出的关系模式进行分析并解决问题。  
根据题目描述和表4-1求职信息登记表所给出的内容，求职人员的身份证号、姓名、性别、出生日期、联系电话、电子邮件、个人简历及特长等为基本属性，每个求职者在这些属性上取单一值；而每个求职者在毕业院校、专业名称、学历、毕业证书编号等属性上可以取多个值，其中毕业证书编号具有唯一性，可以唯一决定毕业院校、专业名称、学历和求职者个人信息。因此，“个人信息”关系的函数依赖集为\{毕业证书编号一(毕业院校，专业名称，学历，身份证号)，身份证号一(姓名，性别，出生日期，联系电话，电子邮件，个人简历及特长)\}。  
由函数依赖集可知，“个人信息”关系的候选键为毕业证书编号，存在非主属性对候选键的传递依赖，如：毕业证书编号传递决定姓名(毕业证书编号一身份证号，身份证号一姓名)。故“个人信息”关系不属于3NF。  
根据分解规则，将函数依赖：身份证号一(姓名，性别，出生日期，联系电话，电子邮件，个人简历及特长)中的所有属性独立出来做一个关系模式，为BCNF；从原关系模式中去掉上述函数依赖的右部属性，得到关系模式(毕业证书编号，身份证号，毕业院校，专业名称，学历)，函数依赖集为\{毕业证书编号一(毕业院校，专业名称，学历，身份证号)\}，也为BCNF。  
  
【问题2】  
对关系“企业信息”：  
(1) 候选键：(企业编号，联系人)  
(2) 不是2NF。候选键(企业编号，联系人)部分决定非主属性企业名称。  
(3) 分解后的关系模式：  
企业信息1(企业编号，企业名称，地址，企业网址，企业简介)  
企业信息2(企业编号，联系人，联系电话，电子邮件)  
  
根据题目描述和表4-2招聘信息登记表所给出的内容，每个企业有多个联系人，每个联系人登记一个电话和一个电子邮件。存在函数依赖：\{(企业编号，联系人)一(联系电话，电子邮件)，企业编号一(企业名称，地址，企业网址，企业简介)\}，故“企业信息”关系的候选键为(企业编号，联系人)。而候选键(企业编号，联系人)一企业名称为部分依赖，故“企业信息”关系不属于2NF。  
根据分解规则，将函数依赖：企业编号一(企业名称，地址，企业网址，企业简介)中的所有属性独立成一个关系模式，属于BCNF，从原关系中去掉上述函数依赖的右部属性，得到关系模式(企业编号，联系人，联系电话，电子邮件)，也是BCNF。  
  
【问题3】  
创建“求职意向”表上的触发器，当有新记录插入时，查询“岗位需求”表，查询符合新插入的求职意向的岗位需求记录，提取相关字段插入表R中。  
  
求职信息录入后，由系统根据求职意向查找符合的信息需求，从数据库端应采用触发器技术，在“求职意向”表上添加触发器程序，当有插入新的求职意见记录时，根据求职表意向中的职位名称，在“岗位需求”表中查找相同职位的记录，即得到需求该职位的企业编号，用相应的SQL语句实现查询结果插入到指定表中。  


## 第5题 ##

【问题1】  
当两个用户同时购买同一航班的机票时，可能发生丢失修改的错误，即一个用户购票后对剩余票数的修改被另一个用户的修改覆盖，第一个用户的修改并未体现到数据库中。  
产生错误的原因是并发操作破坏了事务的隔离性。  
  
本题考查事务基本概念及编程应用。  
此类题目要求考生认真阅读题目对实际问题的描述，分析现实业务中存在的问题，并以事务的方式提出解决方案及编程中的处理方式。  
根据题目描述的售票程序及部分代码，程序的逻辑是正确的，但在并发状态下，可能会产生错误。修改指令UPDATE会被分解为读取剩余票数到变量、修改变量、写入数据库几个步骤，并发时存在指令交叉，造成一个程序的修改被其他程序所覆盖，称为丢失修改错误。如下面所示的一个并发调度：  
![35c4cc3acb4c4d2997e999a9bfd96dca.jpg][]  
若上面所示的两个售票程序并发执行，两个程序先读取剩余票数据A(当前值为16)T1购票1张后，写入剩余票数为15,T2购票2张后，写入剩余票数为14。T1写入的15被T2写入的14所覆盖，T1所做的修改丢失。  
上述两个程序单独执行或串行执行都不会出现这种错误，错误产生的原因在于事务并发执行时受到另一事务的干扰，破坏了事务的隔离性。  
  
【问题2】  
(1) 在并发请求下，查询剩余票数后，会等待用户的响应，.比时数据被锁定无法修改，导致其他用户只能等待该用户购票结束后才可购票，降低了系统的并发度。  
(2) 产生效率问题的原因是事务划分不合理。  
(3) 应将查询剩余票数的指令置于事务外部，事务只负责用户购票。  
  
封装的事务由两条SQL语句构成，中间存在与用户的交互，等待用户输入购票张数，会造成长事务，加锁状态下，其他购票事务程序会长时间等待，严重影响系统的响应速度。  
应将查询票数从事务中分离出来，UPDATE指令独立构成一个事务。  
  
【问题3】  
1. int a IN  
2. balance-a  
3. ROLLBACK(或ROLL BACK WORK)  
4. result=1；return；  
  
这是一个用存储过程实现购票的事务程序，存储过程参数部分给出了航班号和执行状态返回参数，应加入购票张数作为参数；修改剩余票数的UPDATE语句处需补充的是当前票数减去购票张数；SQL语句执行错误时应该进行事务回滚并退出程序，所有事务代码执行完成后提交，并返回。  



[8b64f5deba364760a2a813de0009cd75.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第1题/8b64f5deba364760a2a813de0009cd75.jpg
[3433a65e08464243834ac8c7f096caee.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第1题/3433a65e08464243834ac8c7f096caee.jpg
[8f75680c46384a20acb69088e1d6974e.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第2题/8f75680c46384a20acb69088e1d6974e.jpg
[e047d27f4ad94e2e820a103c6593286f.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第2题/e047d27f4ad94e2e820a103c6593286f.jpg
[50bcc75d279a43e8bf89a9d95a8a5cf0.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第2题/50bcc75d279a43e8bf89a9d95a8a5cf0.jpg
[83c83250287e44f08cb2678fdbf9d634.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第2题/83c83250287e44f08cb2678fdbf9d634.jpg
[bde49841cea64ad8a54897258bb7cfb1.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第2题/bde49841cea64ad8a54897258bb7cfb1.jpg
[e35b77d2c90c4b729e6f2a7200fec637.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第3题/e35b77d2c90c4b729e6f2a7200fec637.jpg
[1b212b91cef6485cbdc0711d717bc696.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第3题/1b212b91cef6485cbdc0711d717bc696.jpg
[35c4cc3acb4c4d2997e999a9bfd96dca.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第5题/35c4cc3acb4c4d2997e999a9bfd96dca.jpg
