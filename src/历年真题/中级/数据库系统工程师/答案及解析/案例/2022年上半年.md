---  
title: 2022年上半年  
# icon: gears  
order: 987  
category:  
- 历年真题  
tag:  
- 真题  
  
# navbar: false  
# sidebar: false  
  
# breadcrumb: false  
# pageInfo: false  
# contributors: false  
# editLink: false  
# lastUpdated: false  
# prev: false  
# next: false  
comment: false  
# footer: false  
  
# backtotop: false  
---  
## 第1题 ##

【问题1】  
![0eb824a1fbf246779bd968c0f6298008.jpg][]  
  
【问题2】  
（a）医院名称（b）接种日期  
供应商，主键：供应商名称  
医院，主键：医院名称  
供货，主键：供应商名称，医院名称；外键：供应商名称，医院名称  
被接种者，主键：被接种者身份证号  
接种，主键： 被接种者身份证号，接种日期；外键：被接种者身份证号、医院名称、供应商名称  
  
【问题3】  
![9694ca7d3ece4dc7bf44ede020eced5b.jpg][]  
被检测者（姓名，身份证号，住址，电话），主键：身份证号。  
检测（被检测者身份证号，医院名称，检测日期，检测结果），主键：被检测者身份证号、检测日期；外键：被检测者身份证号、医院名称。  


## 第2题 ##

【问题1】  
冲线记录表中含有数据冗余。包含的冗余属性包括：组别，车手姓名。  
  
【问题2】  
冲线记录表，主码：序列号，外码：车号、手机号  
赛车表，主码：车号，外码：无  
车手表表，主码：手机号，外码：无  
  
【问题3】  
冲线记录表不满足3NF。  
导致不满足3NF的函数依赖关系有：序列号→车号，车号→组别，因此存在非主属性组别传递依赖于主属性序列号。序列号→手机号，手机号→车手姓名，因此存在非主属性车手姓名传递依赖于主属性序列号。  
解决方案：  
消除冲线记录表中的传递依赖，也就是删除冲线记录表中的组别、车手姓名这两个字段。  


## 第3题 ##

【问题1】  
a table  
b primary key  
c store  
d check(stock&gt;=0)  
  
【问题2】  
e sum(Qty)  
f group  
g Pno  
  
【问题3】  
h Stock+Usage  
i union all  
j not in  
k desc  
  
【问题4】  
l part  
m sno='A002'  
n delete  
o store  


## 第4题 ##

【问题1】  
a cursor  
b fetch  
c v\_bran\_name,all\_balance  
d exit  
e c\_sum\_bal  
f rollback  
  
【问题2】  
g before  
h trade\_details  
i for each row  
j NEW.t\_resulte  
k NEW.a\_no  
  
【问题3】  
（1）在事务提交读隔离级别下，该网点的汇总和取款事务不能成功结束。  
事务提交读隔离级别时，汇总事务读取数据时先要加S锁，但读完就释放S锁。而账户取款事务为读写操作，需要事先加X锁，但要等事务结束才释放，所以汇总事务不能成功结束。  
（2）如果该数据库提供了多版本并发控制协议，两个事务可以成功结束。  
多版本并发控制，MVCC是一种并发控制的方法，一般在数据库管理系统中，实现对数据库的并发访问。使用MVCC多版本并发控制比锁定模型的主要优点是在MVCC里，对检索（读）数据的锁要求与写数据的锁要求不冲突，所以读不会阻塞写，而写也从不阻塞读。  


## 第5题 ##

【问题1】  
满足持久化要求的事务：T1，T2  
不满足持久化要求的事务：T3，T4  
  
【问题2】  
K恢复为初始值，l、J不恢复为初始值。  
最终结果I=4、J=8、K=11。  
  
【问题3】  
如果系统采用先写数据库再记日志的机制，则日志文件中没有&lt;T2，COMMIT&gt;，即T2表现为未提交，再恢复时，需要撤销所有T2的操作。最终结果I=5、J=7、K=11。  
  
【问题4】  
为什么要先写日志文件？  
写数据库和写日志文件是两个不同的操作，在这两个操作之间可能发生故障。  
如果先写了数据库修改，而在日志文件中没有登记下这个修改，则以后就无法恢复这个修改了；如果先写日志，但没有修改数据库，按日志文件恢复时只不过是多执行一次不必要的UNDO操作，并不会影响数据库的正确性。  



[0eb824a1fbf246779bd968c0f6298008.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第1题/0eb824a1fbf246779bd968c0f6298008.jpg
[9694ca7d3ece4dc7bf44ede020eced5b.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第1题/9694ca7d3ece4dc7bf44ede020eced5b.jpg
