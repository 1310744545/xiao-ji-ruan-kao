---  
title: 2014年上半年  
# icon: gears  
order: 995  
category:  
- 历年真题  
tag:  
- 真题  
  
# navbar: false  
# sidebar: false  
  
# breadcrumb: false  
# pageInfo: false  
# contributors: false  
# editLink: false  
# lastUpdated: false  
# prev: false  
# next: false  
comment: false  
# footer: false  
  
# backtotop: false  
---  
## 第1题 ##

【问题1】  
E1：巴士司机  
E2：机械师  
E3：会计  
E4：主管  
E5：库存管理系统  
  
本题考査的是DFD的应用，属于比较传统的题目，考查点也与往年类似。  
本问题考查的是顶层DFD。顶层DFD通常用来确定系统边界，其中只包含一个唯一的加工（即待开发的系统）、外部实体以及外部实体与系统之间的输入输出数据流。题 目要求填充的正是外部实体。  
从题子说明1)没有明确说明由巴士到车库后由谁提供待维修问题，图1-1中的E1， 考察说明中3)中最后一句说明“巴士司机可查看已维修机械问题”可以看出，从系统到巴上司机有输出数据流“已维修机械问题”，可知E1为巴士司机。从2)中“机械师根据维修记录文件中的待维修机械问题，完成对巴士的维修，登记维修情况”再看说明  
4)中机械师提供维修工时，可以看出，从E2到系统有输入数据流“维修工时”、输出数据流“待维修机械问题”，可知E2为机械师，还将维修总结发送给主管，即系统到E4 有输出数据流“维系总结”，可知E4为主管。从说明5)将维修工时和所用部件成本详细信息给会计，从系统到E3有输出数据流“维修工时和所用部件成本详细信息”，可知E3为会计。说明3)中将所用部件清单发送给库存管理系统以对部件使用情况进行监控，及系统到E5有输出数据流“所用部件清单”，可知E5为库存管理系统。  
  
【问题2】  
D1：巴士列表文件  
D2：维修记录文件  
D3：部件清单  
D4：人事档案  
  
本问题考査0层数据流阁中的数据存储。系统中的主要功能与图1-2中的处理一一对应，1)对应处理“记录巴士ID和维修问题”，将巴士ID记录在巴士列表文件中，可知D1为巴士列表文件。说明2)对应处理“确定所需部件”，将维修所需部件在部件淸单中进行标记，所以D3为部件清单。说明1)中将待维修机械问题记录在维修记录文件中，可知D2为维修记录文件。说明4)对应处理“记录维修工时”，描述了将机械师提供的维修工时记录在人事档案中，可以判定D4是人事档案。  
  
【问题3】  
图1-2中处理3只有输出数据流，没有输入数据流。D2和D3是黑洞，只有输入的数据流，没有输出的数据流。父图与子图不平衡，图1-2中没有图1-1中的数据流“维修情况”。  
  
本问题考查0层数据流图中的数据流。分析图1-2,可以发现，处理3只有输出数据流没有输入数据流，D2和D3只有输入数据流，而没有输出流，造成黑洞。另外，对照图1-2和图1-1,发现图1-1中从E2输入的数据流维修工时/维修情况，在图1-2中只有维修工时，造成父图与子图不平衡。  
  
【问题4】  
![c16b4270a78a479891dbc85d36de88fa.jpg][]  
  
针对【问题3】分析图1-2中存在的问题，题目要求以补充数据流的方式解决，进一步分析说明，说明3)对应处理“完成维修”，机械师根据维修记录文件中的待维修机械问题完成对巴士的维修，可知处理完成维修需要从维修记录文件读取待维修问题，补充一条从D2到处理3的数据流“待维修机械问题”。说明5)对应处理“计算维修总成 本”，需要计算部件淸单中实际所用部件，补充从部件淸单到汁算总成本的数据流“实际所用部件”。说明3)中机械师要登记维修情况，判定图1-2中缺少了E2到处埋3的数据流“维修情况”。  
到此为止所有缺失的数据流都补齐了，也解决了【问题3】中的平衡问题、处理了只有输出数据流没有输入数据流的问题，D2和D3也既有输入数据流，又有输出数据流。  


## 第2题 ##

【问题1】  
（a）PRIMARY KEY （或NOT NULL UNIQUE）  
（b）CHECK（消费金额&gt;0）  
（c）FOREIGN KEY（会员手机号）REFERENCES 会员（会员手机号）  
（d）FOREIGN KEY（项目名称）REFERENCES 项目（项目名称）  
  
本题考査SQL的应用，属于比较传统的题目，考查点也与往年类似。  
本问题考查数据定义语言DDL和完整性约束。根据题意，需要对“消费”表的“流水号”加主键（或非空）约束，考查实体完整性约束，对应的语法为：  
PRIMARY KEY (或 NOT NULL UNIQUE )  
“消费金额”需要大于0,所以需要加Check约束，对应的语法为：  
CHECK (消费金额&gt;0)  
“会员手机号”是“会员”关系的主键，是“消费”关系的外键，考查参照完整性约束，需要增加外键约束，对应的语法为：  
FOREIGN KEY (会员手机号）REFERENCES   会员（会员手机号）  
“项目名称”是“项目”关系的主键，是“消费”关系的外键，考查参照完整性约束，需要增加外键约束，对应的语法为：  
FOREIGN KEY (项目名称）REFERENCES 项目（项目名称）  
  
【问题2】  
（1）(e) 价格\*使用时长\*折扣  
(f) 预约单.会员手机号=会员.会员手机号  
（2）(g) INSERT  
（h）消费  
（i）折扣=vip\_value(nrow.会员手机号）  
（j）会员.会员手机号=nrow.会员手机号  
  
本问题考查数据操纵语言DML。  
（1）本题考查一个较完整的查询语句，需要向“消费”关系插入新元组。  
SELECT子句缺少“消费金额”。消费金额=价格\*使用时长\*折扣。  
WHERE子句缺少“预约单”关系和“会员”关系按照“会员手机号”的连接，因此应该增加“预约单.会员手机号=会员.会员手机号”。  
（2）本题考查触发器，触发器是一个能由系统自动执行对数据库修改的语句。一个触发器由事件、条件和动态三部分组成：事件是指触发器将测试条件是否成立，若成立 就执行相应的动作，否则就什么也不做；动态是指若触发器测试满足预定的条件，那么就由数据库管理系统执行这些动作。本题首先定义触发器的事件，用触发器来实现会员等级折扣的自动维护。  
(g)和（h）缺少向“消费”关系插入的语句，因此应该分别补充“NSERT”和 “消费”。  
(i)语句调用vip\_value函数实现会员折扣的更新，函数参数为会员手机号，因此应该补充“折扣=vip\_value(nrow.会员手机号)”。  
(j)语句实现“会员”关系和"nrow"关系按照“会员手机号”的连接，因此应该补充“会员.会员手机号=nr0w.会员手机号”。  
  
【问题3】  
（1）(k)项目.项目名称=消费.项目名称  
(i)项目.项目名称，项目经理 HAVING SUM(消费金额)&gt;= 100000  
(m) SUM(消费金额）DESC  
(2)(n) LIKE"王%’  
(o) LIKE “%888”  
  
【试题分析】  
本问题考査数据操纵语言DML。  
（1）本题考查一个较完整的查询语句，知识点包括夺标查询、集函数、查询分组、分组条件和排序查询结果。査询涉及“项目”和“消费”关系模式。用集函数SUM(消 费金额)求消费总金额，若有GROUP BY子句，则集函数作用在每个分组上，且GROUP BY之后应包含除了集函数之外的所有结果列。若GROUP BY之后跟有HAVING子句，则只有满足条件的分组才会输出。“RDER BY”列名\[ASC|DESC\]”对输出结果进行升序或降序的排列，若不明确制定法升序或降序，则默认升序排列。  
（2）本题考查用关键字LIKE进行字符匹配。  
LIKE的语法为：  
\[NOT\] LIKE ‘&lt;匹配串&gt;’  
其中，匹配串可以是一个完整的字符串，也可以含有通配符％和\_，其中％代表任意长度（包括0长度）的字符串，\_代表单个字符。手机号码以“888”结尾，姓“王”的 员工对用的表示为：姓名LIKE‘王％”AND电话LIKE“％888’。  


## 第3题 ##

【问题1】  
![a20269f63c7a4d31a412fedef87a64ed.jpg][]  
  
本题考査数据库设计，属子比较传统的题目，考查点也与往年类似。  
本问题考査数据库的概念结构设计，题目要求补充完整实体联系图中的联系和联系的类型。  
根据题目的需求描述可知，一个家电厂商可以供应多台家电，而一台家电只能对应一个家电厂商，因此“家电厂商”和“家电”之间存在“供应”联系，联系的类型为一 对多（1:\*，或1:m)。  
根据题目的需求描述可知，“员工”和“部门经理”之间存在一个包含关系。  
根据题目的需求描述可知，“客户”、“客服”和“家电”之间存在“购买”联系，联系的类型为多对多对多（\*:\*:\*，或m:n:o)。  
  
【问题2】  
（1）厂商ID  
（2）部门经理工号 或 经理工号 或 员工工号  
（3）客户ID、客服工号、家电条码  
![9016c2d7ee7b40a9b0a7f949088be1da.jpg][]  
  
本问题考査数据库的逻辑结构设计，题目要求补充完整各关系模式，并给出各关系模式的主键。  
根据实体联系图和需求描述，“家电”和“家电厂商”存在多对一的关系，在家电关系中需要记录家电厂商的主键，也就是“厂商ID”。所以，对于“家电”关系模式， 需补充属性“厂商ID”。“家电条码”为“家电”关系的主键。  
根据实体联系图和需求描述，“家电厂商”和“部门经理”之间存在多对一的关系，  
在家电厂商关系中需要记录部门经理的主键，也就是“部门经理工号”（或“经理工号”、 或“员工工号”)。“厂商ID为“家电厂商”的主键。  
根据实体联系图和需求描述，“客户”、“客服”和“家电”之间的多对多对多的“购买”联系。因为是多对多对多联系，所以“购买”联系需要单独作为一个关系，这个关系需要记录“客户”、“客服”和“家电”的主键。所以，对于“购买”关系模式，需补充属性“客户ID““”客服工号”和“家电条码”。“订购单号”为“购买”的主键。  
  
【问题3】  
![09d91e4e59744388b3128f149ff621a0.jpg][]  
  
本问题考查数据库的概念结构设计，根据新增的需求增加实体联系图中的实体的联系和联系的类型。  
根据问题描述，需要新增“客户经理”，包含于“员工”。  
根据问题描述，客户只由一名客户经理和一名基金经理负责，客户经理和基金经理均可负责多名客户，所以“客户”、“客户经理”和“基金经理”之间存在一个“理财” 联系，联系的类型为多对1对1 (\*:1:1，或m:1:1)。  


## 第4题 ##

【问题1】  
（1）候选键：（流水号，书号）  
（2）不能。还书时读取书目中的借书时长，可能在借书后该时长发生变化，不满足按原借书时长计算的要求。  
在借还关系中增加借书时长属性，借书时根据书目中的借书时长值写入该值。  
修改后的“借还”关系：  
借还（流水号，借书证号，书号，借书日期，借书时长，还书日期，罚款金额，罚款原因）  
  
本题考查的是数据库逻辑结构设计和关系理论的应用，属于比较传统的题目，考查点也与往年类似。  
本问题考查对候选码和需求。针对借还关系，根据题干描述，“读者借书时，由系统生成本次借书的唯一流水号，并登记借书证号、书号、借书日期，其中同时借多本书 使用同一流水号”，说明流水号不能唯一确定借阅记录，还需要借阅书的参与，而书号可以唯一确定一本书，故借还关系的候选码应由流水号和书号构成。  
关系模式的设计应满足应用需求。通过题干中的描述，“不同书目有不同的借书时长，并且可以进行调整，但调整前所借出的书，仍按原借书时长进行处理”，借书时长应该是借书时确定的，从书目的属性中读取，作为借书关系的属性，以后借书时长在书目关系中修改，并不影响已发生的借还关系。  
  
【问题2】  
（1）FD=\{书号→（ISBN号、破损情况、定价），ISBN号→（书名、出版社、存放位置）\}  
（2）该关系不属于BCNF，存在非主属性对码的传递依赖。  
修改内容：去掉书名和出版社属性，将存放位置属性移至书目关系。修改后的关系模式:  
图书（书号，ISBN号，破损情况，定价）  
书目（ISBN号、书名、出版社、作者、排名、存放位置、借书时长）  
  
本问题考査函数依赖和BCNF。根据描述“每一本书有唯一的编号，相同ISBN号的书集中存放，有相同的存储位置，相同ISBN号的书或因不同印刷批次而定价不同”， 得出书号决定定价，破损情况是每本书的具体情况，也决定于书号，而书名、出版社和存放位置应由ISBN号决定，故函数据依赖集为\{书号→（ISBN号，破损情况，定价)， ISBN号→（书名，出版社，存放位置）\}。  
根据函数依赖集，图书关系的候选码为书号，存在非主属性书名、出版社和存放位置等对候选码书号的传递依赖，不属于BCNF。书名和出版社属性在书目关系中已有， 无需在图书关系中重复出现，同时存放位置由ISBN号所决定，应移至书目关系中，则剩余属性书号、ISBN号、破损情况和定价构成新的关系模式，属于BCNF。  
  
【问题3】  
（1）不属于第四范式。  
存在嵌入的多值依赖ISBN号→→（作者，排名）  
（2）修改后的关系模式：  
书目1 (ISBN号，书名，出版社，存放位置，借书时长）  
书目2 (ISBN号，作者，排名）  
  
本问题考查4NF和模式分解。根据题干的描述“一部书可以有多名作者，每名作者有唯一的一个排名”，得出多值依赖ISBN号→→（作者，排名），为嵌入式的多值依 赖，因此，书目关系不属于4NF。根据分解算法，将多值依赖独立为一关系模式，从原 关系模式中去掉多值依赖的右部属性即可。  


## 第5题 ##

【问题1】  
在车辆驶入时判定登记表上对应该ECT卡的所有记录，出口编号和驶出时间均不为空，表示该卡已清算过；在车辆驶出时判定该卡存在记录有驶入信息而出口编号和驶出  
时间为空。  
  
本题考査事务概念及应用，属于比较传统的题目，考查点也与往年类似。  
本问题考查应用需求。一次通过包含经过入口站点和经过出口站点，由于ETC卡存在反复使用，所以应将经过入口和出口严格配对。根据历史记录，进入站点时应该没有 未配对的入口信息，即所有的经过信息均有配对的入口和出口记录；出口时仅有唯一的入口信息。 .  
解决这些问题的最好办法是把入口和出口信息作为一条记录，用来记录每一次经过。经过入口站点时插入新记录，出口信息字段为空值，经过出口站点时再修改为相应的值。  
  
【问题2】  
（1）出现问题：丢失修改，x1的费用扣除后写入的值被x2的覆盖，造成对x1并未扣费。  
（2）加锁后的执行序列：XLock(A), x1=R(A), x1=x1-a1, W(A,x1）, Unlock(A), XLock(A), x2 = R(A), x2 = x2-a2, W(A,x2), Unlock(A)。  
  
本问题考查并发控制。两辆车同时经过收费口，会对信用卡的同一余额数据进行操作，可能会造成数据的不一致。根据给定的指令执行序列“x1= R(A)，x1= x1- a1，x2 = R(A), x2 = x2-a2, W(A,x1), W(A,x2)"，W(A，x1)指令对数据对象A 写入的x1值会被随后的x2值所指盖，造成丢失修改的错误。  
解决的办法是引入锁机制，在修改数据前加独占锁，写入数据后再释放锁，符合两段锁协议的规定，则会避免产生数据不一致性问题。  
  
【问题3】  
（a）ETC卡号=:ETC卡号  
（b）COMMIT  
  
本问题考查存储过程及事务程序的实现。修改语句中条件部分的空缺为输入参数中的ETC卡号，判定语句中的空缺为事务的提交指令。  



[c16b4270a78a479891dbc85d36de88fa.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第1题/c16b4270a78a479891dbc85d36de88fa.jpg
[a20269f63c7a4d31a412fedef87a64ed.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第3题/a20269f63c7a4d31a412fedef87a64ed.jpg
[9016c2d7ee7b40a9b0a7f949088be1da.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第3题/9016c2d7ee7b40a9b0a7f949088be1da.jpg
[09d91e4e59744388b3128f149ff621a0.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第3题/09d91e4e59744388b3128f149ff621a0.jpg
