---  
title: 2019年上半年  
# icon: gears  
order: 990  
category:  
- 历年真题  
tag:  
- 真题  
  
# navbar: false  
# sidebar: false  
  
# breadcrumb: false  
# pageInfo: false  
# contributors: false  
# editLink: false  
# lastUpdated: false  
# prev: false  
# next: false  
comment: false  
# footer: false  
  
# backtotop: false  
---  
## 第1题 ##

【问题1】  
E1:学生卡  
E2:管理人员  
E3:班主任  
E4:家长  
E5:医护机构健康服务系统  
  
本题考查采用结构化方法进行软件系统的分析与设计，主要考查利用数据流图(DFD)进行分析和建模。  
DFD是面向数据流建模的工具，它将系统建模成输入、加工（处理)、输出的模型，即流入软件的数据对象、经由加工的转换、最后以结果数据对象的形式流出软件，并采用自顶向下分层建模进行逐层细化。顶层DFD(上下文数据流图）建模用于确定系统边界以及系统的输入输出数据，待开发软件系统被看作一个加工，为系统提供输入数据以及接受系统输出数据的是外部实体，外部实体和加工之间的输入输出即为数据流。数据流或者由具体的数据属性（也称为数据结构）构成，或者由其他数据流构成，即组合数据流，用于在高层数据流图中组合相似的数据流。将上下文DFD中的加工分解成多个加工，分别识别这些加工的输入数据流以及经过加工变换后的输出数据流，建模0层DFD。根据0层DFD中加工的复杂程度进一步建模加工的内容。根据需求情况可以将数据存储建模在不同层次的DFD中。  
在建模分层DFD时，需要注意加工和数据流的正确使用，一个加工必须既有输入又有输出；数据流须和加工相关，即数据流至少有一头为加工；要注意在绘制下层数据流图时保持父图与子图平衡，即父图中某加工的输入输出数据流必须与其子图的输入输出数据流在数量和名字上相同，或者父图中的一个输入（或输出）数据流对应于子图中几个输入（或输出）数据流的组合数据流。  
题目题干描述清晰，易于分析，要求考生细心分析题目说明中所描述的内容。  
本问题考查上下文DFD，要求确定外部实体。在上下文DFD中，待开发系统名称“学生跟踪系统”作为唯一加工的名称，为这一加工提供输入数据流或者接收其输出数据流的外部实体，涉及学生卡、班主任、家长、医护机构健康服务系统和管理人员。需要注意的是，医生并不直接接收学生跟踪系统的信息，说明（2）中“由医护机构健康服务系统通知相关医生”是本系统的外部实体医护机构健康服务系统在本系统之外与医生之间进行的交互，所以在给定的业务背景的情况下，医生不属于本系统的外部实体。再根据描述相关信息进行对应，对照图1-1，即可确定E1为“学生卡”实体，E2为“管理人员”实体，E3为“班主任”实体，E4为“家长”，E5为“医护机构健康服务系统”。  
  
【问题2】  
D1:学生状态  
D2:学生  
D3:校园场所  
D4:课表  
  
本问题要求确定图1-2中0层数据流图中的数据存储。重点分析说明中与数据存储有关的描述。说明（1）中“采集学生状态”“并记录”，图1-2中从加工“采集学生状态”流入D1的数据流明确了 “学生状态”，可知D1为“学生状态”；再由说明（6）中“基础信息管理”的描述信息，结合图1-2中P6流入D2的“学生基础信息”、流入D3的“校园场所”、流入D4的“课表信息”和从D2流出的“学生信息”等，可知D2为“学生”、D3为“校园场所”、D4为“课表”。  
  
【问题3】  
![2678e885ff4f4041b5f9da1a426379ea.jpg][]  
  
本问题要求补充缺失的数据流及其起点和终点。对照图1-1和图1-2的输入、输出数据流，没有缺少与外部实体之间的数据流。  
再考査题干中的说明判定是否缺失内部的数据流，不难发现图1-2中缺失的数据流。加工P3到课检查需要综合课表信息、校园场所，所以，有从D4课表流向P3到课检查的数据流“课表信息”、从D3校园场所流向P3到课检查的“场所信息”以及从D5家长流向P3到课检查的“家长信息”。加工P4汇总在校情况需要综合学生信息、课表信息、场所信息和学生状态信息，需要从学生信息中获取家长ID，根据家长ID获取家长信息，并将报告发送给家长和班主任，所以，流向P4汇总在校的数据流缺少从D4课表流入的“课表信息”、从D3校园场所流入的“场所信息”和D5家长流入的“家长信息”。再由说明（6）中“对家长注册申请进行审核”“将家长ID加入学生信息记录中使家长与其子女进行关联”不难发现，有从P6基础信息维护流入D2学生的数据流“家长ID”;从P5家长注册流入的“家长注册申请”。  
  
【问题4】  
学生状态=学生卡ID+心率+体温+位置+时间   
学生信息=学生ID+学生卡ID+1\{家长ID\}\*+班主任ID+班级  
  
数据流由具体的数据属性构成采用符号加以表示，“=”表示组成（被定义为)，“+”表示有多个属性（与），\{\}表示其中属性出现多次，()表示其中属性可选等。图1-1中的“学生状态”来自于E1学生卡，“学生信息”从D2数据存储流出。在说明（1）中给出“采集学生心率、体温（摄氏度）等健康指标及其所在位置等”以及“每张学生卡有唯一的标识（ID)与一个学生对应”；说明（6）中给出说明“对学生及其所用学生卡和班主任”“将家长ID加入学生信息记录中”等信息。然后采用“=”和“+”将数据流及其属性表示出来。需要注意的是，“一个学生至少有一个家长，可以有多个家长”说明一条学生信息中可以有一到多个家长信息，在数据流表示中需要使用\{\}，即“1\{家长ID\}\*”。  


## 第2题 ##

【问题1】  
![a3608ab0319e42d3af84ad488e68b986.jpg][]  
  
本题考查数据库概念结构设计及逻辑结构转换的掌握。此类题目要求考生认真阅读题目，根据题目的需求描述，给出实体间的联系。  
根据题意由“投资方和创业公司之间依靠孵化公司牵线建立创业项目合作关系，具体实施由孵化公司的二位员工负责协调投资方和创业公司的一个创业项目。”可知投资方、创业公司和员工三方参与项目联系，三方之间为1:\*:1联系。根据题意由“统一管理孵化公司和创业公司的员工。”可知创业公司和员工之间为1:\*联系。  
  
【问题2】  
(a)公司代码   
(b)投资方编号  
  
根据需求描述（2）可知员工信息包含工号、身份证号、姓名、性别、所属公司代码和一个手机号。所以在员工关系里应该包括“公司代码”，且以外键标识。  
根据需求描述（4）可知投资方、创业公司和员工三方之间为1:\*:1联系，所以需要在项目关系模式中包含“投资方编号”，且以外键标识。  
  
【问题3】  
（1）不需要  
（2）![9e0ea509816d486c9297989b2746ebe6.jpg][]  
关系模式:项目(项目编号，创业公司代码，投资方编号，孵化公司员工工号，投资额，投资时间)  


## 第3题 ##

【问题1】  
对关系“快递投递”。  
(1)候选键：快递编号。  
(2)不是3NF。存在非主属性“发件人姓名”对候选键“快递编号”的传递依赖： 快递编号→发件人身份证号，发件人身份证号→发件人姓名。所以快递编号→发件人姓名，为传递依赖。所以，“快递投递”关系模式不满足第三范式。  
(3)分解后的关系模式：  
快递投递1(快递编号，快递员编号，发件人身份证号）。  
快递投递2(发件人姓名，发件人身份证号，发件人电话号码，发件人地址编号）  
  
本题考查数据库范式概念的理解及应用。  
此类题目要求考生认真阅读题目对现实问题的描述，经过分析找出关系模式的侯选键、主键，并且可以分析出关系模式所属范式类别。最后要求考生根据实际需求自行设计出符合实际需求的关系模式。  
对关系“快递投递”进行分析，关系模式如下：  
快递投递（快递编号，快递员编号，发件人姓名，发件人身份证号，发件人电话号码，发件人地址编号）  
(1)其中快递编号可以唯一标识一个快递投递元组，故为候选键。  
(2)第三范式（Third Normal Form,3rdNF)就是指表中的所有数据元素不但要能唯一地被主键所标识，它们之间还必须相互独立，不存在其他的函数依赖关系。而快递投递关系中，快递编号→发件人身份证号，发件人身份证号→发件人姓名，明显存在传递依赖关系，故不是第三范式。  
(3)在3NF的基础上消除主属性对于码的部分函数依赖及传递函数依赖。而实际上将原关系模式改写成3NF之后不存在主属性对于码的部分与传递函数依赖，故改写成3NF之后便满足了BCNF的要求。  
  
【问题2】  
对关系“快递跟踪”：  
(1)候选键:（快递编号，当前负责人编号）。  
(2)不是2NF。候选键（快递编号，当前负责人编号）部分决定非主属性“当前站点编号”。  
(3)分解后的关系模式：  
快递跟踪1(快递编号，当前负责人编号，前一负责人编号，当前状态，收到时间）。“当前站点编号”已在站点信息中出现，并可以通过当前负责人编号查询，无需再用关系模式处理。  
  
对关系“快递跟踪”进行分析，关系模式如下：  
快递跟踪（快递编号，当前负责人编号，前一负责人编号，当前状态，收到时间，当前站点编号）。  
(1)该关系模式中需要快递编号和当前负责人编号两项共同决定一个快递跟踪元组，故候选键为（快递编号，当前负责人编号）。  
(2)2NF要求不能有非主属性对于码的部分函数依赖，但是当前负责人编号可唯一标识当前站点编号，存在部分函数依赖当前负责人编号—当前站点编号，故不是2NF。  
(3)“当前站点编号”不需要通过该关系模式处理，可以通过负责人编号查询，故在该关系模式中将该项删掉即可。  
  
【问题3】  
因为需要针对每个快递，统计支付的金额、时间及支付方式，所以在增加的“快递收费”关系模式中需要体现快递编号、金额、支付时间和支付方式，即增加的关系模式为：  
快递费支付(快递编号,金额,支付时间,支付方式）。  
  
本题意在考査考生自主设计关系模式的能力。因为要计量快递的费用，故需要将与费用相关的属性加到该关系模式中，如支付时间、支付方式及金额等。  


## 第4题 ##

【问题1】  
(a)PRIMARY KEY  
(b)CHECK(stusex IN(‘F’,‘M’))  
(c)REFERENCES School (schno)  
(d)CASCADE  
  
本题考査SQL编程应用。  
本问题考查SQL的数据定义和完整性约束。  
根据题目描述，在学生表Student中，学号stuno为主键；学院编号schno为外键， 参照学院表School的schno,要求级联删除。另外，性别stusex的取值限定为‘F’和‘M’。 因此创建学生表的完整SQL语句为：  
![85838a7baae949fbb10e02fba33654c4.jpg][]  
  
【问题2】  
(e)MIN(clubname),或者MAX(clubname)  
(f)COUNT(stuno),或者COUNT(\*)  
(g)GROUP  
(h)UNION  
(i)JoinClub   
  
本问题考查SQL创建视图及查询操作。  
题目要求创建统计俱乐部学生人数的视图，其属性有dubno、dubname和clubstunum。俱乐部人数的统计分为两类，一类是己经有学生参加的俱乐部，其人数需要统计；另一类是暂时没有学生参加的俱乐部，其人数为0。两类结果最后要用UNION合并起来。  
对于己经有学生参加的俱乐部，在表JoinClub中按clubno分组统计stuno的个数得到人数。这里为了输出clubname，需要进行JoinClub和Club的连接；clubname不能直接输出因为它不是分组属性，但由于在同一分组里clubname的值相同，因此可以对其作用聚集函数MIN或MAX后输出clubname的值。  
对于暂时没有学生参加的倶乐部，从表Club中选出clubno没有出现在表JoinClub中的相关信息即可。  
因此完整创建视图CS\_NUMBER的SQL语句如下：  
![c7cd71347116464a93becb3f0558c446.jpg][]  
  
【问题3】  
(j)Student  
(k)ROW  
(1)SET schstunum=schstunum+1 WHERE schno=nrow.schno  
(m)SET schstunum=schstunum-1 WHERE schno=orow.schno  
  
本问题考查触发器的设计。  
根据题意，School表中由属性schstunum记录每个学院的人数，此属性的值必须与Student表中相应学院的学生记录数保持一致。为此，每当给Student表中插入一条记录时，就要把schstunum的值加1;每当删除Student表中的一条记录时，就要把schstunum的值减1。这样的功能由触发器来实现，其完整创建语句如下：  
![ae9290660c4640d49a56f63c3cfa0eec.jpg][]  
  
【问题4】  
(n)ORDER  
(o)schname,或者schname ASC,或者schname DESC  
  
本问题考查SQL查询操作。  
题目要求查询年龄小于19岁的学生的学号、姓名及所属学院名，并把同一个学院的学生排在一起。要完成此功能，输出结果需要按照学院名进行排序，升序或降序皆可。完整的查询语句如下：  
  
![8a184b5900fa44af9212e9bc4e1d6841.jpg][]  


## 第5题 ##

【问题1】  
(a)SERIALIZABLE; (b):Amts； (c)COMMIT 本题考查数据库中存储过程和事务并发的基本概念。 本问题考查数据库存储过程和事务隔离的基本概念。 由于数据库总是被很多用户所共享，在数据库并发操作中，往往会出现数据的更新丢失、脏读、不可重复等问题。为了避免出现上面这三种情况，在标准SQL规范中，定义了4个事务隔离级别，不同的隔离级别对事务的处理不同：未提交读、提交读、可重复读取、串行化，其中串行化隔离级别提供严格的事务隔离。它要求事务序列化执行，事务只能一个接着一个地执行，不能并发执行。隔离级别越高，越能保证数据的完整性和一致性，但是对并发性能的影响也越大。 根据问题1的题干描述和己给出的程序语句，可以看出该程序语句需要实现余额汇总事务的串行化操作，从而保证余额汇总交易数据正确性的前提下，不影响其他交易的正确性。 因此空白（a）处应该填写SEFUALIZABLE，表示当前事务设置为串行化隔离级别；空白（b）处应填写宿主变量：Amts,表示汇总余额；空白（c）处应填写COMMIT,表示事务正确结束时的提交操作。  
  
【问题2】  
(1)(a)阻塞；  
(b)UX(101),UX(104),提交；  
(2)汇总余额为2000;  
(3)该数据不正确（错误）。  
原因：提交读隔离级别下，当释放锁并提交修改后，汇总交易读到的数据不是104账户原来的数据200元，而是修改后的数据600元，转账的400元被重复计算了两次。  
  
本问题考查两段锁协议和排它锁的基本概念及应用。  
两段锁协议是指每个事务的执行可以分为两个阶段：生长阶段（加锁阶段）和衰退阶段（解锁阶段具体要求是：在对任何数据进行读、写操作之前，要申请并获得对该数据的封锁；每个事务中，所有的封锁请求先于所有的解锁请求。  
排它锁又称为写锁，若事务T对数据对象A加上写锁，则只允许T读取和修改A，其他任何事务都不能再对A加任何类型的锁，直到T释放A上的锁它防止任何其他事务获取资源上的锁，直到在事务的末尾将资源上的原始锁释放为止。  
根据题干描述，汇总事务和转账事务并发执行。在T6时刻，汇总事务读取104账户余额，但由于在T5时刻，转账交易已经对104账户加了排它锁，所以汇总事务读取104账户余额的操作被阻塞。在T7时刻，转账事务执行完毕，释放104和101账户上的排它锁，并提交事务。  
T8时刻，汇总事务得到异步通知后继续执行，注意，此时转账交易己经成功提交，根据提交读隔离级别的定义，104账户的余额己经由原来的200变为600。因此当汇总事务执行结束后，汇总得到的总余额是：500+350+550+600=2000，而不是正确的500+350+550+200=1600。  
该数据错误。提交读隔离级别下，当释放锁并提交修改后，汇总交易读到的数据不是104账户原来的数据200元，而是修改后的数据600元，转账的400元被重复计算了两次。  
  
【问题3】  
(a)LX(104)，更新104账户余额；  
(b)LX(101)，更新101账户余额。  
  
本问题考查死锁的基本概念及应用。  
死锁是指两个或两个以上的事务在执行过程中，由于竞争资源而造成的一种阻塞的现象。在满足两段锁协议和提交读隔离级别的前提下，同时支持排它锁和共享锁的情况下，造成死锁的前提条件是两个事务对两个共享数据形成了交叉锁定，必然造成死锁。  
根据题干描述和分析死锁的形成条件,汇总事务和转账事务的共享数据是101和104账户，在T2时刻，汇总事务已经为101账户加了共享锁，因此（a）处应该为账户104加排它锁，并更新104账户余额。在（b）处，应该为账户101加排它锁，并更新101账户余额。  



[2678e885ff4f4041b5f9da1a426379ea.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第1题/2678e885ff4f4041b5f9da1a426379ea.jpg
[a3608ab0319e42d3af84ad488e68b986.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第2题/a3608ab0319e42d3af84ad488e68b986.jpg
[9e0ea509816d486c9297989b2746ebe6.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第2题/9e0ea509816d486c9297989b2746ebe6.jpg
[85838a7baae949fbb10e02fba33654c4.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第4题/85838a7baae949fbb10e02fba33654c4.jpg
[c7cd71347116464a93becb3f0558c446.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第4题/c7cd71347116464a93becb3f0558c446.jpg
[ae9290660c4640d49a56f63c3cfa0eec.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第4题/ae9290660c4640d49a56f63c3cfa0eec.jpg
[8a184b5900fa44af9212e9bc4e1d6841.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第4题/8a184b5900fa44af9212e9bc4e1d6841.jpg
