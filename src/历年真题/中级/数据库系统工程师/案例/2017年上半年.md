---  
title: 2017年上半年  
# icon: gears  
order: 992  
category:  
- 历年真题  
tag:  
- 真题  
  
# navbar: false  
# sidebar: false  
  
# breadcrumb: false  
# pageInfo: false  
# contributors: false  
# editLink: false  
# lastUpdated: false  
# prev: false  
# next: false  
comment: false  
# footer: false  
  
# backtotop: false  
---  
## 第1题 ##

试题一（15分）  
阅读下列说明，回答问题1至问题4，将解答填入答题纸的对应栏内。  
【说明】  
某医疗器械公司作为复杂医疗产品的集成商，必须保持高质量部件的及时供应。为了实现这一目标，该公司欲开发一采购系统。系统的主要功能如下：  
1.检查库存水平。采购部门每天检查部件库存量，当特定部件的库存量降至其订货店时，返回低存量部件及库存量。  
2.下达采购订单。采购部门针对低存量部件及库存量提交采购请求，向其供应商(通过供应商文件访问供应商数据）下达采购订单，并存储于采购订单文件中。  
3. 交运部件。当供应商提交提单并交运部件时，运输和接收(S/R)部门通过执行以下三步过程接收货物：  
(1) 验证装运部件。通过访问采购订单并将其与提单进行比较来验证装运的部件，并将提单信息发给S/R职员。如果收货部件项目出现在采购订单和提单上，则已验证的提单和收货部件项目将被送去检验。否则S/R职员提交的装运错误信息生成装运错误通知发送给供应商。  
(2) 检验部件质量。通过访问质量标准来检查装运部件的质量，并将己验证的提单发给检验员。如果部件满足所有质量标准，则将其添加到接受的部件列表用于更新部件库存。如果部件未通过检查，则将检验员创建的缺陷装运信息生成缺陷装运通知发送给供应商。  
(3) 更新部件库存。库管员根据收到的接受的部件列表添加本次采购数量，与原有库存量累加来更新库存部件中的库存量。标记订单采购完成。  
现采用结构化方法对该采购系统进行分析与设计，获得如图1-1所示的上下文数据流图和图1-2所示的0层数据流图。  
![ee10d41409d14f00901b5db3632a7a57.jpg][]  
  
【问题1】（5分）  
使用说明中的词语，给出图1-1中的实体E1-E5的名称。  
  
【问题2】（4分）  
使用说明中的词语，给出图1-2中的数据存储D1-D4的名称。  
  
【问题3】（4分）  
根据说明和图中术语，补充图1-2中缺失的数据流及其起点和终点。  
  
【问题4】（2分）  
用200字以内文字，说明建模图1-1和图1-2时如何保持数据流图平衡。  


## 第2题 ##

试题二（15分）  
阅读下列说明，回答问题1至问题3，将解答填入答题纸的对应栏内。  
【说明】  
某房屋租赁公司拟开发一个管理系统用于管理其持有的房屋、租客及员工信息。请根据下述需求描述完成系统的数据库设计。  
【需求描述】  
1.公司拥有多幢公寓楼，每幢公寓楼有唯一的楼编号和地址。每幢公寓楼中有多套公寓，每套公寓在楼内有唯一的编号（不同公寓楼内的公寓号可相同）。系统需记录每套公寓的卧室数和卫生间数。  
2.员工和租客在系统中有唯一的编号（员主编号和租客编号）。  
3.对于每个租客，系统需记录姓名、多个联系电话、一个银行账号(方便自动扣房租)、一个紧急联系人的姓名及联系电话。  
4.系统需记录每个员工的姓名、类别、一个联系电话和月工资。员工类别可以经理或维修工，也可兼任。每个经理可以管理多幢公寓楼。每幢公寓楼必须由一个经理管理。 系统需记录每个维修工的业务技能，如：水暖维修、电工、木工等。  
5.租客租赁公寓必须和公司签订租赁合同。一份租赁合同通常由一个或多个租客(合租)与该公寓楼的经理签订，一个租客也可租赁多套公寓。合同内容应包含签订日期、开始时间租期、押金和月租金。  
【概念模型设计】  
根据需求阶段收集的信息，设计的实体联系图(不完整)如图2-1 所示。  
![ceb3703b452d42678492a040fda0a640.jpg][]  
【逻辑结构设计】  
根据概念模型设计阶段完成的实体联系图，得出如下关系模式(不完整):  
联系电话 (电话号码，租客编号)  
租客 (租客编号，姓名，银行账号，联系人姓名，联系人电话)  
员工 (员工编号，姓名，联系电话，类别，月工资，（ a ）)  
公寓楼 ( (b) ，地址，经理编号)  
公寓（楼编号，公寓号，卧室数，卫生间数）  
合同（合同编号，租客编号，楼编号，公寓号，经理编号，签订日期，起始日期，租期，（c )，押金)  
  
【问题1】（4.5分）  
补充图2-1中的“签约”联系所关联的实体及联系类型。  
  
【问题2】（4.5分）  
补充逻辑结构设计中的( a) （b）（c ） 三处空缺。  
  
【问题3】（6分）  
在租期内，公寓内设施如出现问题，租客可在系统中进行故障登记，填写故障描述，每项故障由系统自动生成唯一的故障编号，由公司派维修工进行故障维修，系统需记录每次维修的维修日期和维修内容。请根据此需求，对图2-1进行补充，并将所补充的ER图内容转换为一个关系模式，请给出该关系模式。  


## 第3题 ##

试题三（15分）  
阅读下列说明，回答问题1至问题3，将解答填入答题纸的对应栏内。  
【说明】  
某社会救助基金会每年都会举办多项社会公益救助活动，需要建立一个信息系统，对之进行有效管理。  
【需求描述】  
1.任何一个实名认证的个人或者公益机构都可以发起一项公益救助活动，基金会需要记录发起者的信息。如果发起者是个人，需要记录姓名、身份证号和一部电话号码；如果发起者是公益机构，需要记录机构名称、统一社会信用代码、一部电话号码、唯一的法人代表身份证号和法人代表姓名。一个自然人可以是多个机构的法人代表。  
2.公益救助活动需要提供详实的资料供基金会审核，包括被捐助人姓名、身份证号、一部电话号码、家庭住址。  
3.基金会审核并确认项目后，发起公益救助的个人或机构可以公开宣传井募捐，募捐得到的款项进入基金会账户。  
4.发起公益救助的个人或机构开展救助行动，基金会根据被捐助人所提供的医疗发票或其它信息，直接将所筹款项支付给被捐助者。  
5.救助发起者针对任一被捐助者的公益活动只能开展一次。  
【逻辑结构设计】  
根据上述需求，设计出如下关系模式:  
公益活动(发起者编号，被捐助者身份证号，发起者电话号码，发起时间，结束时间，募捐金额)，其中对于个人发起者，发起者编号为身份证号；对于机构发起者，发起者编号为统一社会信用代码。  
个人发起者（姓名，身份证号，电话号码）  
机构发起者(机构名称，统一社会信用代码，电话号码，法人代表身份证号，法人代表姓名)  
被捐助者（姓名，身份证号，电话号码，家庭住址)  
  
【问题1】（6分）  
对关系"机构发起者"，请回答以下问题:  
(1) 列举出所有候选键。  
(2) 它是否为3NF，用100字以内文字简要叙述理由。  
(3) 将其分解为BC范式，分解后的关系名依次为：机构发起者1，机构发起者2 ，...，并用下划线标示分解后的各关系模式的主键。  
  
【问题2】（6分）  
对关系“公益活动”，请回答以下问题：  
(1)列举出所有候选键。  
(2) 它是否为2NF，用100字以内文字简要叙述理由。  
(3)将其分解为BC范式，分解后的关系名依次为:公益活动1，公益活动2 ，...，并用下划线标示分解后的各关系模式的主键。  
  
【问题3】（3分）  
基金会根据被捐助人提供的医疗发票或其它信息，将所筹款项支付给被捐助者。可以存在分期多次支付的情况，为了统计所筹款项支付情况（详细金额和时间) ,试增加”支付记录“关系模式，用100字以文字简要叙述解决方案。  


## 第4题 ##

试题四（15分）  
阅读下列说明，回答问题1至问题5，将解答填入答题纸的对应栏内。  
【说明】  
某公司要对其投放的自动售货机建立商品管理系统，其数据库的部分关系模式如下：  
![4b022be084964c5a8691485f0a519c60.jpg][]  
相关关系模式的属性及说明如下：  
(1)售货机摆放固定种类的商品，售货机内每种商品最多可以储存10件。管理员在每天结束的时候将售货机中所有售出商品补全。  
(2)每售出一件商品，就自动向销售单中添加一条销售记录。如果一天内某个售货机上某种商品的销售记录达到10条，则表明该售货机上该商品已售完，需要通知系统立即补货，通过自动向缺货单中添加一条缺货记录来实现。  
根据以上描述，回答下列问题，将SQL语句的空缺部分补充完整。  
  
【问题1】（3分）  
请将下面创建销售单表的SQL语句补充完整，要求指定关系的主码和外码约束。  
CREATE TABLE SALES(  
Sno CHAR(8) (a)  
VEMno CHAR(5) (b)  
Gno CHAR(8) (c)  
SDate DATE,  
STime TIME);  
  
【问题2】（4分）  
创建销售记录详单视图SALES\_Detail，要求按日期统计每个售货机上各种商品的销售数量，属性有VEMno、Location、Gno、Brand 、Price、amount和SDate。为方便实现，首先建立一个视图SALES\_Total，然后利用SALES\_Total完成视图SALES\_Detail的定义。  
![f14d541de3304384889c9a20d216f49c.jpg][]  
  
【问题3】（3分）  
每售出一件商品，就自动向销售单中添加一条销售记录。如果一天内某个售货机上某种商品的销售记录达到10条，则自动向缺货单中添加一条缺货记录。需要用触发器来实现缺货单的自动维护。程序中的GetTime（）获取当前时间。  
![58e85a9ece5a42b8aaa018fbd1d9fa1e.jpg][]  
  
【问题4】（3分）  
查询当天销售最多的商品编号、品牌和数量。程序中的GetDate()获取当天日期。  
![3bf4cd1a0ab44f8e8f2af8606e210d9e.jpg][]  
  
【问题5】（2分）  
查询一件都没有售出的所有商品编号和品牌。  
![53f838b78cdc43028136af45f44ba0d6.jpg][]  


## 第5题 ##

试题五（15分）  
阅读下列说明，回答问题1至问题2，将解答填入答题纸的对应栏内。  
【说明】  
某抢红包软件规定发红包人可以一次抛出多个红包，由多个人来抢。要求每个抢红包的人最多只能抢到同一批次中的一个红包，且存在多个人同时抢同一红包的情况。给定的红包关系模式如下:  
![c74d1c6e9bb94f1eb174e342570bc0d5.jpg][]  
其中ID唯一标识每一个红包；BatchID为发红包的批次，一个BatchID值可以对应多个ID值；SenderID为发红包人的标识；Money为红包中的钱数；ReceiverID记录抢到红包的人的标识。  
发红包人一次抛出多个红包，即向红包表中插入多条记录，每条记录表示一个红包，其ReceiverID值为空值。  
抢某个红包时，需要判定该红包记录的ReceiverID 值是否为空，不为空时表示该红包己被抢走，不能再抢，为空时抢红包人将自己的标识写入到ReceiverID字段中，即为抢到红包。  
  
【问题1】（9分）  
引入两个伪指令a=R(X) 和W(b，X) 。其中a=R(X) 表示读取当前红包记录的ReceiverID字段(记为数据项X) 到变量a中，W(b，X)表示将抢红包人的唯一标识b的值写入到当前红包记录的ReceiverID字段(数据项X) 中，变量a为空值时才会执行W(b，X) 操作。假设有多个人同时抢同一红包(即同时对同一记录进行操作)，用ai=Rj(X)和Wi(bi，X)表示系统依次响应的第i个人的抢红包操作。假设当前数据项X为空值，同时有三个人抢同一红包，则  
(1)如下的调度执行序列：  
a1=R1(X)，a2=R2(X)，W1(b1，X)，W2（b2，X)，a3=R3(X)  
抢到红包的是第几人?并说明理由。  
(2)引入共享锁指令SLocki(X)、独占锁指令XLocki(X)和解锁指令UnLocki(X) ，其中下标i表示第i个抢红包人的指令。如下的调度执行序列:  
SLock1(X)，a1=R1(X)，SLock2(X)，a2=R2(X)，XLock1(X)......  
是否会产生死锁?并说明理由。  
(3)为了保证系统第一个响应的抢红包人为最终抢到红包的人，请使用上述（2）中引入的锁指令，对上述(1)中的调度执行序列进行修改，在满足2PL协议的前提下，给出一个不产生死锁的完整的调度执行序列。  
  
【问题2】（6分）  
下面是用SQL实现的抢红包程序的一部分，请补全空缺处的代码。  
![07d847462efc4dccaca926c7697dd382.jpg][]  
![7b1dbdb68c284024829d11582a311583.jpg][]  



[ee10d41409d14f00901b5db3632a7a57.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第1题/ee10d41409d14f00901b5db3632a7a57.jpg
[ceb3703b452d42678492a040fda0a640.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第2题/ceb3703b452d42678492a040fda0a640.jpg
[4b022be084964c5a8691485f0a519c60.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第4题/4b022be084964c5a8691485f0a519c60.jpg
[f14d541de3304384889c9a20d216f49c.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第4题/f14d541de3304384889c9a20d216f49c.jpg
[58e85a9ece5a42b8aaa018fbd1d9fa1e.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第4题/58e85a9ece5a42b8aaa018fbd1d9fa1e.jpg
[3bf4cd1a0ab44f8e8f2af8606e210d9e.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第4题/3bf4cd1a0ab44f8e8f2af8606e210d9e.jpg
[53f838b78cdc43028136af45f44ba0d6.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第4题/53f838b78cdc43028136af45f44ba0d6.jpg
[c74d1c6e9bb94f1eb174e342570bc0d5.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第5题/c74d1c6e9bb94f1eb174e342570bc0d5.jpg
[07d847462efc4dccaca926c7697dd382.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第5题/07d847462efc4dccaca926c7697dd382.jpg
[7b1dbdb68c284024829d11582a311583.jpg]: https://www.xkxxkx.cn/file/exam/software/数据库系统工程师/案例/第5题/7b1dbdb68c284024829d11582a311583.jpg
